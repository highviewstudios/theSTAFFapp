(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[0],{215:function(e,a,t){e.exports=t(471)},220:function(e,a,t){},245:function(e,a,t){},246:function(e,a,t){},247:function(e,a,t){},39:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADICAYAAAC+j+5qAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAwKADAAQAAAABAAAAyAAAAAB9S3ILAAAF30lEQVR4Ae3cQW4UVhAE0BkzFzCC8yQ3i48WzgPIFwA7jhQiNmyaX8LVPDYGrN/qfuWSvLEvF38IECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYJfAddc5v/aaN/cfn1MbfH18L6sA7l1gppEEagQUoCYqiyYEFCChamaNgALURGXRhIACJFTNrBFQgJqoLJoQUICEqpk1AgpQE5VFEwIKkFA1s0ZAAWqismhCQAESqmbWCChATVQWTQgoQELVzBoBBaiJyqIJAQVIqJpZI6AANVFZNCGgAAlVM2sEFKAmKosmBBQgoWpmjYAC1ERl0YSAAiRUzawRUICaqCyaEFCAhKqZNQIKUBOVRRMCCpBQNbNGQAFqorJoQkABEqpm1ggoQE1UFk0IKEBC1cwaAQWoicqiCQEFSKiaWSOgADVRWTQhoAAJVTNrBBSgJiqLJgQUIKFqZo2AAtREZdGEgAIkVM2sEVCAmqgsmhBQgISqmTUCClATlUUTAgqQUDWzRkABaqKyaEJAARKqZtYIKEBNVBZNCChAQtXMGgEFqInKogkBBUiomlkjoAA1UVk0IaAACVUzawQUoCYqiyYEFCChamaNgALURGXRhIACJFTNrBFQgJqoLJoQUICEqpk1AgpQE5VFEwIKkFA1s0ZAAWqismhCQAESqmbWCChATVQWTQgoQELVzBoBBaiJyqIJAQVIqJpZI6AANVFZNCGgAAlVM2sEFKAmKosmBBQgoWpmjYAC1ERl0YSAAiRUzawRUICaqCyaEFCAhKqZNQIKUBOVRRMCCpBQNbNGQAFqorJoQkABEqpm1ggoQE1UFk0IKEBC1cwaAQWoicqiCQEFSKiaWSOgADVRWTQhoAAJVTNrBG63d49/XJ6e/qzZ+BUv+vz8FNvu9vbzX7Hhv9Pgu7u/v3y6//Dt5Nu/X/wvwT18+w8fX6eAjM7kcn26PLxM+r8AvgU642pKqYAClAZn7TMCCnDG0ZRSAQUoDc7aZwQU4IyjKaUCClAanLXPCCjAGUdTSgUUoDQ4a58RUIAzjqaUCihAaXDWPiOgAGccTSkVUIDS4Kx9RkABzjiaUiqgAKXBWfuMgAKccTSlVEABSoOz9hkBBTjjaEqpgAKUBmftMwIKcMbRlFIBBSgNztpnBBTgjKMppQK3y8uvifjvJ+VLT3g9ayd/c8P1evfwei4t3uTl6/377a/f/8Pff07gzf3H55+b8OPXXx/fy+rHPOPP+BZoTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOchAQIECBAg0CvwDwWvJ3alsOgjAAAAAElFTkSuQmCC"},40:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADICAYAAAC+j+5qAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAwKADAAQAAAABAAAAyAAAAAB9S3ILAAADRUlEQVR4Ae3cQQqCYBQE4D/xAkH3qaN1tLpP0AXCMqi2A+0cvjaCT8H5nrO0MfwIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQI/Cewmw/341iW03+3u4vAxgSm6fK47a/fp57fL//zuZy/JxwJNAvslnFe8/0KMDWHlY1AElCAJGReLaAA1esVLgkoQBIyrxZQgOr1CpcEFCAJmVcLKED1eoVLAgqQhMyrBRSger3CJQEFSELm1QIKUL1e4ZKAAiQh82oBBaher3BJQAGSkHm1gAJUr1e4JKAASci8WkABqtcrXBJQgCRkXi2gANXrFS4JKEASMq8WUIDq9QqXBOax/k3E50v5dK05ge0LrO/79kNIQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsCWBF/saEjPJd4SSAAAAAElFTkSuQmCC"},471:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(32),l=t.n(o),c=(t(220),t(7)),s=t(9),i=t.n(s),u=t(10),m=function(e){return{type:"USER_UPDATE_AUTH",value:e}},d=function(e){return{type:"USER_UPDATE_UUID",value:e}},E=function(e){return{type:"USER_UPDATE_NAME",value:e}},b=function(e){return{type:"USER_UPDATE_ROLE",value:e}},g=function(e){return{type:"USER_UPDATE_NEW",value:e}},f=function(e){return{type:"USER_UPDATE_REQUESTEDPASSWORD",value:e}},h=function(e){return{type:"USER_UPDATE_ORGID",value:e}},p=function(e){return{type:"USER_UPDATE_SAREQUEST",value:e}};t(242),t(243),t(244),t(245),t(246),t(247);var y=function(){return r.a.createElement("div",{className:"betaBanner"},r.a.createElement("p",null,r.a.createElement("strong",null,"This website is a beta verison, please expect errors. Any problems, please contact High-View Studios (Shaun Evans)")))},O=t(481),v=t(205),A="";var j=function(){var e=window.location.hostname,a=window.location.protocol;A="localhost"===e?a+"//"+e+":8080":a+"//"+e},k=t(26),w=function(e){return{type:"UPDATE_EDIT_BOOKING",value:e}},D=function(e){return{type:"UPDATE_BOOKING_ID",value:e}},T=t(73),I=t(17);var C=function(){var e=Object(k.f)(),a=Object(u.c)((function(e){return e.user})),t=Object(u.b)(),o=Object(n.useState)({name:"",show:!1}),l=Object(c.a)(o,2),s=l[0],d=l[1];function p(){i.a.get("/logout").then((function(n){if(console.log(n.data.message),"User logged out"===n.data.message){var r;if(console.log(a),"superAdmin"==a.role)r="/";else r="/org/"+a.orgID+"/signIn";t(m(!1)),t(E("")),t(b("")),t(g("")),t(f(!1)),t(h("")),t(w(!1)),e.push(r)}})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){j()}),[]),Object(n.useEffect)((function(){a.auth?"superAdmin"==a.role?d({name:"High-View Studios",show:!0}):d({name:a.name,show:!0}):d({name:"",show:!1})}),[a]),r.a.createElement("div",null,s.show?r.a.createElement("div",null,r.a.createElement("strong",null,"User: ",s.name),r.a.createElement("br",null),"seniorAdmin"==a.role?r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(T.a.Toggle,{variant:"warning",id:"dropdown-basic"},"Page"),r.a.createElement(I.a,{variant:"warning",onClick:p},"Log Out"),r.a.createElement(T.a.Menu,null,r.a.createElement(T.a.Item,{onClick:function(){return e.push("/")}},"Organisation Home"),r.a.createElement(T.a.Item,{onClick:function(){return e.push("/org/"+a.orgID+"/organisationAdmin")}},"Organisation Admin")))):r.a.createElement("div",null,r.a.createElement(I.a,{variant:"warning",onClick:p},"Log Out"))):r.a.createElement("div",null))};var S=function(){return r.a.createElement("nav",null,r.a.createElement(O.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,null,r.a.createElement("a",{className:"websiteTitle",href:"/"},r.a.createElement("div",{className:"clickable"},r.a.createElement("h1",null,r.a.createElement("strong",null,"My STAFF")),r.a.createElement("h2",null,r.a.createElement("strong",null,"Space, Times, Flexible, Facilities"))))),r.a.createElement(v.a,null,r.a.createElement("div",{className:"user-nav"},r.a.createElement(C,null)))))},N=t(19),U=t(20);var B=function(){var e=Object(u.c)((function(e){return e.user})),a=Object(k.f)();return Object(n.useEffect)((function(){document.title="STAFF",console.log(e),1==e.auth&&("superAdmin"==e.role?a.push("/administrator"):a.push("/org/"+e.orgID))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{fluid:!0,className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"My STAFF homepage is coming soon..."),r.a.createElement("br",null),r.a.createElement("h2",null,"If your organisation is already using My STAFF, please use the direct link from your registration email."))))};var x=function(){var e=Object(u.c)((function(e){return e.user})),a=Object(k.f)();return Object(n.useEffect)((function(){document.title="STAFF - Not Connected",j(),e.auth&&a.push("/")}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h3",null,"Email is not connected to any organisation"),r.a.createElement(I.a,{variant:"warning",onClick:function(){return a.push("/")}},"Back to Home"),r.a.createElement("br",null),r.a.createElement("br",null))))};var R=function(e){var a=e.match.params.id,t=(Object(u.c)((function(e){return e.user})),Object(k.f)());return Object(n.useEffect)((function(){document.title="STAFF - Not Connected",j()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h3",null,"This is not the login method you use to log in"),r.a.createElement(I.a,{variant:"warning",onClick:function(){return t.push("/org/"+a+"/")}},"Back"),r.a.createElement("br",null),r.a.createElement("br",null))))},Y=function(e){return{type:"ORG_UPDATE_SIGNIN_LOCAL",value:e}},_=function(e){return{type:"ORG_UPDATE_SIGNIN_GOOGLE",value:e}},L=function(e){return{type:"ORG_UPDATE_MESSAGE",value:e}},M=function(e){return{type:"ORG_UPDATE_USEDEPARTMENTS",value:e}},P=function(e){return{type:"ORG_UPDATE_NOOFDEPARTMENTS",value:e}},Q=function(e){return{type:"ORG_UPDATE_DEPARTMENTS",value:e}},F=function(e){return{type:"ORG_UPDATE_REDEEMEDROOMS",value:e}},G=function(e){return{type:"ORG_UPDATE_ROOMS",value:e}},H=function(e){return{type:"ORG_UPDATE_HOLIDAYS",value:e}},W=function(e){return{type:"ORG_UPDATE_LOCKED",value:e}},q=function(e){return{type:"UPDATE_ROOM_NAME",value:e}},K=function(e){return{type:"UPDATE_ROOM_ID",value:e}},V=function(e){return{type:"UPDATE_ROOM_LAYOUT_DATA",value:e}},J=function(e){return{type:"UPDATE_ROOM_SESSION_ID",value:e}},z=function(e){return{type:"UPDATE_ROOM_SESSION_LABEL",value:e}},X=function(e){return{type:"UPDATE_ROOM_DATE",value:e}},Z=function(e){return{type:"UPDATE_ROOM_WEEK_BEGIN",value:e}},$=function(e){return{type:"UPDATE_ROOM_DAY_LIST",value:e}},ee=function(e){return{type:"UPDATE_ROOM_WEEK_SYSTEM",value:e}},ae=function(e){return{type:"UPDATE_ROOM_WEEK_UUID",value:e}},te=function(e){return{type:"UPDATE_FORCE_COLLIDED_BOOKINGS",value:e}},ne=function(e){return{type:"UPDATE_FORCE_SIGNIN",value:e}},re=function(e){return{type:"UPDATE_FROM_SIGNIN",value:e}},oe=t(14),le=t(1),ce=t(72),se=t(482),ie=t(13),ue=t.n(ie);var me=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.c)((function(e){return e.globalVars})),l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=Object(k.f)(),m=Object(u.b)(),d=Object(n.useState)({slotClass:"",dayClass:"",dates:["","","","","","",""],weekSlot:"",dayIndex:0,data:{},holiday:"",weekSystemUUID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({days:[],order:[],sessions:[],sessionTotal:0}),h=Object(c.a)(f,2),p=h[0],y=h[1],A=Object(n.useState)({open:!1,heading:"",message:""}),j=Object(c.a)(A,2),T=j[0],C=j[1];function S(){C((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function N(t,n,r){var o={},l=[],c=ue()(t,"DD/MM/YYYY"),s={user:"",department:"",type:""},u=B(c.week())+"-"+c.format("YY");console.log(u);for(var m=0;m<7;m++){var d,E=Object(oe.a)(n);try{for(E.s();!(d=E.n()).done;){var b=d.value;l.push(B(c.day())+"-"+B(r[b].id)),o[B(c.week())+"-"+c.format("YY")+"-"+B(c.day())+"-"+B(r[b].id)]=s}}catch(h){E.e(h)}finally{E.f()}c.add(1,"d")}var f={orgID:a,room:e.roomID,week:u,days:l,weekBG:t};i.a.post("/booking/getBookings",f).then((function(e){var a=e.data;console.log(a.bookings),"null"===a.error&&g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSlot:u,data:a.bookings})}))})).catch((function(e){console.log(e)}))}function U(a){var n,r=ue()(a,"DD/MM/YYYY"),o=B(r.week())+"-"+r.format("YY"),l="",c=Object(oe.a)(t.holidays);try{var s=function(){var a=n.value;if(a.weeks.includes(o))return a.titleUUID.includes("w")?e.weekSystem&&(l=a.name,g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystemUUID:a.titleUUID})}))):a.titleUUID.includes("h")&&(l="Holiday: "+a.name),"break"};for(c.s();!(n=c.n()).done;){if("break"===s())break}}catch(i){c.e(i)}finally{c.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{holiday:l})}))}function B(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}function x(t){var n=t.target.id,r=n.toString().split("-");m(q(e.roomName)),m(K(e.roomID)),m(J(n)),m(ee(e.weekSystem)),m(ae(b.weekSystemUUID)),m(V(e.layoutData)),p.sessions[r[1]].id.includes("b")?m(z(p.sessions[r[1]].breakText)):""!=p.sessions[r[1]].customText?m(z(p.sessions[r[1]].customText)):m(z(p.sessions[r[1]].id)),m(Z(b.dates[0])),m(X(b.dates[r[0]])),m({type:"UPDATE_ROOM_TOTAL_SESSIONS",value:p.sessionTotal}),m($(p.days)),s.push("/org/"+a+"/book")}function R(e){m(w(!0)),m(D(e))}function Y(e,a,t){for(var n=[],r=0;r<7;r++)n.push(e.format("DD/MM/YYYY")),e.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:n})})),N(n[0],a,t),U(n[0])}function _(e){var a,n=Object(oe.a)(t.departments);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.uuid==e)return r.name}}catch(o){n.e(o)}finally{n.f()}}return Object(n.useEffect)((function(){!function(){console.log(e.weekSystem);var t,n=e.layoutData.days.split(","),r=[],l={},s=e.layoutData.sessionOrder.split(","),u=Object(oe.a)(n);try{for(u.s();!(t=u.n()).done;){var m=t.value;r.push("true"==m)}}catch(E){u.e(E)}finally{u.f()}var d={orgID:a,layoutUUID:e.layoutData.uuid};i.a.post("/organisation/getTimetableSessions",d).then((function(a){var t,n=a.data.sessions,i=Object(oe.a)(n);try{for(i.s();!(t=i.n()).done;){var u=t.value;l[u.id]=u}}catch(E){i.e(E)}finally{i.f()}y((function(a){return Object(le.a)(Object(le.a)({},a),{},{days:r,sessions:l,sessionTotal:e.layoutData.sessions,order:s})}));var m,d=0,b=Object(oe.a)(r);try{for(b.s();!(m=b.n()).done;){m.value&&d++}}catch(E){b.e(E)}finally{b.f()}if(console.log(d),g((function(e){return Object(le.a)(Object(le.a)({},e),{},{slotClass:"session"+d+"-slot timetable-layout",dayClass:"session"+d+"-days timetable-layout"})})),console.log(o.weekBeginDate),""==o.weekBeginDate){var f=function(e){var a=ue()();a.startOf("week");for(var t,n=[],r=0;r<7;r++)n.push(a.format("DD/MM/YYYY")),a.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:n})}));var o,l=Object(oe.a)(e.entries());try{for(l.s();!(o=l.n()).done;){var s=Object(c.a)(o.value,2),i=s[0];if(s[1]){t=i;break}}}catch(E){l.e(E)}finally{l.f()}return g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dayIndex:t})})),n[0]}(r);N(f,s,l),U(f)}else{!function(e){var a,t,n=Object(oe.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),o=r[0];if(r[1]){a=o;break}}}catch(E){n.e(E)}finally{n.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dayIndex:a})}))}(r),Y(ue()(o.weekBeginDate,"DD/MM/YYYY"),s,l)}})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred"},"Week Beginning: ",b.dates[b.dayIndex]))),r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred-100"},b.holiday))),r.a.createElement(v.a,null,r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(I.a,{variant:"primary",onClick:function(){var a=ue()(b.dates[0],"DD/MM/YYYY");a.subtract(1,"w");var t=ue()();t.startOf("week"),a<t?C({heading:e.roomName,message:"You cannot go back previous from this week",open:!0}):Y(a,p.order,p.sessions)}},"-"),r.a.createElement(I.a,{variant:"primary",onClick:function(){var e=ue()(b.dates[0],"DD/MM/YYYY");e.add(1,"w"),Y(e,p.order,p.sessions)}},"+")))),r.a.createElement(O.a,null,r.a.createElement("table",{className:"timetable-layout",width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:b.slotClass},"Session"),p.days.map((function(e,a){if(e)return r.a.createElement("td",{className:b.dayClass,key:a},l[a]," ",r.a.createElement("br",null)," ",b.dates[a])})))),r.a.createElement("tbody",null,p.order.map((function(e,a){return e.toString().includes("b")?r.a.createElement("tr",{key:a,style:{backgroundColor:p.sessions[e].bgColor}},r.a.createElement("td",{className:b.slotClass,style:{color:p.sessions[e].textColor}},""!=p.sessions[e].breakText?p.sessions[e].breakText:p.sessions[e].id),p.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var o=b.weekSlot+"-"+B(n)+"-"+B(p.sessions[e].id);return"single"==b.data[o].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+p.session,onClick:function(){return R(b.data[o].uuid)}},b.data[o].user," ",r.a.createElement("br",null)," ",_(b.data[o].department)):"repeat"==b.data[o].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:function(){return R(b.data[o].uuid)}},b.data[o].user," ",r.a.createElement("br",null)," ",_(b.data[o].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}}))):r.a.createElement("tr",{key:a},r.a.createElement("td",{className:b.slotClass,"data-tip":""!=p.sessions[e].hoverText?p.sessions[e].hoverText:null},""!=p.sessions[e].customText?p.sessions[e].customText:p.sessions[e].id),p.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var o=b.weekSlot+"-"+B(n)+"-"+B(p.sessions[e].id);return"single"==b.data[o].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+e,onClick:function(){return R(b.data[o].uuid)}},b.data[o].user," ",r.a.createElement("br",null)," ",_(b.data[o].department)):"repeat"==b.data[o].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:function(){return R(b.data[o].uuid)}},b.data[o].user," ",r.a.createElement("br",null)," ",_(b.data[o].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}})))})),void ce.a.rebuild())),r.a.createElement(ce.a,null)),r.a.createElement(se.a,{show:T.open,onHide:S},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,T.heading)),r.a.createElement(se.a.Body,null,T.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:S},"Close"))))};var de=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.c)((function(e){return e.globalVars})),l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=Object(u.b)(),m=Object(k.f)(),d=Object(n.useState)({slotClass:"",dayClass:"",times:[],startTime:"",finishTime:"",interval:"",dates:["","","","","","",""],dayIndex:0,weekSlot:"",data:{},holiday:"",days:[],weekSystemUUID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1];Object(n.useEffect)((function(){!function(){var a,t=e.layoutData.days.split(","),n=[],r=e.layoutData.startTime,l=e.layoutData.finishTime,s=e.layoutData.timeInterval,i=Object(oe.a)(t);try{for(i.s();!(a=i.n()).done;){var u=a.value;n.push("true"==u)}}catch(h){i.e(h)}finally{i.f()}for(var m=0,d=0,E=n;d<E.length;d++){E[d]&&m++}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{slotClass:"session"+m+"-slot timetable-layout",dayClass:"session"+m+"-days timetable-layout",startTime:r,finishTime:l,interval:s,days:n})}));var b=function(e,a,t){var n=[];if("Start Time"!==e&&"Finish Time"!==a&&0!==t){for(var r=ue()(e,"HH:mm"),o=ue()(a,"HH:mm");r.isBefore(o);)n.push(r.format("HH:mm")),r.add(t,"m");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{times:n})}))}return n}(r,l,s);if(""==o.weekBeginDate){var f=function(e){var a=ue()();a.startOf("week");for(var t,n=[],r=0;r<7;r++)n.push(a.format("DD/MM/YYYY")),a.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:n})}));var o,l=Object(oe.a)(e.entries());try{for(l.s();!(o=l.n()).done;){var s=Object(c.a)(o.value,2),i=s[0];if(s[1]){t=i;break}}}catch(h){l.e(h)}finally{l.f()}return g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekbegin:n[0],dayIndex:t})})),n[0]}(n);T(f,b),j(f)}else{!function(e){var a,t,n=Object(oe.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),o=r[0];if(r[1]){a=o;break}}}catch(h){n.e(h)}finally{n.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dayIndex:a})}))}(n),S(ue()(o.weekBeginDate,"DD/MM/YYYY"),b)}}()}),[]);var f=Object(n.useState)({open:!1,heading:"",message:""}),h=Object(c.a)(f,2),p=h[0],y=h[1];function A(){y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function j(a){var n,r=ue()(a,"DD/MM/YYYY"),o=C(r.week())+"-"+r.format("YY"),l="",c=Object(oe.a)(t.holidays);try{var s=function(){var a=n.value;if(a.weeks.includes(o))return a.titleUUID.includes("w")?e.weekSystem&&(l=a.name,g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystemUUID:a.titleUUID})}))):a.titleUUID.includes("h")&&(l="Holiday: "+a.name),"break"};for(c.s();!(n=c.n()).done;){if("break"===s())break}}catch(i){c.e(i)}finally{c.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{holiday:l})}))}function T(t,n){for(var r={},o=[],l=ue()(t,"DD/MM/YYYY"),c={user:"",department:"",type:""},s=C(l.week())+"-"+l.format("YY"),u=0;u<7;u++){var m,d=Object(oe.a)(n);try{for(d.s();!(m=d.n()).done;){var E=m.value;o.push(C(l.day())+"-"+E.replace(":","")),r[C(l.week())+"-"+l.format("YY")+"-"+C(l.day())+"-"+E.replace(":","")]=c}}catch(f){d.e(f)}finally{d.f()}l.add(1,"d")}var b={orgID:a,room:e.roomID,week:s,days:o,weekBG:t};i.a.post("/booking/getBookings",b).then((function(e){var a=e.data;"null"===a.error&&g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSlot:s,data:a.bookings})}))})).catch((function(e){console.log(e)}))}function C(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}function S(e,a){for(var t=[],n=0;n<7;n++)t.push(e.format("DD/MM/YYYY")),e.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:t})})),T(t[0],a),j(t[0])}function N(t){var n=t.target.id;console.log(n);var r=n.toString().split("-");s(q(e.roomName)),s(K(e.roomID)),s(V(e.layoutData)),s(J(n)),s(z(r[1])),s(Z(b.dates[0])),s(X(b.dates[r[0]])),s($(b.days)),s(ee(e.weekSystem)),s(ae(b.weekSystemUUID)),s({type:"UPDATE_DIARY_START_TIME",value:b.startTime}),s(function(e){return{type:"UPDATE_DIARY_FINISH_TIME",value:e}}(b.finishTime)),s(function(e){return{type:"UPDATE_DIARY_TIME_INTERVAL",value:e}}(b.interval)),m.push("/org/"+a+"/book")}function U(e){var a,n=Object(oe.a)(t.departments);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.uuid==e)return r.name}}catch(o){n.e(o)}finally{n.f()}}function B(e){console.log("booking"),s(w(!0)),s(D(e))}return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred"},"Week Beginning: ",b.dates[b.dayIndex]))),r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred-100"},b.holiday))),r.a.createElement(v.a,null,r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(I.a,{variant:"primary",onClick:function(){var a=ue()(b.dates[0],"DD/MM/YYYY");a.subtract(1,"w");var t=ue()();t.startOf("week"),a<t?y({heading:e.roomName,message:"You cannot go back previous from this week",open:!0}):S(a,b.times)}},"-"),r.a.createElement(I.a,{variant:"primary",onClick:function(){var e=ue()(b.dates[0],"DD/MM/YYYY");e.add(1,"w"),S(e,b.times)}},"+")))),r.a.createElement(O.a,null,r.a.createElement("table",{className:"timetable-layout",width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:b.slotClass},"Session"),b.days.map((function(e,a){if(e)return r.a.createElement("td",{className:b.dayClass,key:a},l[a]," ",r.a.createElement("br",null)," ",b.dates[a])})))),r.a.createElement("tbody",null,b.times.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:b.slotClass},e),b.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var o=b.weekSlot+"-"+C(n)+"-"+e.replace(":","");return"single"==b.data[o].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+e,onClick:function(){return B(b.data[o].uuid)}},b.data[o].user," ",r.a.createElement("br",null)," ",U(b.data[o].department)):"repeat"==b.data[o].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:function(){return B(b.data[o].uuid)}},b.data[o].user," ",r.a.createElement("br",null)," ",U(b.data[o].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:N},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:N},"Book")}})))}))))),r.a.createElement(se.a,{show:p.open,onHide:A},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,p.heading)),r.a.createElement(se.a.Body,null,p.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:A},"Close"))))};var Ee=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.c)((function(e){return e.globalVars})),l=Object(u.c)((function(e){return e.bookings})),s=Object(u.c)((function(e){return e.user})),m=Object(u.b)(),d=Object(n.useState)({orgTitle:"",orgLocked:"",roomName:"Rooms",roomLayout:"",roomID:"",layoutData:{},view:!1,weekSystem:!1}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({open:!1,heading:"",message:""}),h=Object(c.a)(f,2),p=h[0],y=h[1],A=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),j=Object(c.a)(A,2),k=j[0],D=j[1];function C(){y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function S(){D((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function B(){D({open:!1});var e={orgID:a,bookingID:l.bookingID};i.a.post("/booking/deleteBooking",e).then((function(e){"null"==e.data.error&&(y({heading:"Delete booking",message:"Booking deleted!",open:!0}),m(w(!1)),g((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!1})})),setTimeout((function(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!0})}))}),100))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){document.title="STAFF",""!=o.roomName&&(console.log(o.roomName),g((function(e){return Object(le.a)(Object(le.a)({},e),{},{roomName:o.roomName,roomLayout:o.layoutData.layout,layoutData:o.layoutData,roomID:o.roomID,weekSystem:o.weekSystem})})),setTimeout((function(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!0})}))}),100))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{fluid:!0,className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,t.name),t.locked?r.a.createElement("h2",null,"Organisation Locked"):null,r.a.createElement(O.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,{xs:8},r.a.createElement("div",{className:"roomLbl"},"Rooms:"),r.a.createElement(T.a,{className:"rooms"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},b.roomName),r.a.createElement(T.a.Menu,{className:"dropdown-items"},t.rooms.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:function(){!function(e,a,n,r){var o;g((function(a){return Object(le.a)(Object(le.a)({},a),{},{roomName:e,roomLayout:"---",roomID:n,weekSystem:!1})}));var l,c=Object(oe.a)(t.layouts);try{for(c.s();!(l=c.n()).done;){var s=l.value;s.uuid==a&&(o=s)}}catch(i){c.e(i)}finally{c.f()}g((function(a){return Object(le.a)(Object(le.a)({},a),{},{roomName:e,roomLayout:o.layout,roomID:n,weekSystem:"true"==r,layoutData:o,view:!1})})),m(w(!1)),setTimeout((function(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!0})}))}),100)}(e.name,e.layout,e.uuid,e.weekSystem)}},e.name)}))))),r.a.createElement(v.a,null)),r.a.createElement(O.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,{xs:8},b.view?r.a.createElement("div",null,""!=b.roomLayout&&"Timetable"==b.roomLayout?r.a.createElement(me,{orgID:a,roomName:b.roomName,roomID:b.roomID,layoutData:b.layoutData,weekSystem:b.weekSystem}):null,""!=b.roomLayout&&"Diary"==b.roomLayout?r.a.createElement(de,{orgID:a,roomName:b.roomName,roomID:b.roomID,layoutData:b.layoutData,weekSystem:b.weekSystem}):null):null),r.a.createElement(v.a,null,r.a.createElement("div",{className:l.editBooking?"edit-booking-show":"edit-booking-hide"},r.a.createElement("div",{className:"edit-delete"},"user"!=s.role?r.a.createElement(I.a,{variant:"primary",onClick:function(){D({heading:"Delete Booking",message:"Are you sure you want to delete this booking?",acceptFunction:B,acceptName:"Yes",showAccept:!0,showCancel:!0,cancelName:"No",open:!0})}},"Delete"):null)))))),r.a.createElement(se.a,{show:p.open,onHide:C},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,p.heading)),r.a.createElement(se.a.Body,null,p.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:C},"Close"))),r.a.createElement(se.a,{show:k.open,onHide:S},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,k.heading)),r.a.createElement(se.a.Body,null,k.message),r.a.createElement(se.a.Footer,null,k.showAccept?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:k.acceptFunction},k.acceptName)):null,k.showCancel?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:S},k.cancelName)):null)))},be=t(16),ge=t(117);var fe=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.globalVars}));return r.a.createElement("div",null,r.a.createElement(ge.a,{body:!0,className:"collides_bookingSlot"},r.a.createElement(O.a,null,"Booking - Room: ",e.roomName),r.a.createElement(O.a,null,r.a.createElement(v.a,null,"User: ",r.a.createElement("br",null),e.user),r.a.createElement(v.a,null,"Description: ",r.a.createElement("br",null),e.sessionDes),r.a.createElement(v.a,null,"Booking Type:",r.a.createElement("br",null)," ",e.bookingType," - ",e.repeatType),r.a.createElement(v.a,null,"Start Date: ",r.a.createElement("br",null)," ",e.startDate),r.a.createElement(v.a,null,"Session: ",e.session),r.a.createElement(v.a,null,"Session Length: ",e.sessionTotal),r.a.createElement(v.a,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){return function(n){var r={orgID:e.orgID,bookingUUID:n};i.a.post("/collide/deleteBooking",r).then((function(e){"null"==e.data.error&&(t.collideBookingsUpdate?a(te(!1)):a(te(!0)))})).catch((function(e){console.log(e)}))}(e.uuid)}},"Delete")))))};var he=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.globalVars}));return r.a.createElement("div",null,r.a.createElement(ge.a,{body:!0,className:"collides_collideSlot"},r.a.createElement(O.a,null,"Collided Booking"),r.a.createElement(O.a,null,r.a.createElement(v.a,null,"User: ",r.a.createElement("br",null),e.user),r.a.createElement(v.a,null,"Description: ",r.a.createElement("br",null),e.sessionDes),r.a.createElement(v.a,null,"Booking Type:",r.a.createElement("br",null)," ",e.bookingType),r.a.createElement(v.a,null,"Start Date: ",r.a.createElement("br",null)," ",e.startDate),r.a.createElement(v.a,null,"Session: ",e.session),r.a.createElement(v.a,null,"Session Length: ",e.sessionTotal),r.a.createElement(v.a,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){return function(n,r){var o={orgID:e.orgID,bookingUUID:n,collideUUID:r};i.a.post("/collide/deleteCollide",o).then((function(e){"null"==e.data.error&&(t.collideBookingsUpdate?a(te(!1)):a(te(!0)))})).catch((function(e){console.log(e)}))}(e.bookingUUID,e.uuid)}},"Delete")))))};var pe=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.c)((function(e){return e.globalVars})),l=Object(k.f)(),s=Object(n.useState)({bookings:[]}),m=Object(c.a)(s,2),d=m[0],E=m[1];function b(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}return Object(n.useEffect)((function(){!function(){if(t.locked){var e=Object(be.a)({orgID:a},"orgID",a);i.a.post("/organisation/collidedbookings",e).then((function(e){var n=e.data;"null"!=n.error?l.push("/org/"+a+"/organisationAdmin"):n.bookings.length>0?function(e,a,n){var r,o=Object(oe.a)(e);try{for(o.s();!(r=o.n()).done;){var l,c=r.value,s=c.sessions.split(",")[0].split("-")[1],i="",u="",m=Object(oe.a)(t.rooms);try{for(m.s();!(l=m.n()).done;){var d=l.value;d.uuid==c.roomID&&(c.roomName=d.name,i=d.layout)}}catch(B){m.e(B)}finally{m.f()}var g,f=Object(oe.a)(t.layouts);try{for(f.s();!(g=f.n()).done;){var h=g.value;h.uuid==i&&(u=h.layout)}}catch(B){f.e(B)}finally{f.f()}if("Timetable"==u){var p,y=Object(oe.a)(n);try{for(y.s();!(p=y.n()).done;){var O=p.value;O.layoutUUID==i&&b(O.id)==s&&(s.includes("b")?""!=O.breakText?c.firstSession=O.breakText:c.firstSession=s:""!=O.customText?c.firstSession=O.customText:c.firstSession=s)}}catch(B){y.e(B)}finally{y.f()}}else"Diary"==u&&(c.firstSession=s[0]+s[1]+":"+s[2]+s[3]);var v,A=c.collideUUID.split(","),j=[],k=Object(oe.a)(A);try{for(k.s();!(v=k.n()).done;){var w,D=v.value,T=Object(oe.a)(a);try{for(T.s();!(w=T.n()).done;){var I=w.value;if(I.uuid==D){var C=I.sessions.split(",")[0].split("-")[1];if("Timetable"==u){var S,N=Object(oe.a)(n);try{for(N.s();!(S=N.n()).done;){var U=S.value;U.layoutUUID==i&&b(U.id)==C&&(C.includes("b")?""!=U.breakText?I.firstSession=U.breakText:I.firstSession=C:""!=U.customText?I.firstSession=U.customText:I.firstSession=C)}}catch(B){N.e(B)}finally{N.f()}}else"Diary"==u&&(I.firstSession=C[0]+C[1]+":"+C[2]+C[3]);j.push(I)}}}catch(B){T.e(B)}finally{T.f()}}}catch(B){k.e(B)}finally{k.f()}c.collideBookings=j}}catch(B){o.e(B)}finally{o.f()}E((function(a){return Object(le.a)(Object(le.a)({},a),{},{bookings:e})}))}(n.bookings,n.collides,n.sessions):l.push("/org/"+a+"/organisationAdmin")})).catch((function(e){console.log(e)}))}else l.push("/org/"+a)}()}),[o.collideBookingsUpdate]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{fluid:!0,className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Collision Bookings"),r.a.createElement("br",null),d.bookings.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(fe,{orgID:a,uuid:e.uuid,roomName:e.roomName,user:e.user,sessionDes:e.sessionDes,bookingType:e.bookingType,repeatType:e.repeatType,startDate:e.startDate,sessionTotal:e.sessionTotal,session:e.firstSession}),d.bookings[t].collideBookings.map((function(t,n){return r.a.createElement(he,{orgID:a,bookingUUID:e.uuid,uuid:t.uuid,key:n,user:t.user,sessionDes:t.sessionDes,bookingType:t.bookingType,startDate:t.startDate,sessionTotal:t.sessionTotal,session:t.firstSession})})),r.a.createElement("br",null))})))))};var ye=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.user})),o=Object(u.c)((function(e){return e.globalVars})),l=Object(u.b)(),s=Object(n.useState)({organisation:{}}),m=Object(c.a)(s,2),d=m[0],E=m[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),h=f[0],y=f[1];function A(){o.forceSignIn?(l(re(!0)),l(ne(!1))):(l(re(!0)),l(ne(!0))),y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}return Object(n.useEffect)((function(){!function(){var e={orgID:a};i.a.post("/organisation/getSARData",e).then((function(e){console.log(e.data.org),E({organisation:e.data.org})})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",{className:"body changeOfSenior"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Change of Senior Admin Request"),r.a.createElement("br",null),r.a.createElement("p",null,"You are viewing this screen because ",d.organisation.POC_Name," has requested a change of Senior Admin role to you. "),r.a.createElement("p",null,"This means that you will be responible for the admin side of your organisation."),r.a.createElement("p",null,"If you require help, please speak to ",d.organisation.POC_Name," or contact High-View Studios"),r.a.createElement("p",null,"Do you want to Accept or Decline this invitation?"),r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){var e,n=(e={orgID:a},Object(be.a)(e,"orgID",a),Object(be.a)(e,"invate","Accept"),Object(be.a)(e,"newUserID",t.uuid),e);i.a.post("/organisation/SAInvate",n).then((function(e){console.log(e.data),"Senior Admin Updated"==e.data.message&&(l(b(e.data.role)),l(p("")),y({heading:"Request Accepted",open:!0}))})).catch((function(e){console.log(e)}))}},"Accept")),r.a.createElement(v.a,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){var e,n=(e={orgID:a},Object(be.a)(e,"orgID",a),Object(be.a)(e,"invate","Decline"),Object(be.a)(e,"newUserID",t.uuid),e);i.a.post("/organisation/SAInvate",n).then((function(e){"Senior Admin Request Declined"==e.data.message&&(l(p("")),o.forceSignIn?(l(re(!0)),l(ne(!1))):(l(re(!0)),l(ne(!0))))})).catch((function(e){console.log(e)}))}},"Decline"))))),r.a.createElement(se.a,{show:h.open,onHide:A},r.a.createElement(se.a.Header,null,r.a.createElement(se.a.Title,null,h.heading)),r.a.createElement(se.a.Body,null,r.a.createElement("p",null,"You are now the Senior Admin of this organisation."),r.a.createElement("p",null,"To get to the Admin side, go on the organisation page drop-down at the top-right of the screen")),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:A},"Close"))))},Oe=t(18);var ve=function(e){var a=e.match.params.id,t=Object(k.f)(),o=Object(n.useState)(""),l=Object(c.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)(!1),E=Object(c.a)(d,2),b=E[0],g=E[1];return Object(u.b)(),Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Forgot your password?"),b?r.a.createElement("div",null,r.a.createElement("h3",null,"Your new password has been requested, please check your email"),r.a.createElement(I.a,{variant:"warning",onClick:function(){return t.push("/org/"+a+"/signIn")}},"Back to Sign In"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("h3",null,"Please enter your email below:"),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement(Oe.a.Control,{id:"txtEmail",type:"email",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,s),r.a.createElement(I.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtEmail").value;if(""!=a){var t={email:a};i.a.post("/requestPassword/",t).then((function(e){"Yes"==e.data.userError?m(e.data.message):g(!0)})).catch((function(e){console.log(e)}))}}},"Request New Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null)))))};var Ae=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),o=t[0],l=t[1],s=Object(u.b)(),m=Object(u.c)((function(e){return e.globalVars}));return Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Please create a new password"),r.a.createElement("form",null,r.a.createElement("label",{id:"lblCurrentPassword"},"Current Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtCurrentPassword",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblNewPassword"},"New Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtNewPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{id:"lblConfirmPassword"},"Confirm Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtConfirmPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,o),r.a.createElement(I.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtCurrentPassword").value,t=document.getElementById("txtNewPassword").value,n=document.getElementById("txtConfirmPassword").value;if(""!=a&&""!=t&&""!=n){var r={oldPassword:a,newPassword:t,confirmPassword:n};i.a.post("/changePassword",r).then((function(e){"Yes"==e.data.userError?l(e.data.message):"Updated user password"==e.data.message&&(s(f(e.data.user.requestedPassword)),m.forceSignIn?(s(re(!0)),s(ne(!1))):(s(re(!0)),s(ne(!0))))})).catch((function(e){console.log(e)}))}}},"Set Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null))))};var je=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),o=t[0],l=t[1],s=Object(u.b)(),m=Object(u.c)((function(e){return e.globalVars}));return Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Hello, and welcome to My STAFF"),r.a.createElement("h3",null,"Please create a new password"),r.a.createElement("form",null,r.a.createElement("label",{id:"lblCurrentPassword"},"Current Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtCurrentPassword",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblNewPassword"},"New Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtNewPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{id:"lblConfirmPassword"},"Confirm Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtConfirmPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,o),r.a.createElement(I.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtCurrentPassword").value,t=document.getElementById("txtNewPassword").value,n=document.getElementById("txtConfirmPassword").value;if(""!=a&&""!=t&&""!=n){var r={oldPassword:a,newPassword:t,confirmPassword:n};i.a.post("/createPassword",r).then((function(e){"Yes"==e.data.userError?l(e.data.message):"Updated user first password"==e.data.message&&(s(g(e.data.user.new)),m.forceSignIn?(s(re(!0)),s(ne(!1))):(s(re(!0)),s(ne(!0))))})).catch((function(e){console.log(e)}))}}},"Set Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null))))};var ke=function(e){e.match.params.id;var a=Object(u.c)((function(e){return e.globalVars})),t=(Object(u.c)((function(e){return e.user})),Object(k.f)(),Object(u.b)());return Object(n.useEffect)((function(){document.title="STAFF - Not Connected"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h3",null,"Sorry, this is not your organisation"),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(I.a,{variant:"warning",onClick:function(){a.forceSignIn?(t(re(!0)),t(ne(!1))):(t(re(!0)),t(ne(!0)))}},"Back to my organisation"),r.a.createElement("br",null),r.a.createElement("br",null))))},we=t(211),De=(t(251),t(111)),Te=t(110),Ie=t(39),Ce=t.n(Ie),Se=t(40),Ne=t.n(Se);var Ue=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.b)(),l=Object(n.useState)({open:!1,auth_local:!1,auth_google:!1,message:"",save:!1,showSave:!1}),s=Object(c.a)(l,2),m=s[0],d=s[1],E=new we.a.Tour({defaultStepOtions:{classes:"shepherd",scrollTo:!0},useModalOverlay:!0});function b(e){var a=e.target,t=a.name,n=a.checked;d((function(e){var a;return Object(le.a)(Object(le.a)({},e),{},(a={},Object(be.a)(a,t,Boolean(n)),Object(be.a)(a,"showSave",!0),a))})),console.log(t)}return E.addStep({id:"example-step",title:"Message",text:"This step is attached to the bottom of the <code>.example-css-selector</code> element.",attachTo:{element:".example-class-selector",on:"bottom"},classes:"",buttons:[{text:"NEXT",action:E.next}]}),r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(Te.a,{className:"plus-image",src:m.open?Ne.a:Ce.a,onClick:function(){m.open?d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})):d((function(e){return Object(le.a)(Object(le.a)({},e),{},{auth_local:t.signInLocal,auth_google:t.signInGoogle,message:t.message,open:!0})}))}})," Login Settings"),r.a.createElement("br",null),r.a.createElement(De.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},r.a.createElement(I.a,{variant:"primary",onClick:function(){E.start()}},"Tour")),r.a.createElement("div",{className:"normal-text"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(Oe.a,null,"Login Options:",r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Check,{id:"LoginSettings_ckbLocal",name:"auth_local",type:"checkbox",checked:m.auth_local,onChange:b,label:"Local Login"})),r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Check,{id:"LoginSettings_ckbGoogle",name:"auth_google",type:"checkbox",checked:m.auth_google,onChange:b,label:"Google Login"})),r.a.createElement(Oe.a.Label,{className:"example-class-selector",id:"LoginSettings_lblMessage"},"Login Message:"),r.a.createElement("br",null),r.a.createElement(Oe.a.Control,{id:"LoginSettings_txtMessage",name:"message",value:m.message,onChange:function(e){var a=e.target,t=a.name,n=a.value;d((function(e){var a;return Object(le.a)(Object(le.a)({},e),{},(a={},Object(be.a)(a,t,n),Object(be.a)(a,"showSave",!0),a))}))},type:"text",required:!0}))),r.a.createElement(v.a,null))),r.a.createElement("div",{className:m.showSave?"submit-button-show":"submit-button-hidden"},r.a.createElement(I.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault();var t=document.getElementById("LoginSettings_ckbLocal").checked,n=document.getElementById("LoginSettings_ckbGoogle").checked,r=document.getElementById("LoginSettings_txtMessage").value,l={orgID:a,auth_local:t.toString(),auth_google:n.toString(),message:r};i.a.post("/organisation/updateLoginSettings",l).then((function(e){if("Login settings updated successfully"==e.data.message){o(Y(t)),o(_(n)),o(L(r)),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{save:!0})}));setTimeout((function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{save:!1,showSave:!1,open:!1})}))}),2e3)}})).catch((function(e){console.log(e)}))}},"Save")," ",m.save?"Saved!":null))))))))},Be=t(483);var xe=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.b)(),l=Object(n.useState)({uuid:0,activeRemove:!1}),s=Object(c.a)(l,2),m=s[0],d=s[1],E=Object(n.useState)({open:!1,saved:!1,showSave:!1,useDepartments:!1,aname:"",names:[]}),b=Object(c.a)(E,2),g=b[0],f=b[1],h=Object(n.useState)({open:!1,heading:"",message:""}),p=Object(c.a)(h,2),y=p[0],A=p[1];function j(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(Te.a,{className:"plus-image",src:g.open?Ne.a:Ce.a,onClick:function(){g.open?f((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})):f((function(e){return Object(le.a)(Object(le.a)({},e),{},{useDepartments:t.useDepartments,names:t.departments,open:!0})}))}})," Departments"),r.a.createElement("br",null),r.a.createElement(De.a,{in:g.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(Oe.a,null,r.a.createElement(Oe.a.Check,{id:"chkUseDepartments",name:"useDepartments",label:"Use Departments",checked:g.useDepartments,onChange:function(e){var t=e.target,n=t.name,r=t.checked;console.log(r),f((function(e){var a;return Object(le.a)(Object(le.a)({},e),{},(a={},Object(be.a)(a,n,r),Object(be.a)(a,"showSave",!0),a))}));var l={useDepartments:r.toString(),orgID:a};i.a.post("/organisation/updateUseDepartments",l).then((function(e){console.log(e.data.useDepartments),o(M(g.useDepartments))})).catch((function(e){console.log(e)}))}}),r.a.createElement("br",null),r.a.createElement("p",null,"Add new department:"),r.a.createElement(Oe.a.Control,{type:"text",value:g.aname,name:"aname",onChange:function(e){var a=e.target,t=a.name,n=a.value;f((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},t,n))}))}}),r.a.createElement("div",{className:"add-button"},r.a.createElement(I.a,{onClick:function(){if(function(e){var a,n=!1,r=Object(oe.a)(t.departments);try{for(r.s();!(a=r.n()).done;){if(a.value.name==e){n=!0;break}}}catch(o){r.e(o)}finally{r.f()}return n}(g.aname))A((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Deparment",message:"There is already a department with this name",open:!0})}));else{var e={orgID:a,departmentName:g.aname};i.a.post("/organisation/addDepartment",e).then((function(e){console.log(e.data),o(P(e.data.noOfDepartments)),o(Q(e.data.departments)),f((function(a){return Object(le.a)(Object(le.a)({},a),{},{names:e.data.departments,aname:""})}))})).catch((function(e){console.log(e)}))}}},"Add")))),r.a.createElement(v.a,null,"Departments:",r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(Be.a,null,g.names.map((function(e,a){return r.a.createElement(Be.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.uuid,d((function(e){return Object(le.a)(Object(le.a)({},e),{},{uuid:a,activeRemove:!0})})),console.log(a)}},e.name)})))),r.a.createElement("div",{className:m.activeRemove?"remove-button-show":"remove-button-hidden"},r.a.createElement(I.a,{onClick:function(){if(m.activeRemove){var e={orgID:a,uuid:m.uuid};i.a.post("/organisatiton/removeDepartment",e).then((function(e){console.log(e.data),o(Q(e.data.departments)),f((function(a){return Object(le.a)(Object(le.a)({},a),{},{names:e.data.departments})})),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{activeRemove:!1})}))})).catch((function(e){console.log(e)}))}}},"Remove"))))))))))),r.a.createElement(se.a,{show:y.open,onHide:j},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,y.heading)),r.a.createElement(se.a.Body,null,y.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:j},"Close"))))},Re=t(30);var Ye=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),o=Object(n.useState)({open:!1,name:"",email:"",role_User:!1,role_Admin:!1,role_SeniorAdmin:!1,multiAdd:!1,departments:[],depToUser:"",userDepartments:[],users:[],edit:!1,editID:0,roles:!0}),l=Object(c.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)({open:!1,heading:"",message:""}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({open:!1}),h=Object(c.a)(f,2),p=h[0],y=h[1],A=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),j=Object(c.a)(A,2),k=j[0],w=j[1],D=Object(n.useState)({open:!1,heading:"",message:"",option1Function:"",option1Name:"",showOption1:!1,option2Function:"",option2Name:"",showOption2:!1}),C=Object(c.a)(D,2),S=C[0],N=C[1];function U(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function B(){y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function x(){w((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function R(){var e,a=[],n=Object(oe.a)(t.departments);try{for(n.s();!(e=n.n()).done;){var r=e.value;s.userDepartments.includes(r.name)&&a.push(r.uuid)}}catch(o){n.e(o)}finally{n.f()}return console.log(a),a.toString()}function Y(e){var a,n=e.split(","),r=[],o=Object(oe.a)(n);try{for(o.s();!(a=o.n()).done;){var l,c=a.value,s=Object(oe.a)(t.departments);try{for(s.s();!(l=s.n()).done;){var i=l.value;i.uuid==c&&r.push(i.name)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){o.e(u)}finally{o.f()}return r}function _(e){var a=e.target.name;"role_User"==a&&m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_Admin:!1,role_User:!0})})),"role_Admin"==a&&m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_Admin:!0,role_User:!1})}))}function L(e){var a=e.target,t=a.name,n=a.value;m((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},t,n))}))}function M(){w({open:!1});var e={uuid:s.editID,orgID:a};i.a.post("/organisation/removeUser",e).then((function(e){var a=e.data;"User removed successfully"==a.message&&(g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Remove User",message:"User has been removed and deleted",open:!0})})),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{users:a.users,name:"",email:"",role_Admin:!1,role_User:!1,userDepartments:[],edit:!1})})))})).catch((function(e){console.log(e)}))}function P(){N({open:!1});var e={orgID:a,uuid:s.editID,method:"google"};i.a.post("/organisaation/changeUserLoginMethod",e).then((function(e){"Strategy Updated"==e.data.message&&g({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}function Q(){N({open:!1});var e={orgID:a,uuid:s.editID,method:"local"};i.a.post("/organisaation/changeUserLoginMethod",e).then((function(e){"Strategy Updated"==e.data.message&&g({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(Te.a,{className:"plus-image",src:s.open?Ne.a:Ce.a,onClick:function(){s.open?m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})):(m((function(e){return Object(le.a)(Object(le.a)({},e),{},{departments:t.departments,open:!0})})),function(){var e={orgID:a};i.a.post("/organisation/getUsers",e).then((function(e){console.log(e.data),m((function(a){return Object(le.a)(Object(le.a)({},a),{},{users:e.data.users})}))})).catch((function(e){console.log(e)}))}())}})," Users"),r.a.createElement("br",null),r.a.createElement(De.a,{in:s.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(v.a,{className:"bordered"},r.a.createElement("strong",null,"User Details:"),r.a.createElement(Oe.a,null,r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblName"},"Name:"),r.a.createElement(Oe.a.Control,{id:"txtName",name:"name",type:"text",value:s.name,onChange:L}))),r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblEmail"},"Email:"),r.a.createElement(Oe.a.Control,{id:"txtEmail",name:"email",value:s.email,type:"text",onChange:L}))),r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement("div",{className:s.roles?null:"roles-hidden"},r.a.createElement(Oe.a.Label,{id:"lblRole"},"Role:"),r.a.createElement(Oe.a.Check,{id:"radRoleUser",type:"radio",name:"role_User",checked:s.role_User,onChange:_,label:"User"}),r.a.createElement(Oe.a.Check,{id:"radRoleAdmin",type:"radio",name:"role_Admin",checked:s.role_Admin,onChange:_,label:"Admin"})))),r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblDepartmentsTitle"},"Departments:")," ",r.a.createElement("br",null),0==s.userDepartments.length?r.a.createElement("div",{className:"departments-hidden"},r.a.createElement(Oe.a.Label,null,"---")):r.a.createElement("div",null,r.a.createElement(Oe.a.Label,{id:"lblDepartments"},s.userDepartments.toString())))),r.a.createElement(Oe.a.Row,null,r.a.createElement("div",{className:"submit-button-show"},s.edit?r.a.createElement("div",null,r.a.createElement(I.a,{className:"side-by-side",variant:"primary",onClick:function(){m((function(e){return Object(le.a)(Object(le.a)({},e),{},{edit:!1,name:"",email:"",roles:!0,role_Admin:!1,role_User:!1,userDepartments:""})}))}},"Add New User"),r.a.createElement(I.a,{className:"side-by-side",variant:"primary",onClick:function(){s.role_SeniorAdmin?g({heading:"Remove User",message:"You cannot delete a Senior Admin",open:!0}):w({heading:"Remove User",message:"Are you sure you want to remove this user and all their bookings?",acceptName:"Yes",acceptFunction:M,showAccept:!0,showCancel:!0,cancelName:"No",open:!0})}},"Remove")):r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:function(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Multiple Add",message:"The feature is not advailable yet",open:!0})}))}},"Add Multiple"),r.a.createElement(I.a,{variant:"primary",onClick:function(){if(""==s.name||""==s.email)g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Required",message:"Please fill in the name and email field.",open:!0})}));else if(s.role_User||s.role_Admin){var e=R(),t="";s.role_User&&(t="user"),s.role_Admin&&(t="admin");var n={orgID:a,name:s.name,email:s.email,role:t,departments:e};i.a.post("/organisation/addUser",n).then((function(e){var a=e.data;"Yes"==a.userError?g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add User",message:a.message,open:!0})})):m((function(a){return Object(le.a)(Object(le.a)({},a),{},{users:e.data.users,name:"",email:"",role_User:!1,role_Admin:!1,userDepartments:[]})}))})).catch((function(e){console.log(e)}))}else g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Role",message:"Please pick a role.",open:!0})}))}},"Add")))),r.a.createElement(Oe.a.Row,{className:s.edit?"user-edit":"user-edit edit-hidden"},r.a.createElement("div",null,r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary"},"More"),r.a.createElement(T.a.Menu,null,r.a.createElement(T.a.Item,{onClick:function(){y({open:!0})}},"S/A Request"),r.a.createElement(T.a.Item,{onClick:function(){var e={uuid:s.editID};i.a.post("/organisation/getUserLoginMethod",e).then((function(e){var t=e.data.method;if(""==t){var n=e.data.name+" has not logged into the website yet, you can choose which method you want them to log in with.";N({heading:"Change Login Method",message:n,option1Name:"Local",option2Name:"Google",option1Function:Q,option2Function:P,showOption1:!0,showOption2:!0,open:!0})}else{var r;"local"==t?r="google":"google"==t&&(r="local");var o=e.data.name+"'s login method is "+t+". Are you sure you want to change it to a "+r+" method?";w({heading:"Change Login Method",message:o,acceptName:"Yes",acceptFunction:function(){!function(e,a,t){w({open:!1});var n={orgID:t,uuid:e,method:a};i.a.post("/organisaation/changeUserLoginMethod",n).then((function(e){"Strategy Updated"==e.data.message&&g({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}(s.editID,r,a)},showAccept:!0,cancelName:"No",showCancel:!0,open:!0})}})).catch((function(e){console.log(e)}))}},"Change Login Method"))),r.a.createElement(I.a,{className:"side-by-side",variant:"primary",onClick:function(){var e=R(),t="";s.role_SeniorAdmin&&(t="seniorAdmin"),s.role_User&&(t="user"),s.role_Admin&&(t="admin");var n={uuid:s.editID,name:s.name,email:s.email,role:t,departments:e,orgID:a};i.a.post("/organisation/updateUser",n).then((function(e){var a=e.data;"User updated successfully"==a.message&&(g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Update User",message:"User has been updated",open:!0})})),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{users:a.users,edit:!1})})))})).catch((function(e){console.log(e)}))}},"Update"))))),r.a.createElement(v.a,{className:"bordered"},r.a.createElement("strong",null,"Departments:"),r.a.createElement("div",{className:"scrollable-250"},r.a.createElement(Be.a,null,s.departments.map((function(e,a){return r.a.createElement(Be.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.name,m((function(e){return Object(le.a)(Object(le.a)({},e),{},{depToUser:a})}))}},e.name)})))),r.a.createElement("div",{className:"add-button"},r.a.createElement(I.a,{onClick:function(){if(s.userDepartments.includes(s.depToUser)){var e=s.userDepartments.filter((function(e){return e!=s.depToUser}));m((function(a){return Object(le.a)(Object(le.a)({},a),{},{userDepartments:e})}))}}},"Remove"),r.a.createElement(I.a,{onClick:function(){s.userDepartments.includes(s.depToUser)||m((function(e){return Object(le.a)(Object(le.a)({},e),{},{userDepartments:[].concat(Object(Re.a)(s.userDepartments),[s.depToUser])})}))}},"Add"))))),r.a.createElement(v.a,null,"Users:",r.a.createElement("div",{className:"scrollable-250"},r.a.createElement(Be.a,null,s.users.map((function(e,a){var t="";return t="seniorAdmin"==e.role?e.displayName+" (Senior Admin)":"admin"==e.role?e.displayName+" (Admin)":e.displayName,r.a.createElement(Be.a.Item,{key:a,action:!0,onClick:function(){!function(e,a,t,n,r){m((function(n){return Object(le.a)(Object(le.a)({},n),{},{name:a,email:t,userDepartments:Y(r),edit:!0,editID:e})})),"seniorAdmin"==n?m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_SeniorAdmin:!0,role_Admin:!1,role_User:!1,roles:!1})})):"user"==n?m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_User:!0,role_SeniorAdmin:!1,role_Admin:!1,roles:!0})})):"admin"==n&&m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_Admin:!0,role_SeniorAdmin:!1,role_User:!1,roles:!0})}))}(e.uuid,e.displayName,e.email,e.role,e.departments)}},t)}))))))))))))),r.a.createElement(se.a,{show:b.open,onHide:U},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,b.heading)),r.a.createElement(se.a.Body,null,b.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:U},"Close"))),r.a.createElement(se.a,{show:p.open,onHide:B},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,"Change of Senior Admin Request")),r.a.createElement(se.a.Body,null,r.a.createElement("p",null,"You are requesting ",s.name," to change roles to the Senior Admin of this organisation. You can only have ONE Senior Admin per organisation, so this means you will not have access to the administrator panel for this organisation. Your role will change to Admin"),r.a.createElement("p",null,"This user will also be to new \u2018point of contact\u2019 for High-View Studios."),r.a.createElement("p",null,"This user will be sent an email and they have to accept the request. In the meantime you will still have access."),r.a.createElement("p",null,"You and High-View Studios will be notified when this request has been accepted."),r.a.createElement("p",null,"Do you want to continue?")),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,newUUID:s.editID};i.a.post("/organisation/changeSeniorAdmin",e).then((function(e){"Request sent successfully"==e.data.message&&(y({open:!1}),g({heading:"Change of Senior Admin Request",message:"A request has been sent to "+s.name,open:!0}))})).catch((function(e){console.log(e)}))}},"Yes"),r.a.createElement(I.a,{variant:"primary",onClick:B},"No"))),r.a.createElement(se.a,{show:k.open,onHide:x},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,k.heading)),r.a.createElement(se.a.Body,null,k.message),r.a.createElement(se.a.Footer,null,k.showAccept?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:k.acceptFunction},k.acceptName)):null,k.showCancel?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:x},k.cancelName)):null)),r.a.createElement(se.a,{show:S.open,onHide:function(){N((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,S.heading)),r.a.createElement(se.a.Body,null,S.message),r.a.createElement(se.a.Footer,null,S.showOption1?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:S.option1Function},S.option1Name)):null,S.showOption2?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:S.option2Function},S.option2Name)):null)))};var _e=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),o=Object(u.b)(),l=Object(n.useState)({open:!1,layout:"Layout",layoutUUID:0,name:"",rooms:[],newAdd:!1,layouts:!1,editRoom:!1,roomUUID:0,yourLayouts:[],weekSystem:!1,editAdd:!1}),s=Object(c.a)(l,2),m=s[0],d=s[1],E=Object(n.useState)({open:!1,heading:"",message:""}),b=Object(c.a)(E,2),g=b[0],f=b[1],h=Object(n.useState)({open:!1,heading:"",message:""}),p=Object(c.a)(h,2),y=p[0],A=p[1];function j(){f((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function k(e,a){console.log(a),d(e===a?function(e){return Object(le.a)(Object(le.a)({},e),{},{newAdd:!1,layouts:!1,editAdd:!1})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{newAdd:!0,layouts:!0,editAdd:!0})})}function w(e){var a,t=Object(oe.a)(m.yourLayouts);try{for(t.s();!(a=t.n()).done;){var n=a.value;if(n.uuid==e)return n.name}}catch(r){t.e(r)}finally{t.f()}}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(Te.a,{className:"plus-image",src:m.open?Ne.a:Ce.a,onClick:function(){if(m.open)d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));else{var e={orgID:a};i.a.post("/organisation/getLayouts",e).then((function(e){d((function(a){return Object(le.a)(Object(le.a)({},a),{},{open:!0,yourLayouts:e.data.layouts})}))})).catch((function(e){console.log(e)}))}var n={orgID:a};i.a.post("/organisation/getRooms",n).then((function(e){var a=e.data;console.log(a),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{rooms:a.rooms})}))})).catch((function(e){console.log(e)})),k(t.allocatedRooms,t.redeemedRooms)}})," Rooms"),r.a.createElement("br",null),r.a.createElement(De.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement("div",{className:m.newAdd&&m.yourLayouts.length>0?"rooms-add":"rooms-add rooms-hide"},r.a.createElement(Oe.a,null,r.a.createElement(Oe.a.Group,null,r.a.createElement(Oe.a.Label,{id:"lblName"},"Name:"),r.a.createElement(Oe.a.Control,{id:"txtName",value:m.name,onChange:function(e){var a=e.target.value;d((function(e){return Object(le.a)(Object(le.a)({},e),{},{name:a})}))}})))),r.a.createElement("div",{className:m.layouts&&m.yourLayouts.length>0?"":"rooms-hide"},r.a.createElement(Oe.a,null,r.a.createElement(Oe.a.Group,null,r.a.createElement(Oe.a.Label,{className:"side-by-side",id:"lblName"},"Layout:"),r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},m.layout),r.a.createElement(T.a.Menu,{className:"dropdown-items"},m.yourLayouts.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:function(){!function(e,a){d((function(t){return Object(le.a)(Object(le.a)({},t),{},{layout:a,layoutUUID:e})}))}(e.uuid,e.name)}},e.name)})))),m.newAdd?r.a.createElement("div",{className:"centred"},r.a.createElement(Oe.a.Check,{type:"checkbox",checked:m.weekSystem,onChange:function(e){var t=e.target.checked;if(t){var n={orgID:a};i.a.post("/organisation/getMainOrgWeekSystem",n).then((function(e){console.log(e.data),"false"==e.data.weekSystem?(f({heading:"Week System",message:"You cannot turn on a room week system until you turn on the main week system in the 'Week System / Holidays' tab",open:!0}),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:!1})}))):d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t})}))})).catch((function(e){console.log(e)}))}else d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t})}))},label:"Use week system"})):null,m.editRoom&&m.yourLayouts.length>0?r.a.createElement("div",{className:"centred"},"Week System: ",m.weekSystem?" Enabled":" Disabled"):null)))),r.a.createElement(O.a,{className:"add-button"},m.newAdd&&m.yourLayouts.length>0?r.a.createElement(I.a,{variant:"primary",onClick:function(){if(""===m.name)f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Room",message:"The room requires a Name",open:!0})}));else if(function(e){var a,t=!1,n=Object(oe.a)(m.rooms);try{for(n.s();!(a=n.n()).done;){if(a.value.name==e){t=!0;break}}}catch(r){n.e(r)}finally{n.f()}return t}(m.name))f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Room",message:"A room with the same name already exists",open:!0})}));else if("Layout"===m.layout)f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Room",message:"The room requires a Layout",open:!0})}));else{var e={orgID:a,name:m.name,layout:m.layoutUUID,weekSystem:m.weekSystem};i.a.post("/organisation/addRoom",e).then((function(e){var a=e.data;"Successfully added room"===a.message&&(o(F(a.redeemedRooms)),o(G(a.rooms)),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{rooms:a.rooms,name:"",layout:"layout",weekSystem:!1})})),k(t.allocatedRooms,a.redeemedRooms))})).catch((function(e){console.log(e)}))}}},"Add"):null,m.editRoom&&m.yourLayouts.length>0?r.a.createElement("div",null,m.editAdd?r.a.createElement(I.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{editRoom:!1,layouts:!1})})),k(t.allocatedRooms,t.redeemedRooms)}},"Add New Room"):null,r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:m.roomUUID,layout:m.layoutUUID};i.a.post("/organisation/updateRoom",e).then((function(e){"Updated Room"==e.data.message&&(d((function(a){return Object(le.a)(Object(le.a)({},a),{},{rooms:e.data.rooms,roomUUID:0,editRoom:!1,layouts:!1})})),k(t.allocatedRooms,t.redeemedRooms))})).catch((function(e){console.log(e)}))}},"Update")):null),r.a.createElement(O.a,null,r.a.createElement("div",{className:0==m.yourLayouts.length?"rooms-layoutText":"rooms-layoutText rooms-hide"},r.a.createElement("strong",null,"There are no layouts in your system yet, use the layouts tab to add one. Then your will be able to assign a room to a layout.")))),r.a.createElement(v.a,null,"Allocated Rooms: ",t.allocatedRooms," ",r.a.createElement("br",null),"Redeemed Rooms: ",t.redeemedRooms),r.a.createElement(v.a,null,"Room List:",r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(Be.a,null,m.rooms.map((function(e,a){return r.a.createElement(Be.a.Item,{variant:m.roomUUID==e.uuid?"primary":null,key:a,action:!0,onClick:function(){var a,t,n,r;a=e.uuid,t=w(e.layout),n=e.layout,r=e.weekSystem,d((function(e){return Object(le.a)(Object(le.a)({},e),{},{roomUUID:a,editRoom:!0,layouts:!0,newAdd:!1,layout:t,layoutUUID:n,weekSystem:"true"==r})}))}},e.name," (",w(e.layout),")")})))),r.a.createElement("div",{className:m.editRoom?"remove-button-show":"remove-button-hidden"},r.a.createElement(I.a,{onClick:function(){f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Remove Room",message:"This feature hasn't been completed yet",open:!0})}))}},"Remove"))))))))))),r.a.createElement(se.a,{show:g.open,onHide:j},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,g.heading)),r.a.createElement(se.a.Body,null,g.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:j},"Close"))),r.a.createElement(se.a,{show:y.open,onHide:function(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,"Week System")),r.a.createElement(se.a.Body,null,g.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:!1})})),A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},"No"),r.a.createElement(I.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:!0})})),A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},"Yes"))))},Le=Object(n.createContext)();var Me=function(e){var a=Object(n.useState)({}),t=Object(c.a)(a,2),o=t[0],l=t[1],s=Object(n.useState)([]),i=Object(c.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)({view:!1,breakID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1];return r.a.createElement(Le.Provider,{value:{sessions:o,order:u,breakBtns:b,addSession:function(e){l((function(a){return Object(le.a)(Object(le.a)({},a),{},Object(be.a)({},e,{id:e,customText:"",hoverText:""}))})),m((function(a){return[].concat(Object(Re.a)(a),[e])}))},resetSessions:function(){l({}),m([])},minusSession:function(e){var a=o;l({});for(var t=function(){var t=u[n];if(t!=e){var r={};r=t.toString().includes("b")?{id:a[t].id,breakText:a[t].breakText,textColor:a[t].textColor,bgColor:a[t].bgColor}:{id:a[t].id,customText:a[t].customText,hoverText:a[t].hoverText},l((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},t,r))}))}},n=0;n<u.length;n++)t();m((function(){return u.filter((function(a){return a!=e}))}))},updateCustomText:function(e,a){var t={customText:a,hoverText:o[e].hoverText,id:o[e].id};l((function(a){return Object(le.a)(Object(le.a)({},a),{},Object(be.a)({},e,t))}))},updateHoverText:function(e,a){var t={customText:o[e].customText,hoverText:a,id:o[e].id};l((function(a){return Object(le.a)(Object(le.a)({},a),{},Object(be.a)({},e,t))}))},addBreak:function(e){var a="b"+e;l((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},a,{id:a,breakText:"",textColor:"#000000",bgColor:"#FFFFFF"}))})),m((function(e){return[].concat(Object(Re.a)(e),[a])}))},toggleBreakBtns:function(e,a){g(a?function(t){return Object(le.a)(Object(le.a)({},t),{},{view:a,breakID:e})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{view:a})})},orderMoveUp:function(){var e=u.indexOf(b.breakID);if(e-1>=0){var a=u[e];u.splice(e,1);var t=e-1;u.splice(t,0,a),m(u),m((function(e){return Object(Re.a)(e)}))}},orderMoveDown:function(){var e=u.indexOf(b.breakID);if(e+1<u.length){var a=u[e];u.splice(e,1);var t=e+1;u.splice(t,0,a),m(u),m((function(e){return Object(Re.a)(e)}))}},removeBreak:function(){u.indexOf(b.breakID);var e=1,a=o,t=[];l({});for(var n=function(){var n=u[r];if(n!=b.breakID){var o={};if(n.toString().includes("b")){var c="b"+e;o={id:c,breakText:a[n].breakText,textColor:a[n].textColor,bgColor:a[n].bgColor},l((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},c,o))})),t.push(c),e++}else o={id:a[n].id,customText:a[n].customText,hoverText:a[n].hoverText},l((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},n,o))})),t.push(n)}},r=0;r<u.length;r++)n();m(t),m((function(e){return Object(Re.a)(e)})),g((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!1})}))},updateBreakText:function(e){var a={id:o[b.breakID].id,breakText:e,textColor:o[b.breakID].textColor,bgColor:o[b.breakID].bgColor};l((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},b.breakID,a))}))},updateBreakColor:function(e,a){var t={};"textColor"===e&&(t={id:o[b.breakID].id,breakText:o[b.breakID].breakText,textColor:a,bgColor:o[b.breakID].bgColor}),"bgColor"===e&&(t={id:o[b.breakID].id,breakText:o[b.breakID].breakText,textColor:o[b.breakID].textColor,bgColor:a}),l((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},b.breakID,t))}))},SetSessions:function(e){l(e)},SetOrder:function(e){m(e)}}},e.children)};var Pe=function(e){var a=Object(n.useContext)(Le),t=a.updateCustomText,o=a.updateHoverText,l=a.toggleBreakBtns;function c(){l(0,!1)}return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(v.a,{sm:1},r.a.createElement("div",{className:"slot-id"},e.id)),r.a.createElement(v.a,null,r.a.createElement(Oe.a.Control,{id:"txtCustomText",type:"text",value:e.customText,onFocus:c,onChange:function(a){var n=a.target.value;t(e.id,n)}})),r.a.createElement(v.a,null,r.a.createElement(Oe.a.Control,{id:"txtHoverText",type:"text",value:e.hoverText,onFocus:c,onChange:function(a){var t=a.target.value;o(e.id,t)}}))))},Qe=t(207);var Fe=function(e){var a=Object(n.useContext)(Le),t=a.toggleBreakBtns,o=a.updateBreakText,l=a.updateBreakColor,s=Object(n.useState)({open:!1,color:"ff0000",property:""}),i=Object(c.a)(s,2),u=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(v.a,{sm:1},r.a.createElement("div",{className:"break-id"},e.id)),r.a.createElement(v.a,{className:"break-padding"},r.a.createElement(Oe.a.Control,{style:{backgroundColor:e.bgColor,color:e.textColor},id:"txtbreakText",value:e.breakText,onFocus:function(){t(e.id,!0)},onChange:function(e){var a=e.target.value;o(a)}})),r.a.createElement(v.a,null,r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},"Colour"),r.a.createElement(T.a.Menu,null,r.a.createElement(T.a.Item,{onClick:function(){t(e.id,!0),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0,property:"textColor"})}))}},"Text Colour"),r.a.createElement(T.a.Item,{onClick:function(){t(e.id,!0),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0,property:"bgColor"})}))}},"BackgroundColour"))))),r.a.createElement(se.a,{show:u.open,dialogClassName:"color-modal-90w",onHide:function(){m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,"Pick Colour")),r.a.createElement(se.a.Body,null,r.a.createElement(Qe.CompactPicker,{color:u.color,onChangeComplete:function(e){!function(e){m((function(a){return Object(le.a)(Object(le.a)({},a),{},{color:e})}))}(e.hex)}})),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){l(u.property,u.color),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},"OK"))))};var Ge=function(e){var a=e.orgID,t=Object(n.useContext)(Le),o=t.sessions,l=t.order,s=t.breakBtns,u=t.addSession,m=t.minusSession,d=t.resetSessions,E=t.addBreak,b=t.orderMoveUp,g=t.orderMoveDown,f=t.removeBreak,h=t.SetSessions,p=t.SetOrder,y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],j=Object(n.useState)({open:!1,layoutText:"layout",yourLayoutText:"Layouts",yourLayouts:[],currentLayout:{},sessions:1,breaks:0,days:[!1,!1,!1,!1,!1,!1,!1],showPreview:!1,startTime:"Start Time",finishTime:"Finish Time",timeIntervalLbl:"Interval",timeInterval:0,times:[],showTimetableSave:!1,showDiarySave:!1}),k=Object(c.a)(j,2),w=k[0],D=k[1],C=Object(n.useState)({open:!1,heading:"",message:""}),S=Object(c.a)(C,2),N=S[0],U=S[1],B=Object(n.useState)({open:!1,heading:"",newName:""}),x=Object(c.a)(B,2),R=x[0],Y=x[1];function _(){U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function L(e){var a=e.target.innerText,t=[!1,!1,!1,!1,!1,!1,!1];w.currentLayout.layout==a?M(w.currentLayout):"Timetable"==a&&(D((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:1})})),u(1));for(var n=!1,r=0,o=t;r<o.length;r++){1==o[r]&&(n=!0)}D((function(e){return Object(le.a)(Object(le.a)({},e),{},{layoutText:a,days:t,showDiarySave:!1,showTimetableSave:!1,showPreview:n})}))}function M(e){if("Timetable"==e.layout){if(""!=e.days){var t=e.days.split(",");t.forEach((function(e,a){t[a]="true"==e}));var n={orgID:a,layoutUUID:e.uuid};i.a.post("/organisation/getTimetableSessions",n).then((function(e){var a,t=e.data.sessions,n={},r=Object(oe.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;n[o.id]=o}}catch(l){r.e(l)}finally{r.f()}h(n)})).catch((function(e){console.log(e)}));var r=e.sessionOrder.split(",");p(r),D((function(a){return Object(le.a)(Object(le.a)({},a),{},{open:!0,sessions:e.sessions,breaks:e.breakTotal,days:t,showTimetableSave:!0,showPreview:!0})}))}}else if("Diary"==e.layout){var o=e.days.split(",");o.forEach((function(e,a){o[a]="true"==e})),""!=e.days&&(D((function(a){return Object(le.a)(Object(le.a)({},a),{},{startTime:e.startTime,finishTime:e.finishTime,timeInterval:e.timeInterval,days:o,showDiarySave:!0,showPreview:!0})})),function(e){var a="";30==e&&(a="30 Minutes");60==e&&(a="1 hour");90==e&&(a="1 hour, 30 minutes");120==e&&(a="2 hours");D((function(e){return Object(le.a)(Object(le.a)({},e),{},{timeIntervalLbl:a})}))}(e.timeInterval),G(e.startTime,e.finishTime,e.timeInterval))}}function P(e){var a=e.target.innerText;D((function(e){return Object(le.a)(Object(le.a)({},e),{},{startTime:a})})),G(a,w.finishTime,w.timeInterval)}function Q(e){var a=e.target.innerText;D((function(e){return Object(le.a)(Object(le.a)({},e),{},{finishTime:a})})),G(w.startTime,a,w.timeInterval)}function F(e){var a=e.target,t=a.innerText,n=a.name;D((function(e){return Object(le.a)(Object(le.a)({},e),{},{timeIntervalLbl:t,timeInterval:parseInt(n)})})),G(w.startTime,w.finishTime,parseInt(n))}function G(e,a,t){var n=[];if("Start Time"!==e&&"Finish Time"!==a&&0!==t){for(var r=ue()(e,"HH:mm"),o=ue()(a,"HH:mm");r.isBefore(o);)n.push(r.format("HH:mm")),r.add(t,"m");D((function(e){return Object(le.a)(Object(le.a)({},e),{},{times:n})}));var l=!1;for(var c in w.days)1==w.days[c]&&(l=!0);D((function(e){return Object(le.a)(Object(le.a)({},e),{},{showDiarySave:l})}))}}function H(e){var a=e.target,t=a.name,n=a.checked,r=w.days;r[t]=n;var o=!1;for(var l in r)1==r[l]&&(o=!0);D((function(e){return Object(le.a)(Object(le.a)({},e),{},{days:r,showPreview:o,showTimetableSave:o})})),"Diary"==w.layoutText&&"Start Time"!==w.startTime&&"Finish Time"!==w.finishTime&&0!==w.timeInterval&&D((function(e){return Object(le.a)(Object(le.a)({},e),{},{days:r,showPreview:o,showDiarySave:o})}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(Te.a,{className:"plus-image",src:w.open?Ne.a:Ce.a,onClick:function(){if(w.open)D((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})),d();else{var e={orgID:a};i.a.post("/organisation/getLayouts",e).then((function(e){D((function(a){return Object(le.a)(Object(le.a)({},a),{},{open:!0,yourLayouts:e.data.layouts})}))})).catch((function(e){console.log(e)}))}}})," Layouts"),r.a.createElement("br",null),r.a.createElement(De.a,{in:w.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement("div",{className:"centred"},"Your Layouts:"),r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary"},w.yourLayoutText),r.a.createElement(T.a.Menu,null,w.yourLayouts.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:function(){!function(e){var a;d(),D((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:0,breaks:0})}));var t,n=Object(oe.a)(w.yourLayouts.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),o=(r[0],r[1]);if(o.uuid==e){a=o;break}}}catch(s){n.e(s)}finally{n.f()}var l="layout";""!=a.layout&&(l=a.layout),D((function(e){return Object(le.a)(Object(le.a)({},e),{},{yourLayoutText:a.name,layoutText:l,currentLayout:a})})),M(a)}(e.uuid)}},e.name)})))),r.a.createElement(I.a,{variant:"primary",onClick:function(){Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0})}))}},"Add")),r.a.createElement(O.a,null,"Layouts"!=w.yourLayoutText?r.a.createElement("div",null,r.a.createElement("div",{className:"centred"},"Layouts:"),r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},w.layoutText),r.a.createElement(T.a.Menu,null,r.a.createElement(T.a.Item,{onClick:L},"Timetable"),r.a.createElement(T.a.Item,{onClick:L},"Diary")))):null),r.a.createElement(O.a,null,r.a.createElement("div",{className:"layout-settings"},"Timetable"==w.layoutText||"Diary"==w.layoutText?r.a.createElement("div",null,r.a.createElement(Oe.a,null,r.a.createElement(Oe.a.Group,null,r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"0",onChange:H,type:"checkbox",checked:w.days[0],label:"Sun"}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"1",onChange:H,type:"checkbox",checked:w.days[1],label:"Mon"}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"2",onChange:H,type:"checkbox",checked:w.days[2],label:"Tue"}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"3",onChange:H,type:"checkbox",checked:w.days[3],label:"Wed"}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"4",onChange:H,type:"checkbox",checked:w.days[4],label:"Thu"}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"5",onChange:H,type:"checkbox",checked:w.days[5],label:"Fri"}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",name:"6",onChange:H,type:"checkbox",checked:w.days[6],label:"Sat"})))):null)),r.a.createElement(O.a,null,r.a.createElement("div",{className:"layout-settings"},"Timetable"==w.layoutText?r.a.createElement("div",null,r.a.createElement("div",{className:"centred"},"Sessions: ",w.sessions),r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(I.a,{variant:"primary",onClick:function(){D((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:w.sessions+1})})),u(w.sessions+1)}},"+"),r.a.createElement(I.a,{variant:"primary",onClick:function(){w.sessions>1&&(D((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:w.sessions-1})})),m(w.sessions))}},"-"))):null)),"Timetable"==w.layoutText?r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement("div",{className:"layout-settings"},r.a.createElement(I.a,{variant:"primary",onClick:function(){D((function(e){return Object(le.a)(Object(le.a)({},e),{},{breaks:w.breaks+1})})),E(w.breaks+1)}},"Add Break"),s.view?r.a.createElement(I.a,{variant:"primary",onClick:function(){D((function(e){return Object(le.a)(Object(le.a)({},e),{},{breaks:w.breaks-1})})),f()}},"Remove"):null)),r.a.createElement(O.a,null,r.a.createElement("div",{className:s.view?"layout-settings-move-btn-show":"layout-settings-move-btn-hide"},r.a.createElement(I.a,{variant:"primary",onClick:function(){b()}},"Move Up"),r.a.createElement(I.a,{variant:"primary",onClick:function(){g()}},"Move Down")))):null,"Diary"==w.layoutText?r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Start Time:")),r.a.createElement(v.a,null,r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},w.startTime),r.a.createElement(T.a.Menu,{className:"dropdown-items"},A.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:P},e)})))))),r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Finish Time:")),r.a.createElement(v.a,null,r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},w.finishTime),r.a.createElement(T.a.Menu,{className:"dropdown-items"},A.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:Q},e)})))))),r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Interval:")),r.a.createElement(v.a,null,r.a.createElement(T.a,{className:"side-by-side"},r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-layouts"},w.timeIntervalLbl),r.a.createElement(T.a.Menu,{className:"dropdown-items"},r.a.createElement(T.a.Item,{name:"30",onClick:F},"30 minutes"),r.a.createElement(T.a.Item,{name:"60",onClick:F},"1 hour"),r.a.createElement(T.a.Item,{name:"90",onClick:F},"1 hour, 30 minutes"),r.a.createElement(T.a.Item,{name:"120",onClick:F},"2 hours"))))),r.a.createElement(O.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,null,w.showDiarySave?r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:w.currentLayout.uuid,layout:w.layoutText,days:w.days.toString(),startTime:w.startTime,finishTime:w.finishTime,timeInterval:w.timeInterval};i.a.post("/organisation/saveLayout",e).then((function(e){"Success"==e.data.message&&(D((function(a){return Object(le.a)(Object(le.a)({},a),{},{yourLayouts:e.data.layouts})})),U((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Layout: "+w.yourLayoutText,message:"Layout has been saved!",open:!0})})))})).catch((function(e){console.log(e)}))}},"Save"):null))):null),r.a.createElement(v.a,null,"Timetable"==w.layoutText?r.a.createElement("div",null,"Sessions:",r.a.createElement(O.a,null,r.a.createElement(v.a,{sm:1}),r.a.createElement(v.a,{className:"slot-headings"},"Custom Text"),r.a.createElement(v.a,{className:"slot-headings"},"Hover Text")),r.a.createElement("div",{className:"scrollable-250"},Object.keys(o).length>0?r.a.createElement("div",null,l.map((function(e){return e.toString().includes("b")?r.a.createElement(Fe,{key:e,id:o[e].id,breakText:o[e].breakText,bgColor:o[e].bgColor,textColor:o[e].textColor}):r.a.createElement(Pe,{key:e,id:o[e].id,customText:o[e].customText,hoverText:o[e].hoverText})}))):null),r.a.createElement("div",{className:"add-button"},w.showTimetableSave?r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:w.currentLayout.uuid,layout:w.layoutText,sessionTotal:w.sessions,breakTotal:w.breaks,sessionOrder:l,days:w.days.toString(),sessions:o};i.a.post("/organisation/saveLayout",e).then((function(e){"Success"==e.data.message&&(D((function(a){return Object(le.a)(Object(le.a)({},a),{},{yourLayouts:e.data.layouts})})),U((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Layout: "+w.yourLayoutText,message:"Layout has been saved!",open:!0})})))})).catch((function(e){console.log(e)}))}},"Save"):null)):null))),r.a.createElement(v.a,null,"Timetable"==w.layoutText||"Diary"==w.layoutText?r.a.createElement("div",null,"Preview:"):null,r.a.createElement("div",{className:"scrollable-300"},w.showPreview?r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Session"),w.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a,"data-tip":"day"},y[a])})))),"Timetable"==w.layoutText&&Object.keys(o).length>0?r.a.createElement("tbody",null,l.map((function(e,a){return e.toString().includes("b")?r.a.createElement("tr",{key:a,style:{backgroundColor:o[e].bgColor}},r.a.createElement("td",{style:{color:o[e].textColor}},""!=o[e].breakText?o[e].breakText:o[e].id),w.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})}))):r.a.createElement("tr",{key:a},r.a.createElement("td",{"data-tip":""!=o[e].hoverText?o[e].hoverText:null},""!=o[e].customText?o[e].customText:o[e].id),w.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})})))})),void ce.a.rebuild()):null,"Diary"==w.layoutText?r.a.createElement("tbody",null,w.times.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e),w.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})})))}))):null):null)))))))))),r.a.createElement(ce.a,null),r.a.createElement(se.a,{show:N.open,onHide:_},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,N.heading)),r.a.createElement(se.a.Body,null,N.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:_},"Close"))),r.a.createElement(se.a,{show:R.open,onHide:function(){Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,"Add Layout")),r.a.createElement(se.a.Body,null,r.a.createElement(Oe.a.Control,{value:R.newName,onChange:function(e){var a=e.target.value;Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{newName:a})}))}})),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,name:R.newName};i.a.post("/organisation/addLayout",e).then((function(e){"Successfully Added"==e.data.message&&(D((function(a){return Object(le.a)(Object(le.a)({},a),{},{yourLayouts:e.data.layouts})})),Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{newName:"",open:!1})})))})).catch((function(e){console.log(e)}))}},"Add"))))},He=t(213),We=t(88),qe=t.n(We);var Ke=function(e){var a=e.orgID,t=Object(u.b)(),o=Object(k.f)(),l=Object(n.useState)({open:!1,startDate:ue()(),endDate:ue()(),startDateValue:"",endDateValue:"",weeks:[],holidayTitles:[],addNew:!1,newHoliday:"",editWeek:!1,editWeekIndex:0,editTitle:!1,titleUUID:"",showWeeks:!1,downloadedHolidays:[],weekSystem:!1,weeksNum:[],orgLocked:!1,collides:!1}),s=Object(c.a)(l,2),m=s[0],d=s[1],E=Object(n.useState)({open:!1,heading:"",message:""}),b=Object(c.a)(E,2),g=b[0],f=b[1],h=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),p=Object(c.a)(h,2),y=p[0],A=p[1],j=Object(n.useState)({open:!1,heading:"",message1:"",message2:"",message3:"",boldMessage:""}),w=Object(c.a)(j,2),D=w[0],T=w[1],C=Object(n.useState)({open:!1,heading:"",message1:"",message2:"",message3:"",boldMessage:""}),S=Object(c.a)(C,2),N=S[0],U=S[1],B=Object(n.useState)({open:!1,heading:"",message:"",renameText:""}),x=Object(c.a)(B,2),R=x[0],Y=x[1],_=Object(n.useState)({holidayTitlesBorder:!1,weeksBorder:!1,datesText:"",dates:!1,holidayTitlesText:"",holidayTitles:!1,weeksText:"",weeks:!1,weekNums:!1,weekNumsText:""}),L=Object(c.a)(_,2),M=L[0],P=L[1];function Q(){f((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function F(){T((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function G(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function q(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})),U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));var e={orgID:a};i.a.post("/organisation/restore",e).then((function(e){var a=e.data;"System Restored"==a.message&&(t(W("true"==a.locked)),t(H(a.holidays)),A({heading:"System Restored",message:"Your system has been restored!",showAccept:!0,acceptName:"Ok",acceptFunction:K,showCancel:!1,open:!0}))})).catch((function(e){console.log(e)}))}function K(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})),o.push("/org/"+a)}function V(e,a){if(""!=e&&""!=a){for(var t=ue()(e,"DD/MM/YYYY").startOf("week"),n=ue()(a,"DD/MM/YYYY").startOf("week"),r=[];t.isBefore(n);){var o={week:J(t.week())+"-"+t.format("YY"),date:t.format("DD/MM/YYYY"),holiday:0};r.push(o),t.add(1,"w")}return d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:r,showWeeks:!0})})),r}}function J(e){return 1==e.toString().length?"0"+e:e}function z(e,a){if(m.editWeek){var t=m.weeks;t[m.editWeekIndex].holiday="h"+J(a),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:t,editWeek:!1})}))}else d("Normal"!=e?function(e){return Object(le.a)(Object(le.a)({},e),{},{editTitle:!0,editWeek:!1,titleUUID:a})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{editTitle:!1,editWeek:!1})})}return Object(n.useEffect)((function(){!function(){var e,a,t,n,r=!1,o=!1,l=!1,c=!1;m.showWeeks?m.editWeek||m.editTitle||!m.showWeeks?m.editWeek?(a="Click on a title to assign it to the week",o=!0,m.weekSystem&&(n="Or Click on a week to assign it to",c=!0)):m.editTitle&&(a="Use the 'Rename' or 'Delete' buttons to the left",o=!0,t="Click on a week on the right to assign a holiday to it",l=!0):(a="Click on a holiday title to edit it.",o=!0,t="Click on a week on the right to assign a holiday to it",l=!0):(e="Set the 'Start Date' and 'End Date' to bring up the weeks under Year Preview",r=!0,a=m.holidayTitles.length>0?"Click on a holiday title to edit it.":"Add a holiday title",o=!0);P({holidayTitlesBorder:!1,weeksBorder:!1,datesText:e,dates:r,holidayTitlesText:a,holidayTitles:o,weeksText:t,weeks:l,weekNumsText:n,weekNums:c})}()}),[m.showWeeks,m.editWeek,m.editTitle,m.holidayTitles]),r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(Te.a,{className:"plus-image",src:m.open?Ne.a:Ce.a,onClick:function(){if(m.open)d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));else{var e={orgID:a};i.a.post("/organisation/getHolidayData",e).then((function(e){var a=e.data;console.log(a);var t=ue()(),n=ue()(),r="",o="";""==a.org.holidayStartDate?r="":(t=ue()(a.org.holidayStartDate,"DD/MM/YYYY"),r=t.format("DD/MM/YYYY")),""==a.org.holidayEndDate?o="":(n=ue()(a.org.holidayEndDate,"DD/MM/YYYY"),o=n.format("DD/MM/YYYY")),console.log(t),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0,holidayTitles:a.titles,startDate:t,startDateValue:r,endDate:n,endDateValue:o,weekSystem:"true"==a.org.weekSystem,orgLocked:"true"==a.locked,collides:a.collideBookings})})),function(e,a){if(a.length>0){var t,n=Object(oe.a)(a);try{for(n.s();!(t=n.n()).done;){var r,o=t.value,l=Object(oe.a)(e);try{for(l.s();!(r=l.n()).done;){var c=r.value;o.weeks.includes(c.week)&&(c.holiday=o.titleUUID)}}catch(s){l.e(s)}finally{l.f()}}}catch(s){n.e(s)}finally{n.f()}d((function(a){return Object(le.a)(Object(le.a)({},a),{},{weeks:e})}))}}(V(r,o),a.holidays),function(e){for(var a=[],t=1;t<=e;t++)a.push(t);d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeksNum:a})}))}(a.org.weeks)})).catch((function(e){console.log(e)}))}}})," Week System / Holidays"),r.a.createElement("br",null),r.a.createElement(De.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text"},M.dates?r.a.createElement("div",null,M.datesText):null,M.dates&&M.holidayTitles?"---":null,M.holidayTitles?r.a.createElement("div",{className:"help-holidayTitles"},M.holidayTitlesText):null,M.holidayTitles&&M.weeks||M.holidayTitles&&M.weekNums?"---":null,M.weeks?r.a.createElement("div",{className:"help-weeks"},M.weeksText):null,M.weekNums?r.a.createElement("div",{className:"help-weekNums"},M.weekNumsText):null),r.a.createElement("div",{className:"normal-text"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,"Start Date:"),r.a.createElement(v.a,null,r.a.createElement(qe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(m.startDate),value:m.startDateValue,onChange:function(e){d((function(a){return Object(le.a)(Object(le.a)({},a),{},{startDate:e,startDateValue:ue()(e,"DD/MM/YYYY").format("DD/MM/YYYY")})})),V(ue()(e,"DD/MM/YYYY").format("DD/MM/YYYY"),m.endDateValue)}}))),r.a.createElement(O.a,{className:"holidays-datePadding"},r.a.createElement(v.a,null,"End Date:"),r.a.createElement(v.a,null,r.a.createElement(qe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(m.endDate),value:m.endDateValue,onChange:function(e){d((function(a){return Object(le.a)(Object(le.a)({},a),{},{endDate:e,endDateValue:ue()(e,"DD/MM/YYYY").format("DD/MM/YYYY")})})),V(m.startDateValue,ue()(e,"DD/MM/YYYY").format("DD/MM/YYYY"))}}))),r.a.createElement(O.a,{className:"holidays-datePadding"},m.editWeek?null:r.a.createElement("div",null,m.addNew?r.a.createElement("div",{className:"holidays-addNew"},r.a.createElement(Oe.a.Group,null,r.a.createElement(Oe.a.Label,null,"New Holiday:"),r.a.createElement(Oe.a.Control,{name:"newHoliday",value:m.newHoliday,onChange:function(e){var a=e.target,t=a.name,n=a.value;d((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},t,n))}))}})),r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,title:m.newHoliday};i.a.post("/organisation/addHolidayTitle",e).then((function(e){var a=e.data;console.log(a),"Successfully added"==a.message&&d((function(e){return Object(le.a)(Object(le.a)({},e),{},{holidayTitles:a.titles,addNew:!1,newHoliday:""})}))})).catch((function(e){console.log(e)}))}},"Add"),r.a.createElement(I.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{addNew:!1})}))}},"Close")):r.a.createElement("div",null,r.a.createElement(I.a,{className:"side-by-side",variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{addNew:!0})}))}},"Add New Holiday Title"),r.a.createElement("div",{className:m.editTitle?null:"weeks-holidays-hide"},r.a.createElement(I.a,{className:"side-by-side",variant:"primary",onClick:function(){var e,a="",t=Object(oe.a)(m.holidayTitles);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.uuid==m.titleUUID){a=n.name;break}}}catch(r){t.e(r)}finally{t.f()}Y({heading:"Rename",open:!0,renameText:a})}},"Rename"),r.a.createElement(I.a,{className:"side-by-side",variant:"primary",onClick:function(){var e={orgID:a,uuid:m.titleUUID};i.a.post("/organisation/deleteHolidayTitle",e).then((function(e){var a=e.data;"Successfully Deleted"==a.message&&(d((function(e){return Object(le.a)(Object(le.a)({},e),{},{holidayTitles:a.titles,editTitle:!1})})),function(e){var a,t=m.weeks,n=Object(oe.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.holiday==e&&(r.holiday=0)}}catch(o){n.e(o)}finally{n.f()}d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:t})}))}(m.titleUUID))})).catch((function(e){console.log(e)}))}},"Delete"))))),r.a.createElement(O.a,null,m.editWeek?null:r.a.createElement("div",null,r.a.createElement("div",{className:"weekSystem-centred"},r.a.createElement(Oe.a.Check,{type:"checkbox",checked:m.weekSystem,onChange:function(e){var t=e.target.checked,n=[];if(t)n=["1"],d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t,weeksNum:n})})),function(){var e,a=m.weeks,t=Object(oe.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;"0"==n.holiday&&(n.holiday="w01")}}catch(r){t.e(r)}finally{t.f()}d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:a})}))}();else{var r={orgID:a};i.a.post("/organisation/geRoomsWeekSystem",r).then((function(e){e.data.rooms?f({heading:"Week System",message:"There are some rooms still using the week system, delete them first",open:!0}):(d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t,weeksNum:n})})),function(){var e,a=m.weeks,t=Object(oe.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.holiday.includes("w")&&(n.holiday="0")}}catch(r){t.e(r)}finally{t.f()}d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:a})}))}())})).catch((function(e){console.log(e)}))}},label:"Use week system"})),m.weekSystem?r.a.createElement("div",{className:"weekSystem-centred"},"Weeks: ",m.weeksNum.length,r.a.createElement("br",null),r.a.createElement(I.a,{variant:"primary",onClick:function(){var e=m.weeksNum;if(e.length>1){var a,t=e.pop(),n=t-1,r=m.weeks,o=Object(oe.a)(r);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.holiday=="w"+J(t)&&(l.holiday="w"+J(n))}}catch(c){o.e(c)}finally{o.f()}d((function(a){return Object(le.a)(Object(le.a)({},a),{},{weeksNum:e,weeks:r})}))}}},"-"),r.a.createElement(I.a,{variant:"primary",onClick:function(){var e=m.weeksNum,a=e.length+1;100==a?f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Weeks",message:"You cannot exceed 99 weeks",open:!0})})):(e.push(a),d((function(a){return Object(le.a)(Object(le.a)({},a),{},{weeksNum:e})})))}},"+")):null))),r.a.createElement(v.a,null,r.a.createElement(O.a,null,"Holiday Titles:",r.a.createElement("div",{className:M.holidayTitles?"help-holidaytiles-bordered scrollable-150 holidays-titles":"scrollable-200 holidays-titles"},r.a.createElement(Be.a,null,m.weekSystem?null:r.a.createElement(He.a,{action:!0,onClick:function(){return z("Normal",0)}},"Normal"),m.holidayTitles.map((function(e,a){return r.a.createElement(He.a,{key:a,action:!0,onClick:function(){return z(e.name,e.uuid)}},e.name)}))))),r.a.createElement(O.a,{className:"weeks-row-padding"},r.a.createElement("div",{className:m.weekSystem?"weekSystem-weeks scrollable-150":"weeks-holidays-hide"},"Weeks:",r.a.createElement("div",{className:M.weekNums?"help-weekNums-bordered":null},r.a.createElement(Be.a,null,m.weeksNum.map((function(e,a){return r.a.createElement(He.a,{key:a,action:!0,onClick:function(){!function(e){if(m.editWeek){var a=m.weeks;a[m.editWeekIndex].holiday="w"+J(e),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:a,editWeek:!1})}))}}(e)}},"Week",e)}))))))))),r.a.createElement(v.a,null,"Year Preview:",r.a.createElement("div",{className:M.weeks?"help-weeks-bordered scrollable-300":"scrollable-300"},r.a.createElement(Be.a,null,m.weeks.map((function(e,a){return r.a.createElement(He.a,{key:a,action:!0,onClick:function(){return e=a,void d((function(a){return Object(le.a)(Object(le.a)({},a),{},{editWeekIndex:e,editWeek:!0,editTitle:!1})}));var e}},e.date," - ",function(e){if(0==e)return"Normal";var a="";if(e.includes("h")){var t=e.replace("h","");a="0"==t[0]?t[1]:t;var n,r=Object(oe.a)(m.holidayTitles);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.uuid==a)return o.name}}catch(c){r.e(c)}finally{r.f()}}if(e.includes("w")){var l=e.replace("w","");return"0"==l[0]?"Week "+l[1]:"Week "+l}}(e.holiday))})))),r.a.createElement("div",{className:m.showWeeks?"save-button-show":"save-button-hidden"},m.orgLocked?r.a.createElement("div",null,m.collides?r.a.createElement(I.a,{onClick:function(){o.push("/org/"+a+"/collisionBookings")}},"Collided Bookings"):null,r.a.createElement(I.a,{onClick:function(){U({heading:"Unlock Organisation",message1:"To unlock this organisation make sure that you have cleared all of the collided bookings, the system WILL NOT let you unlock until this is done. Backups only stay active for one cycle of locking organisation. Once unlocked, they are deleted and this is unreservable!!",message2:"If you want to restore everything to the orginial state, before you edit the week system, click 'RESTORE'",open:!0})}},"Unlock")):r.a.createElement(I.a,{onClick:function(){console.log(m.weeks);var e,n={},r=Object(oe.a)(m.weeks);try{for(r.s();!(e=r.n()).done;){var o=e.value;if("0"!=o.holiday){var l=n[o.holiday];""==l||null==l?l=o.week:l+=","+o.week,n[o.holiday]=l}}}catch(u){r.e(u)}finally{r.f()}var c=Object.keys(n);console.log(c),console.log(n);var s={orgID:a,startDate:m.startDateValue,endDate:m.endDateValue,holidays:c,holidayWeeks:n,weekSystem:m.weekSystem.toString(),weeksNo:m.weeksNum.length};i.a.post("/organisation/saveHolidays",s).then((function(e){var a=e.data;if(t(H(a.holidays)),a.locked){t(W("true")),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{orgLocked:a.locked,collides:a.collidedBookings})}));var n="",r="";a.collidedBookings&&(n="\n\nSome of your bookings have been collided with single bookings, as single bookings are not affected with changing the week system. Please go to 'COLLIDED BOOKINGS' to see them",r="You will NOT be able to unlock your organisation until you have cleared all the collided bookings"),T({heading:"Week System",message1:"Some or all of your rooms have the week system enabled on them. Due to this your organisation will be locked until you double check all the bookings are where they should be.\n\n\n\n",message2:"To unlock the organisation, go on 'UNLOCK' and follow the instructions to unlock. Here you will also be able to restore the system back to how it was, by going on 'RESTORE'",message3:n,boldMessage:r,open:!0})}})).catch((function(e){console.log(e)}))}},"Save"))))))))))),r.a.createElement(se.a,{show:g.open,onHide:Q},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,g.heading)),r.a.createElement(se.a.Body,null,g.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:Q},"Close"))),r.a.createElement(se.a,{show:y.open,onHide:G},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,y.heading)),r.a.createElement(se.a.Body,null,y.message),r.a.createElement(se.a.Footer,null,y.showAccept?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:y.acceptFunction},y.acceptName)):null,y.showCancel?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:G},y.cancelName)):null)),r.a.createElement(se.a,{size:"lg",show:D.open,onHide:F},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,D.heading)),r.a.createElement(se.a.Body,null,""!=D.message1?D.message1:null,""!=D.message2?r.a.createElement("div",null,r.a.createElement("br",null),D.message2):null,""!=D.message3?r.a.createElement("div",null,r.a.createElement("br",null),D.message3):null,""!=D.boldMessage?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("strong",null,D.boldMessage)):null),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:F},"Close"))),r.a.createElement(se.a,{show:R.open,onHide:function(){Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,R.heading)),r.a.createElement(se.a.Body,null,r.a.createElement(Oe.a.Control,{name:"renameText",value:R.renameText,onChange:function(e){var a=e.target,t=a.name,n=a.value;Y((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},t,n))}))}})),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:m.titleUUID,title:R.renameText};i.a.post("/organisation/renameHolidayTile",e).then((function(e){var a=e.data;"Successfully Updated"==a.message&&d((function(e){return Object(le.a)(Object(le.a)({},e),{},{holidayTitles:a.titles,editTitle:!1})}))})).catch((function(e){console.log(e)})),Y({renameText:"",open:!1})}},"Rename"))),r.a.createElement(se.a,{size:"lg",show:N.open,onHide:function(){U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,N.heading)),r.a.createElement(se.a.Body,null,""!=N.message1?N.message1:null,""!=N.message2?r.a.createElement("div",null,r.a.createElement("br",null),N.message2):null,""!=N.message3?r.a.createElement("div",null,r.a.createElement("br",null),N.message3):null,""!=N.boldMessage?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("strong",null,N.boldMessage)):null),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){A({heading:"Are you sure?",message:"Are you sure you want to Restore?",acceptName:"Yes",showAccept:!0,acceptFunction:q,cancelName:"No",showCancel:!0,open:!0})}},"Restore"),r.a.createElement(I.a,{variant:"primary",onClick:function(){U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));var e={orgID:a};i.a.post("/organisation/unlock",e).then((function(e){var a=e.data;"Yes"==a.error?(U({open:!1}),f({heading:"Error Unlocking",message:a.message,open:!0})):"System Unlocked"==a.message&&(t(W("true"==a.locked)),A({heading:"System Unlocked",message:"Your system has been unlocked!",showAccept:!0,acceptName:"Ok",acceptFunction:K,showCancel:!1,open:!0}))})).catch((function(e){console.log(e)}))}},"Unlock"))))};var Ve=function(e){var a=e.match.params.id;return Object(k.f)(),Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{fluid:!0,className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement(Ue,{orgID:a}),r.a.createElement("br",null),r.a.createElement(xe,{orgID:a}),r.a.createElement("br",null),r.a.createElement(Ye,{orgID:a})," ",r.a.createElement("br",null),r.a.createElement(_e,{orgID:a})," ",r.a.createElement("br",null),r.a.createElement(Me,null,r.a.createElement(Ge,{orgID:a})," ",r.a.createElement("br",null)),r.a.createElement(Ke,{orgID:a}))))};var Je=function(e){var a=e.match.params.id,t=(Object(u.c)((function(e){return e.user})),Object(u.c)((function(e){return e.organisation}))),o=Object(u.c)((function(e){return e.globalVars})),l=Object(k.f)(),s=Object(u.b)(),y=Object(n.useState)(""),O=Object(c.a)(y,2),v=O[0],w=O[1];return Object(n.useEffect)((function(){document.title="STAFF - Sign In",j()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,t.name)," ",r.a.createElement("br",null),r.a.createElement("h3",null,"Please Sign In!"),r.a.createElement("p",null,t.message),t.signInLocal?r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",{id:"lblEmail"},"Email:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtEmail",type:"email"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblPassword"},"Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtPassword",type:"password"}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,v)),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtEmail").value,t=document.getElementById("txtPassword").value;i.a.get("/login?email="+a+"&password="+t).then((function(e){console.log(e.data),"Logged in successful"===e.data.message?(s(m(!0)),s(d(e.data.uuid)),s(E(e.data.displayName)),s(b(e.data.role)),s(g(e.data.new)),s(f(e.data.requestedPassword)),s(h(e.data.orgID)),s(p(e.data.SARequest)),o.forceSignIn?(s(re(!0)),s(ne(!1))):(s(re(!0)),s(ne(!0)))):w(e.data.info)})).catch((function(e){console.log(e)}))}},"Log in"),r.a.createElement(I.a,{variant:"warning",onClick:function(){return l.push("/org/"+a+"/forgotPassword")}},"Forgot Password"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null),t.signInGoogle?r.a.createElement(I.a,{variant:"danger",href:A+"/auth/google"},r.a.createElement("i",{className:"fab fa-google"})," Log in with Google"):r.a.createElement("div",null))))};var ze=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.user})),o=Object(u.c)((function(e){return e.globalVars})),l=Object(u.b)(),s=Object(k.f)(),m=Object(n.useState)(!1),d=Object(c.a)(m,2),E=d[0],b=d[1];return Object(n.useEffect)((function(){document.title="STAFF",function(){var e="/organisation/"+a;i.a.get(e).then((function(e){"Yes"!=e.data.userError?(l({type:"ORG_UPDATE_NAME",value:e.data.organisation.name}),l(Y("true"==e.data.organisation.auth_Local)),l(_("true"==e.data.organisation.auth_Google)),l(L(e.data.organisation.message)),l(M("true"==e.data.organisation.useDepartments)),l(P(e.data.organisation.noOfDepartments)),l(function(e){return{type:"ORG_UPDATE_ALLOCATEDROOMS",value:e}}(e.data.organisation.allocatedRooms)),l(F(e.data.organisation.redeemedRooms)),l(G(e.data.rooms)),l(function(e){return{type:"ORG_UPDATE_LAYOUTS",value:e}}(e.data.layouts)),l(H(e.data.holidays)),l(W("true"==e.data.organisation.locked)),0==t.auth?s.push("/org/"+a+"/signIn"):t.orgID!=a?s.push("/org/"+t.orgID+"/wrongOrganisation"):"true"==t.requestedPassword?s.push("/org/"+a+"/changePassword"):"true"==t.new?s.push("/org/"+a+"/createPassword"):"true"==t.SARequest?s.push("/org/"+a+"/changeOfSeniorRequest"):o.fromSignIn&&s.push("/org/"+a),b(!0)):s.push("/")})).catch((function(e){console.log(e)}));var n={orgID:a};i.a.post("/organisation/allDepartments",n).then((function(e){l(Q(e.data.departments))})).catch((function(e){console.log(e)}))}()}),[o.forceSignIn]),r.a.createElement("div",null,E?r.a.createElement("div",null,r.a.createElement(k.a,{path:"/org/:id",exact:!0,component:Ee}),r.a.createElement(k.a,{path:"/org/:id/collisionBookings",component:pe}),r.a.createElement(k.a,{path:"/org/:id/organisationAdmin",component:Ve}),r.a.createElement(k.a,{path:"/org/:id/signIn",component:Je}),r.a.createElement(k.a,{path:"/org/:id/forgotPassword",component:ve}),r.a.createElement(k.a,{path:"/org/:id/changePassword",component:Ae}),r.a.createElement(k.a,{path:"/org/:id/changeOfSeniorRequest",component:ye}),r.a.createElement(k.a,{path:"/org/:id/createPassword",component:je}),r.a.createElement(k.a,{path:"/org/:id/wrongOrganisation",component:ke})):null)};t(470);var Xe=function(e){var a=e.match.params.id,t=Object(k.f)(),o=Object(u.c)((function(e){return e.user})),l=Object(u.c)((function(e){return e.organisation})),s=Object(u.c)((function(e){return e.globalVars})),m=Object(n.useState)({userList:[],departmentList:[],user:"Users",userID:"",department:"Departments",departmentID:"",sessionLength:"Length",sessionLengthTitle:"",showSessionLength:!0,sessions:[],repeat:!1,daily:!1,weekly:!1,endOfYear:!1,untilDate:ue()(),showUserDropdown:!0,sessDes:"",sessDesTitle:"",comments:"",times:[]}),d=Object(c.a)(m,2),E=d[0],b=d[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),h=f[0],p=f[1];function y(){p((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function A(e){var a=e.target.innerText;b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessionLength:a})}))}function j(e){var a=e.target,t=a.name,n=a.value;b((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(be.a)({},t,n))}))}function w(){var e="",n="",r="",c=[],u=s.sessionID.split("-");if("Timetable"==s.layoutData.layout)if(u[1].toString().includes("b"))c.push(u[1]);else for(var m=parseInt(u[1]),d=0;d<E.sessionLength;d++)c.push(m),m++;else if("Diary"==s.layoutData.layout)for(var b=ue()(s.sessionLabel,"HH:mm"),g=ue()(E.sessionLength,"HH:mm");b.isBefore(g);)c.push(b.format("HH:mm").replace(":","")),b.add(s.timeInterval,"m");E.repeat?(e="repeat",E.daily?(n="daily",r=E.untilDate.toLocaleDateString()):(E.weekly||E.endOfYear)&&(n="weekly",r=E.untilDate.toLocaleDateString())):(e="single",r="");var f,h="",y=Object(oe.a)(l.holidays);try{for(y.s();!(f=y.n()).done;){var O=f.value;if(O.titleUUID==s.weekUUID){h=O.weeks;break}}}catch(k){y.e(k)}finally{y.f()}var v,A=ue()(s.date,"DD/MM/YYYY");"repeat"==e?v=ue()(r,"DD/MM/YYYY").format("DD/MM/YYYY"):v="";var j={orgID:a,roomID:s.roomID,user:E.userID,departmentID:E.departmentID,sessionDes:E.sessDes,sessionTotal:c.length,sessions:c.toString(),comments:E.comments,bookingType:e,repeatType:n,startDate:A.format("DD/MM/YYYY"),repeatUntil:v,createdBy:o.uuid,dayList:s.dayList,weekSystem:s.weekSystem,weekSysWeeks:h};i.a.post("/booking/createBooking",j).then((function(e){var n=e.data;"null"==n.error&&"null"==n.userError?t.push("/org/"+a):p((function(){return{heading:"Booking",message:n.message,open:!0}}))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){""==s.date?t.push("/org/"+a):function(){"user"!=o.role?function(){var e={orgID:a,users:!0,departments:!0};i.a.post("/organisation/usersAndDepartments",e).then((function(e){var a=e.data;"none"!=a.userList&&b((function(e){return Object(le.a)(Object(le.a)({},e),{},{userList:a.userList})})),"none"!=a.departmentList&&b((function(e){return Object(le.a)(Object(le.a)({},e),{},{departmentList:a.departmentList})}))})).catch((function(e){console.log(e)}))}():(!function(){var e,a=o.userDepartments.split(","),t=[],n=Object(oe.a)(a);try{for(n.s();!(e=n.n()).done;){var r,c=e.value,s=Object(oe.a)(l.departments);try{for(s.s();!(r=s.n()).done;){var i=r.value;i.uuid==c&&t.push(i)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){n.e(u)}finally{n.f()}b((function(e){return Object(le.a)(Object(le.a)({},e),{},{departmentList:t})}))}(),b((function(e){return Object(le.a)(Object(le.a)({},e),{},{showUserDropdown:!1,user:o.name,userID:o.uuid})})));if("Timetable"==s.layoutData.layout){if(s.sessionID.includes("b"))b((function(e){return Object(le.a)(Object(le.a)({},e),{},{showSessionLength:!1,sessionLength:"1"})}));else{for(var e=s.sessionID.split("-"),t=parseInt(e[1]),n=[],r=1,c=t;c<=s.totalSessions;c++)n.push(r),r++;b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:n})}))}b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessDesTitle:"Class",sessionLengthTitle:"Session Length"})}))}else if("Diary"==s.layoutData.layout){!function(e,a,t){var n=[],r=ue()(e,"HH:mm"),o=ue()(a,"HH:mm");r.add(t,"m");for(;r.isSameOrBefore(o);)n.push(r.format("HH:mm")),r.add(t,"m");b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:n})})),console.log(n)}(ue()(s.sessionLabel,"HH:mm"),s.finishTime,s.timeInterval),b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessDesTitle:"Subject",sessionLengthTitle:"Until"})}))}var u=ue()(s.date,"DD/MM/YYYY");b((function(e){return Object(le.a)(Object(le.a)({},e),{},{untilDate:u})}))}()}),[]),r.a.createElement("div",{className:"body booking-content"},r.a.createElement(N.a,{fluid:!0,className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement(O.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,{xs:8},r.a.createElement(O.a,null,r.a.createElement(v.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Date: ",s.date)),r.a.createElement(v.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Room: ",s.roomName)),r.a.createElement(v.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Session: ",s.sessionLabel))),r.a.createElement("hr",null),r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(Oe.a.Group,null,"User:",E.showUserDropdown?r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-users"},E.user),r.a.createElement(T.a.Menu,{className:"dropdown-items"},E.userList.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:function(){return a=e.displayName,t=e.uuid,void b((function(e){return Object(le.a)(Object(le.a)({},e),{},{user:a,userID:t})}));var a,t}},e.displayName)}))))):r.a.createElement("div",null,E.user)),r.a.createElement(Oe.a.Group,null,"Department:",r.a.createElement(T.a,null,r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-departments"},E.department),r.a.createElement(T.a.Menu,{className:"dropdown-items"},E.departmentList.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:function(){return a=e.name,t=e.uuid,b((function(e){return Object(le.a)(Object(le.a)({},e),{},{department:a,departmentID:t})})),void console.log(s.roomID);var a,t}},e.name)}))))),r.a.createElement(Oe.a.Group,null,E.sessDesTitle,":",r.a.createElement(Oe.a.Control,{type:"text",name:"sessDes",onChange:j})),r.a.createElement(Oe.a.Group,null,"Comments:",r.a.createElement(Oe.a.Control,{as:"textarea",rows:"3",name:"comments",onChange:j}))),r.a.createElement(v.a,null,r.a.createElement(Oe.a.Group,null,E.sessionLengthTitle,":",E.showSessionLength?r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(T.a.Toggle,{variant:"primary",id:"dropdown-sessionLength"},E.sessionLength),r.a.createElement(T.a.Menu,{className:"dropdown-items"},E.sessions.map((function(e,a){return r.a.createElement(T.a.Item,{key:a,onClick:A},e)}))))):" "+E.sessionLength),r.a.createElement(O.a,null,"user"!=o.role?r.a.createElement("div",null,r.a.createElement(Oe.a.Group,null,r.a.createElement(Oe.a.Check,{className:"check-side-by-side-b",type:"checkbox",label:"Repeat",onChange:function(e){var a=e.target.checked;b((function(e){return Object(le.a)(Object(le.a)({},e),{},{repeat:a})}))}}))):null),E.repeat?r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(Oe.a.Group,null,r.a.createElement(Oe.a.Check,{className:"check-side-by-side-b",type:"checkbox",label:"Daily",checked:E.daily,onChange:function(e){var a=e.target.checked;b(a?function(e){return Object(le.a)(Object(le.a)({},e),{},{daily:a,weekly:!a,endOfYear:!a})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{daily:a})})}}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",type:"checkbox",label:"Weekly",checked:E.weekly,onChange:function(e){var a=e.target.checked;b(a?function(e){return Object(le.a)(Object(le.a)({},e),{},{weekly:a,daily:!a,endOfYear:!a})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{weekly:a})})}}),r.a.createElement(Oe.a.Check,{className:"check-side-by-side",type:"checkbox",label:"End of Year (Weekly)",checked:E.endOfYear,onChange:function(e){var a=e.target.checked;a?(b((function(e){return Object(le.a)(Object(le.a)({},e),{},{endOfYear:a,daily:!a,weekly:!a})})),function(){var e=ue()(),a=ue()();if(a.month()>6){var t=ue()("31/07/"+a.year(),"DD/MM/YYYY");t.add(1,"y"),e=ue()(t,"DD/MM/YYYY")}else{var n=ue()("31/07/"+a.year(),"DD/MM/YYYY");e=ue()(n,"DD/MM/YYYY")}b((function(a){return Object(le.a)(Object(le.a)({},a),{},{untilDate:new Date(e)})}))}()):b((function(e){return Object(le.a)(Object(le.a)({},e),{},{endOfYear:a})}))}}))),r.a.createElement(O.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,null,r.a.createElement(Oe.a.Group,null,"Until:",r.a.createElement("br",null),r.a.createElement(qe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(E.untilDate),onChange:function(e){b((function(a){return Object(le.a)(Object(le.a)({},a),{},{untilDate:e})}))}}))))):null,r.a.createElement("div",{className:"add-button"},r.a.createElement(I.a,{variant:"primary",onClick:function(){if(ue()(),"Users"==E.user)p({heading:"Booking",message:"Please select an user",open:!0});else if("Departments"==E.department)p({heading:"Booking",message:"Please select a department",open:!0});else if("Length"==E.sessionLength)p({heading:"Booking",message:"Please select a session length",open:!0});else if(""==E.sessDes)p({heading:"Booking",message:"Please put a class",open:!0});else if(E.repeat)if(E.daily||E.weekly||E.endOfYear){var e=ue()(E.untilDate,"DD/MM/YYYY"),a=ue()(s.date,"DD/MM/YYYY");if(e.isSameOrBefore(a))p({heading:"Booking",message:"Please select a date after the selected booking date",open:!0});else{var t=ue()(s.date,"DD/MM/YYYY");t.add(2,"y"),e.isAfter(t)?p({heading:"Booking",message:"You cannot repeat a booking for more than two years.",open:!0}):w()}}else p({heading:"Booking",message:"Please select a repeat method",open:!0});else w()}},"Book"))))),r.a.createElement(v.a,null)))),r.a.createElement(se.a,{show:h.open,onHide:y},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,h.heading)),r.a.createElement(se.a.Body,null,h.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:y},"Close"))))};var Ze=function(e){var a=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),t=Object(c.a)(a,2),o=t[0],l=t[1];function s(){l((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function u(){b((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}var m=Object(n.useState)({open:!1,heading:"",message:""}),d=Object(c.a)(m,2),E=d[0],b=d[1];function g(e,a,t){var n={email:a};i.a.post("/organisation/getSALoginMethod",n).then((function(n){var r,o=n.data.method;"local"==o?r="google":"google"==o&&(r="local"),l({heading:"Change Login Method",message:e+"'s login method is "+o+". Are you sure you want to change it to a "+r+" method?",acceptName:"Yes",acceptFunction:function(){!function(e,a,t){l({open:!1});var n={email:e,method:a,orgID:t};i.a.post("/organisaation/changeASLoginMethod",n).then((function(e){"Strategy Updated"==e.data.message&&b({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}(a,r,t)},showAccept:!0,cancelName:"No",showCancel:!0,open:!0})})).catch((function(e){console.log(e)}))}return r.a.createElement("div",null,r.a.createElement(ge.a,{body:!0,className:"Organisations-ListBox"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("label",null,e.name)),r.a.createElement(v.a,null,r.a.createElement("label",null,e.email)),r.a.createElement(v.a,null,r.a.createElement("label",null,e.poc)),r.a.createElement(v.a,null,r.a.createElement("label",null,e.orgID)),r.a.createElement(v.a,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Toggle,{variant:"primary"},"More"),r.a.createElement(T.a.Menu,null,r.a.createElement(T.a.Item,{onClick:function(){g(e.poc,e.email,e.orgID)}},"Change Login Method")))))),r.a.createElement(se.a,{show:E.open,onHide:u},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,E.heading)),r.a.createElement(se.a.Body,null,E.message),r.a.createElement(se.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:u},"Close"))),r.a.createElement(se.a,{show:o.open,onHide:s},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,o.heading)),r.a.createElement(se.a.Body,null,o.message),r.a.createElement(se.a.Footer,null,o.showAccept?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:o.acceptFunction},o.acceptName)):null,o.showCancel?r.a.createElement("div",null,r.a.createElement(I.a,{variant:"primary",onClick:s},o.cancelName)):null)))};var $e=function(){var e=Object(k.f)(),a=Object(n.useState)(!1),t=Object(c.a)(a,2),o=t[0],l=t[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){i.a.get("/organisation/all").then((function(e){console.log(e.data),d(e.data),l(!0)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"AH-AddOrganisationBtn"},r.a.createElement(I.a,{variant:"warning",onClick:function(){return e.push("/administrator/organisationRegister")}},"Add Organisation")),r.a.createElement("br",null),o?r.a.createElement("div",null,r.a.createElement(ge.a,{body:!0,className:"Organisations-ListTitles"},r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement("label",null,"Name")),r.a.createElement(v.a,null,r.a.createElement("label",null,"Email")),r.a.createElement(v.a,null,r.a.createElement("label",null,"Point of Contact")),r.a.createElement(v.a,null,r.a.createElement("label",null,"Org ID")),r.a.createElement(v.a,null))),r.a.createElement("br",null),m.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(Ze,{name:e.name,email:e.POC_Email,poc:e.POC_Name,orgID:e.orgID}),r.a.createElement("br",null))}))):r.a.createElement("div",null))};var ea=function(){var e=Object(k.f)(),a=Object(u.c)((function(e){return e.user}));return a.auth&&"superAdmin"==a.role||e.push("/administrator/signIn"),Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{fluid:!0,className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement($e,null))))};var aa=function(){var e=Object(n.useState)(!0),a=Object(c.a)(e,2),t=a[0],o=a[1],l=Object(u.c)((function(e){return e.user})),s=Object(k.f)();return Object(n.useEffect)((function(){j(),l.auth&&("superAdmin"==l.role?s.push("/"):o(!1))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Administrator Sign In"),t?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(I.a,{variant:"dark",href:A+"/auth/github"},r.a.createElement("i",{class:"fab fa-github"}),"  Log in with Github"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("h1",null,"Access Denied"),r.a.createElement(I.a,{variant:"warning",href:"/"},"Back to Home "),r.a.createElement("br",null),r.a.createElement("br",null)))))};var ta=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],o=a[1],l=Object(k.f)();return Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(N.a,{className:"p-3"},r.a.createElement(U.a,{className:"back-color"},r.a.createElement("h1",null,"Organisation Register"),r.a.createElement(Oe.a,{className:"A-AddOrganisationText"},r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblOrgName"},"Organisation Name:"),r.a.createElement("br",null),r.a.createElement(Oe.a.Control,{id:"txtOrgName",type:"text",required:!0})),r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblAlRooms"},"Allocated Rooms:"),r.a.createElement("br",null),r.a.createElement(Oe.a.Control,{id:"txtAlRooms",type:"text",required:!0}))),r.a.createElement(Oe.a.Label,{id:"lblAuthTypes"},"Types of Authencation:"),r.a.createElement("br",null),r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Check,{id:"ckbLocal",type:"checkbox",label:"Local Login"})),r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Check,{id:"ckbGoggle",type:"checkbox",label:"Google Login"}))),r.a.createElement(Oe.a.Label,{className:"A-AddOrganisationTextColor",id:"lblPOC"},"Point of Contact (Senior Admin):"),r.a.createElement("br",null),r.a.createElement(Oe.a.Row,null,r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblName"},"Name:"),r.a.createElement("br",null),r.a.createElement(Oe.a.Control,{id:"txtName",type:"text",required:!0})),r.a.createElement(Oe.a.Group,{as:v.a},r.a.createElement(Oe.a.Label,{id:"lblEmail"},"Email:"),r.a.createElement("br",null),r.a.createElement(Oe.a.Control,{id:"txtEmail",type:"text",required:!0}))),r.a.createElement("p",null,t),r.a.createElement(I.a,{type:"submit",onClick:function(e){e.preventDefault();var a=document.getElementById("txtOrgName").value,t=document.getElementById("txtAlRooms").value,n=document.getElementById("ckbLocal").checked,r=document.getElementById("ckbGoggle").checked,c=document.getElementById("txtName").value,s=document.getElementById("txtEmail").value,u={orgName:a,orgRooms:t,authLocal:n.toString(),authGoogle:r.toString(),pName:c,pEmail:s};i.a.post("/administrator/addOrganisation",u).then((function(e){var a=e.data;"null"!=a.error?console.log(a.message):"Yes"==a.userError?o(a.message):"Successfully added"==a.message&&l.push("/administrator")})).catch((function(e){console.log(e)}))},variant:"warning"},"Register")))))},na=t(23);var ra=function(){var e=Object(u.b)(),a=Object(n.useState)(!1),t=Object(c.a)(a,2),o=t[0],l=t[1];return Object(n.useEffect)((function(){i.a.get("/auth",{withCredentials:!0}).then((function(a){console.log(a.data);var t=a.data.auth;e(m(t)),t&&("superAdmin"==a.data.role?(e(E("High-ViewStudios")),e(b("superAdmin"))):(e(d(a.data.user.uuid)),e(E(a.data.user.displayName)),e(b(a.data.user.role)),e(g(a.data.user.new)),e(f(a.data.user.requestedPassword)),e(h(a.data.user.orgID)),e({type:"USER_UPDATE_USERDEPARTMENTS",value:a.data.user.departments}),e(p(a.data.user.SARequest)))),l(!0)})).catch((function(e){console.log("Authe"+e)}))}),[]),r.a.createElement("div",null,o?r.a.createElement(na.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement(S,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/",exact:!0,component:B})," ",r.a.createElement(k.a,{path:"/org/:id",exact:!0,component:ze}),r.a.createElement(k.a,{path:"/org/:id/collisionBookings",component:ze}),r.a.createElement(k.a,{path:"/org/:id/organisationAdmin",component:ze}),r.a.createElement(k.a,{path:"/org/:id/signIn",component:ze}),r.a.createElement(k.a,{path:"/org/:id/forgotPassword",component:ze}),r.a.createElement(k.a,{path:"/org/:id/changePassword",component:ze}),r.a.createElement(k.a,{path:"/org/:id/changeOfSeniorRequest",component:ze}),r.a.createElement(k.a,{path:"/org/:id/createPassword",component:ze}),r.a.createElement(k.a,{path:"/org/:id/wrongOrganisation",component:ze}),r.a.createElement(k.a,{path:"/org/:id/book",component:Xe}),r.a.createElement(k.a,{path:"/org/:id/wrongLogin/",component:R}),r.a.createElement(k.a,{path:"/notConnected",component:x}),r.a.createElement(k.a,{path:"/administrator",exact:!0,component:ea})," ",r.a.createElement(k.a,{path:"/administrator/signIn",component:aa})," ",r.a.createElement(k.a,{path:"/administrator/organisationRegister",component:ta})))):r.a.createElement("div",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oa=t(66),la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{auth:!1,uuid:"",name:"",email:"",role:"",new:"",requestedPassword:!1,orgID:"",userDepartments:"",SARequest:""},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE_AUTH":return Object(le.a)(Object(le.a)({},e),{},{auth:a.value});case"USER_UPDATE_UUID":return Object(le.a)(Object(le.a)({},e),{},{uuid:a.value});case"USER_UPDATE_NAME":return Object(le.a)(Object(le.a)({},e),{},{name:a.value});case"USER_UPDATE_EMAIL":return Object(le.a)(Object(le.a)({},e),{},{email:a.value});case"USER_UPDATE_ROLE":return Object(le.a)(Object(le.a)({},e),{},{role:a.value});case"USER_UPDATE_NEW":return Object(le.a)(Object(le.a)({},e),{},{new:a.value});case"USER_UPDATE_REQUESTEDPASSWORD":return Object(le.a)(Object(le.a)({},e),{},{requestedPassword:a.value});case"USER_UPDATE_ORGID":return Object(le.a)(Object(le.a)({},e),{},{orgID:a.value});case"USER_UPDATE_USERDEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{userDepartments:a.value});case"USER_UPDATE_SAREQUEST":return Object(le.a)(Object(le.a)({},e),{},{SARequest:a.value});default:return e}},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",signInLocal:!1,signInGoogle:!1,message:"",useDepartments:!1,noOfDepartments:"",departments:[],allocatedRooms:0,redeemedRooms:0,rooms:[],layouts:[],holidays:[],locked:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORG_UPDATE_NAME":return Object(le.a)(Object(le.a)({},e),{},{name:a.value});case"ORG_UPDATE_SIGNIN_LOCAL":return Object(le.a)(Object(le.a)({},e),{},{signInLocal:a.value});case"ORG_UPDATE_SIGNIN_GOOGLE":return Object(le.a)(Object(le.a)({},e),{},{signInGoogle:a.value});case"ORG_UPDATE_MESSAGE":return Object(le.a)(Object(le.a)({},e),{},{message:a.value});case"ORG_UPDATE_USEDEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{useDepartments:a.value});case"ORG_UPDATE_NOOFDEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{noOfDepartments:a.value});case"ORG_UPDATE_DEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{departments:a.value});case"ORG_UPDATE_ALLOCATEDROOMS":return Object(le.a)(Object(le.a)({},e),{},{allocatedRooms:a.value});case"ORG_UPDATE_REDEEMEDROOMS":return Object(le.a)(Object(le.a)({},e),{},{redeemedRooms:a.value});case"ORG_UPDATE_ROOMS":return Object(le.a)(Object(le.a)({},e),{},{rooms:a.value});case"ORG_UPDATE_LAYOUTS":return Object(le.a)(Object(le.a)({},e),{},{layouts:a.value});case"ORG_UPDATE_HOLIDAYS":return Object(le.a)(Object(le.a)({},e),{},{holidays:a.value});case"ORG_UPDATE_LOCKED":return Object(le.a)(Object(le.a)({},e),{},{locked:a.value});default:return e}},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roomName:"",roomID:"",sessionID:"",sessionLabel:"",date:"",weekBeginDate:"",totalSessions:0,dayList:[],layoutData:{},weekSystem:!1,weekUUID:"",collideBookingsUpdate:!1,startTime:"",finishTime:"",timeInterval:"",forceSignIn:!1,fromSignIn:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_ROOM_NAME":return Object(le.a)(Object(le.a)({},e),{},{roomName:a.value});case"UPDATE_ROOM_ID":return Object(le.a)(Object(le.a)({},e),{},{roomID:a.value});case"UPDATE_ROOM_LAYOUT_DATA":return Object(le.a)(Object(le.a)({},e),{},{layoutData:a.value});case"UPDATE_ROOM_SESSION_ID":return Object(le.a)(Object(le.a)({},e),{},{sessionID:a.value});case"UPDATE_ROOM_SESSION_LABEL":return Object(le.a)(Object(le.a)({},e),{},{sessionLabel:a.value});case"UPDATE_ROOM_DATE":return Object(le.a)(Object(le.a)({},e),{},{date:a.value});case"UPDATE_ROOM_WEEK_BEGIN":return Object(le.a)(Object(le.a)({},e),{},{weekBeginDate:a.value});case"UPDATE_ROOM_TOTAL_SESSIONS":return Object(le.a)(Object(le.a)({},e),{},{totalSessions:a.value});case"UPDATE_ROOM_DAY_LIST":return Object(le.a)(Object(le.a)({},e),{},{dayList:a.value});case"UPDATE_ROOM_WEEK_SYSTEM":return Object(le.a)(Object(le.a)({},e),{},{weekSystem:a.value});case"UPDATE_ROOM_WEEK_UUID":return Object(le.a)(Object(le.a)({},e),{},{weekUUID:a.value});case"UPDATE_FORCE_COLLIDED_BOOKINGS":return Object(le.a)(Object(le.a)({},e),{},{collideBookingsUpdate:a.value});case"UPDATE_DIARY_START_TIME":return Object(le.a)(Object(le.a)({},e),{},{startTime:a.value});case"UPDATE_DIARY_FINISH_TIME":return Object(le.a)(Object(le.a)({},e),{},{finishTime:a.value});case"UPDATE_DIARY_TIME_INTERVAL":return Object(le.a)(Object(le.a)({},e),{},{timeInterval:a.value});case"UPDATE_FORCE_SIGNIN":return Object(le.a)(Object(le.a)({},e),{},{forceSignIn:a.value});case"UPDATE_FROM_SIGNIN":return Object(le.a)(Object(le.a)({},e),{},{fromSignIn:a.value});default:return e}},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{editBooking:!1,bookingID:0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_EDIT_BOOKING":return Object(le.a)(Object(le.a)({},e),{},{editBooking:a.value});case"UPDATE_BOOKING_ID":return Object(le.a)(Object(le.a)({},e),{},{bookingID:a.value});default:return e}},ua=Object(oa.b)({user:la,organisation:ca,globalVars:sa,bookings:ia}),ma=Object(oa.c)(ua,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(u.a,{store:ma},r.a.createElement(ra,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.99c3f395.chunk.js.map