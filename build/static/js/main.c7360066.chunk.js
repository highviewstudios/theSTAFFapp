(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(19),r=a.n(c),o=(a(64),a(65),a(66),a(67),a(68),a(113)),i=a(114),s=a(8),u=a(21),m=a(23),E=Object(n.createContext)();var d=function(e){var t=Object(n.useState)({name:"",email:""}),a=Object(s.a)(t,2),c=a[0],r=a[1];return l.a.createElement(E.Provider,{value:{user:c,updateUser:function(e,t){r((function(a){return Object(m.a)(Object(m.a)({},a),{},Object(u.a)({},e,t))}))}}},e.children)},b=Object(n.createContext)();var f=function(e){var t=Object(n.useState)({name:"",access:""}),a=Object(s.a)(t,2),c=a[0],r=a[1];return l.a.createElement(b.Provider,{value:{admin:c,updateAdmin:function(e,t){r((function(a){return Object(m.a)(Object(m.a)({},a),{},Object(u.a)({},e,t))}))}}},e.children)},g="";var h=function(){var e=window.location.hostname,t=window.location.protocol;g="localhost"===e?t+"//"+e+":8080":t+"//"+e},p=a(15),v=a.n(p),O=a(6),j=a(10);var w=function(){var e=Object(O.f)(),t=Object(n.useContext)(E),a=t.user,c=(t.updateUser,Object(n.useContext)(b).admin),r=Object(n.useState)({name:"",show:!1}),o=Object(s.a)(r,2),i=o[0],u=o[1],m=Object(n.useState)(),d=Object(s.a)(m,2),f=d[0],g=d[1];function h(){v.a.get("/logout").then((function(e){console.log(e.data.message),"User logged out"===e.data.message&&(u({name:"",show:!1}),g("/"),console.log("Redirect"))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){!function(){console.log("IN"),console.log(c),""!==a.name?u({name:a.name,show:!0}):"granted"===c.access&&u({name:"High-View-Studios",show:!0});console.log(a)}()}),[a,c]),Object(n.useEffect)((function(){e.push(f)}),[h]),l.a.createElement("div",null,i.show?l.a.createElement("div",null,l.a.createElement("strong",null,"User: ",i.name),l.a.createElement("br",null),l.a.createElement(j.a,{variant:"warning",onClick:h},"Log Out")):l.a.createElement("div",null))};var y=function(){return l.a.createElement("nav",null,l.a.createElement(o.a,null,l.a.createElement(i.a,null),l.a.createElement(i.a,null,l.a.createElement("h1",null,l.a.createElement("strong",null,"My STAFF")),l.a.createElement("h2",null,l.a.createElement("strong",null,"Space, Times, Flexible, Facilities"))),l.a.createElement(i.a,null,l.a.createElement("div",{className:"user-nav"},l.a.createElement(w,null)))))};var N=function(){var e=Object(O.f)(),t=Object(n.useContext)(E).updateUser,a=Object(n.useState)(),c=Object(s.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){v.a.get("/auth",{withCredentials:!0}).then((function(e){console.log(e.data),e.data.auth?(t("name",e.data.user.displayName),o("/home")):o("/signin")})).catch((function(e){console.log("Auth Err: "+e)}))}),[]),Object(n.useEffect)((function(){e.push(r)}),[r]),l.a.createElement("div",null)},S=a(17),x=a(18);var C=function(){return Object(n.useContext)(E).updateUser,Object(n.useEffect)((function(){document.title="STAFF"}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(S.a,{fluid:!0,className:"p-3"},l.a.createElement(x.a,{className:"back-color"},l.a.createElement("h1",null,"Home"))))};a(52);var k=function(){var e=Object(O.f)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){document.title="STAFF - Sign In",h()}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(S.a,{className:"p-3"},l.a.createElement(x.a,{className:"back-color"},l.a.createElement("h3",null,"Please Sign In!"),l.a.createElement("form",null,l.a.createElement("label",{id:"lblEmail"},"Email:"),l.a.createElement("br",null),l.a.createElement("input",{id:"txtEmail",type:"email"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{id:"lblPassword"},"Password:"),l.a.createElement("br",null),l.a.createElement("input",{id:"txtPassword",type:"password"}),l.a.createElement("p",null,c)),l.a.createElement("br",null),l.a.createElement(j.a,{variant:"warning",onClick:function(t){t.preventDefault();var a=document.getElementById("txtEmail").value,n=document.getElementById("txtPassword").value;v.a.get("/login?email="+a+"&password="+n).then((function(t){"Logged in successful"===t.data.message?e.push("/"):r(t.data.info)})).catch((function(e){console.log(e)}))}},"Log in"),l.a.createElement(j.a,{variant:"warning",onClick:function(){e.push("/register")}},"Register"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(j.a,{variant:"danger",href:g+"/auth/google"},l.a.createElement("i",{class:"fab fa-google"})," Log in with Google"),l.a.createElement("br",null),l.a.createElement("br",null))))};var A=function(){Object(n.useEffect)((function(){document.title="STAFF - Register"}),[]);var e=Object(O.f)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1];return l.a.createElement("div",{className:"body"},l.a.createElement(S.a,{className:"p-3"},l.a.createElement(x.a,{className:"back-color"},l.a.createElement("div",{className:"header"},l.a.createElement("h2",null,"Register"),u?l.a.createElement("div",null,l.a.createElement("h3",null," You have successfully been registered"),l.a.createElement("br",null),l.a.createElement("p",null,"Please log in"),l.a.createElement(j.a,{type:"submit",onClick:function(){m(!1),e.push("/signin")},variant:"warning"},"Login")):l.a.createElement("form",null,l.a.createElement("label",{id:"lblName"},"Name:"),l.a.createElement("br",null),l.a.createElement("input",{id:"name",size:"sm",type:"text",required:!0}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{id:"lblEmail"},"Email:"),l.a.createElement("br",null),l.a.createElement("input",{id:"email",size:"sm",type:"email",required:!0}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{id:"lblPassword"},"Password:"),l.a.createElement("br",null),l.a.createElement("input",{id:"password",size:"sm",type:"password",required:!0}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{id:"lblConPassword"},"Confirm Password:"),l.a.createElement("br",null),l.a.createElement("input",{id:"confirmpassword",size:"sm",type:"password",required:!0}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("p",null,c),l.a.createElement(j.a,{type:"submit",onClick:function(e){e.preventDefault(),r("");var t="/register/"+document.getElementById("name").value+"/"+document.getElementById("email").value+"/"+document.getElementById("password").value+"/"+document.getElementById("confirmpassword").value;v.a.get(t).then((function(e){"User registered successfully"===e.data.message?m(!0):"Yes"===e.data.userError&&r(e.data.message)})).catch((function(e){console.log(e)}))},variant:"warning"},"Register"))))))};var F=function(){var e=Object(O.f)(),t=Object(n.useContext)(b).updateAdmin,a=Object(n.useState)(),c=Object(s.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){v.a.get("/administrator/auth").then((function(e){var a=e.data;a.auth?(t("access",a.access),"granted"==a.access?o("/administrator/home"):o("/administrator/signin")):o("/administrator/signin")})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){e.push(r)}),[r]),l.a.createElement("div",null)};var I=function(){return Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(S.a,{fluid:!0,className:"p-3"},l.a.createElement(x.a,{className:"back-color"},l.a.createElement("h1",null,"Administrator Home"))))};var P=function(){var e=Object(n.useContext)(b).admin;return Object(n.useEffect)((function(){document.title="STAFF - Administrator Sign In",h()}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(S.a,{className:"p-3"},l.a.createElement(x.a,{className:"back-color"},l.a.createElement("h1",null,"Administrator Sign In"),"denied"==e.granted?l.a.createElement("div",null,l.a.createElement("h1",null,"Access Denied"),l.a.createElement(j.a,{variant:"warning",href:g+"/administrator/logout"},"Log Out")):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(j.a,{variant:"dark",href:g+"/auth/github"},l.a.createElement("i",{class:"fab fa-github"}),"  Log in with Github"),l.a.createElement("br",null),l.a.createElement("br",null)))))},B=a(14);var L=function(){return l.a.createElement(d,null,l.a.createElement(f,null,l.a.createElement(B.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(y,null),l.a.createElement(O.c,null,l.a.createElement(O.a,{path:"/",exact:!0,component:N}),l.a.createElement(O.a,{path:"/home",component:C}),l.a.createElement(O.a,{path:"/signin",component:k}),l.a.createElement(O.a,{path:"/register",component:A}),l.a.createElement(O.a,{path:"/administrator",exact:!0,component:F}),l.a.createElement(O.a,{path:"/administrator/home",component:I}),l.a.createElement(O.a,{path:"/administrator/signin",component:P}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){e.exports=a(108)},64:function(e,t,a){},68:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.c7360066.chunk.js.map