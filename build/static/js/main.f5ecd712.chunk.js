(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[0],{215:function(e,a,t){e.exports=t(471)},220:function(e,a,t){},245:function(e,a,t){},246:function(e,a,t){},247:function(e,a,t){},33:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADICAYAAAC+j+5qAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAwKADAAQAAAABAAAAyAAAAAB9S3ILAAAF30lEQVR4Ae3cQW4UVhAE0BkzFzCC8yQ3i48WzgPIFwA7jhQiNmyaX8LVPDYGrN/qfuWSvLEvF38IECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYJfAddc5v/aaN/cfn1MbfH18L6sA7l1gppEEagQUoCYqiyYEFCChamaNgALURGXRhIACJFTNrBFQgJqoLJoQUICEqpk1AgpQE5VFEwIKkFA1s0ZAAWqismhCQAESqmbWCChATVQWTQgoQELVzBoBBaiJyqIJAQVIqJpZI6AANVFZNCGgAAlVM2sEFKAmKosmBBQgoWpmjYAC1ERl0YSAAiRUzawRUICaqCyaEFCAhKqZNQIKUBOVRRMCCpBQNbNGQAFqorJoQkABEqpm1ggoQE1UFk0IKEBC1cwaAQWoicqiCQEFSKiaWSOgADVRWTQhoAAJVTNrBBSgJiqLJgQUIKFqZo2AAtREZdGEgAIkVM2sEVCAmqgsmhBQgISqmTUCClATlUUTAgqQUDWzRkABaqKyaEJAARKqZtYIKEBNVBZNCChAQtXMGgEFqInKogkBBUiomlkjoAA1UVk0IaAACVUzawQUoCYqiyYEFCChamaNgALURGXRhIACJFTNrBFQgJqoLJoQUICEqpk1AgpQE5VFEwIKkFA1s0ZAAWqismhCQAESqmbWCChATVQWTQgoQELVzBoBBaiJyqIJAQVIqJpZI6AANVFZNCGgAAlVM2sEFKAmKosmBBQgoWpmjYAC1ERl0YSAAiRUzawRUICaqCyaEFCAhKqZNQIKUBOVRRMCCpBQNbNGQAFqorJoQkABEqpm1ggoQE1UFk0IKEBC1cwaAQWoicqiCQEFSKiaWSOgADVRWTQhoAAJVTNrBG63d49/XJ6e/qzZ+BUv+vz8FNvu9vbzX7Hhv9Pgu7u/v3y6//Dt5Nu/X/wvwT18+w8fX6eAjM7kcn26PLxM+r8AvgU642pKqYAClAZn7TMCCnDG0ZRSAQUoDc7aZwQU4IyjKaUCClAanLXPCCjAGUdTSgUUoDQ4a58RUIAzjqaUCihAaXDWPiOgAGccTSkVUIDS4Kx9RkABzjiaUiqgAKXBWfuMgAKccTSlVEABSoOz9hkBBTjjaEqpgAKUBmftMwIKcMbRlFIBBSgNztpnBBTgjKMppQK3y8uvifjvJ+VLT3g9ayd/c8P1evfwei4t3uTl6/377a/f/8Pff07gzf3H55+b8OPXXx/fy+rHPOPP+BZoTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOchAQIECBAg0CvwDwWvJ3alsOgjAAAAAElFTkSuQmCC"},34:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADICAYAAAC+j+5qAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAwKADAAQAAAABAAAAyAAAAAB9S3ILAAADRUlEQVR4Ae3cQQqCYBQE4D/xAkH3qaN1tLpP0AXCMqi2A+0cvjaCT8H5nrO0MfwIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQI/Cewmw/341iW03+3u4vAxgSm6fK47a/fp57fL//zuZy/JxwJNAvslnFe8/0KMDWHlY1AElCAJGReLaAA1esVLgkoQBIyrxZQgOr1CpcEFCAJmVcLKED1eoVLAgqQhMyrBRSger3CJQEFSELm1QIKUL1e4ZKAAiQh82oBBaher3BJQAGSkHm1gAJUr1e4JKAASci8WkABqtcrXBJQgCRkXi2gANXrFS4JKEASMq8WUIDq9QqXBOax/k3E50v5dK05ge0LrO/79kNIQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsCWBF/saEjPJd4SSAAAAAElFTkSuQmCC"},471:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(32),o=t.n(l),c=(t(220),t(6)),i=t(8),s=t.n(i),u=t(9),m=function(e){return{type:"USER_UPDATE_AUTH",value:e}},d=function(e){return{type:"USER_UPDATE_UUID",value:e}},E=function(e){return{type:"USER_UPDATE_NAME",value:e}},b=function(e){return{type:"USER_UPDATE_ROLE",value:e}},g=function(e){return{type:"USER_UPDATE_NEW",value:e}},f=function(e){return{type:"USER_UPDATE_REQUESTEDPASSWORD",value:e}},p=function(e){return{type:"USER_UPDATE_ORGID",value:e}},h=function(e){return{type:"USER_UPDATE_USERDEPARTMENTS",value:e}},O=function(e){return{type:"USER_UPDATE_SAREQUEST",value:e}};t(242),t(243),t(244),t(245),t(246),t(247);var y=function(){return r.a.createElement("div",{className:"betaBanner"},r.a.createElement("p",null,r.a.createElement("strong",null,"This website is a beta verison, please expect errors. Any problems, please contact High-View Studios (Shaun Evans)")))},v=t(481),A=t(205),j="";var k=function(){var e=window.location.hostname,a=window.location.protocol;j="localhost"===e?a+"//"+e+":8080":a+"//"+e},D=t(28),w=function(e){return{type:"UPDATE_EDIT_BOOKING",value:e}},T=function(e){return{type:"UPDATE_BOOKING_ID",value:e}},I=function(e){return{type:"UPDATE_BOOKING_BOOKINGTYPE",value:e}},C=t(73),S=t(17);var N=function(){var e=Object(D.f)(),a=Object(u.c)((function(e){return e.user})),t=Object(u.b)(),l=Object(n.useState)({name:"",show:!1}),o=Object(c.a)(l,2),i=o[0],d=o[1];function O(){s.a.get("/logout").then((function(n){if(console.log(n.data.message),"User logged out"===n.data.message){var r;if(console.log(a),"superAdmin"==a.role)r="/";else r="/org/"+a.orgID+"/signIn";t(m(!1)),t(E("")),t(b("")),t(g("")),t(f(!1)),t(h([])),t(p("")),t(w(!1)),e.push(r)}})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){k()}),[]),Object(n.useEffect)((function(){a.auth?"superAdmin"==a.role?d({name:"High-View Studios",show:!0}):d({name:a.name,show:!0}):d({name:"",show:!1})}),[a]),r.a.createElement("div",null,i.show?r.a.createElement("div",null,r.a.createElement("strong",null,"User: ",i.name),r.a.createElement("br",null),"seniorAdmin"==a.role?r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Toggle,{variant:"warning",id:"dropdown-basic"},"Page"),r.a.createElement(S.a,{variant:"warning",onClick:O},"Log Out"),r.a.createElement(C.a.Menu,null,r.a.createElement(C.a.Item,{onClick:function(){return e.push("/")}},"Organisation Home"),r.a.createElement(C.a.Item,{onClick:function(){return e.push("/org/"+a.orgID+"/organisationAdmin")}},"Organisation Admin")))):r.a.createElement("div",null,r.a.createElement(S.a,{variant:"warning",onClick:O},"Log Out"))):r.a.createElement("div",null))};var U=function(){return r.a.createElement("nav",null,r.a.createElement(v.a,null,r.a.createElement(A.a,null),r.a.createElement(A.a,null,r.a.createElement("a",{className:"websiteTitle",href:"/"},r.a.createElement("div",{className:"clickable"},r.a.createElement("h1",null,r.a.createElement("strong",null,"My STAFF")),r.a.createElement("h2",null,r.a.createElement("strong",null,"Space, Times, Flexible, Facilities"))))),r.a.createElement(A.a,null,r.a.createElement("div",{className:"user-nav"},r.a.createElement(N,null)))))},B=t(20),_=t(21);var x=function(){var e=Object(u.c)((function(e){return e.user})),a=Object(D.f)();return Object(n.useEffect)((function(){document.title="STAFF",console.log(e),1==e.auth&&("superAdmin"==e.role?a.push("/administrator"):a.push("/org/"+e.orgID))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"My STAFF homepage is coming soon..."),r.a.createElement("br",null),r.a.createElement("h2",null,"If your organisation is already using My STAFF, please use the direct link from your registration email."))))};var R=function(){var e=Object(u.c)((function(e){return e.user})),a=Object(D.f)();return Object(n.useEffect)((function(){document.title="STAFF - Not Connected",k(),e.auth&&a.push("/")}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h3",null,"Email is not connected to any organisation"),r.a.createElement(S.a,{variant:"warning",onClick:function(){return a.push("/")}},"Back to Home"),r.a.createElement("br",null),r.a.createElement("br",null))))};var Y=function(e){var a=e.match.params.id,t=(Object(u.c)((function(e){return e.user})),Object(D.f)());return Object(n.useEffect)((function(){document.title="STAFF - Not Connected",k()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h3",null,"This is not the login method you use to log in"),r.a.createElement(S.a,{variant:"warning",onClick:function(){return t.push("/org/"+a+"/")}},"Back"),r.a.createElement("br",null),r.a.createElement("br",null))))},L=function(e){return{type:"ORG_UPDATE_SIGNIN_LOCAL",value:e}},M=function(e){return{type:"ORG_UPDATE_SIGNIN_GOOGLE",value:e}},P=function(e){return{type:"ORG_UPDATE_MESSAGE",value:e}},Q=function(e){return{type:"ORG_UPDATE_USEDEPARTMENTS",value:e}},F=function(e){return{type:"ORG_UPDATE_NOOFDEPARTMENTS",value:e}},G=function(e){return{type:"ORG_UPDATE_DEPARTMENTS",value:e}},H=function(e){return{type:"ORG_UPDATE_REDEEMEDROOMS",value:e}},K=function(e){return{type:"ORG_UPDATE_ROOMS",value:e}},q=function(e){return{type:"ORG_UPDATE_HOLIDAYS",value:e}},W=function(e){return{type:"ORG_UPDATE_LOCKED",value:e}},V=function(e){return{type:"UPDATE_ROOM_NAME",value:e}},J=function(e){return{type:"UPDATE_ROOM_ID",value:e}},z=function(e){return{type:"UPDATE_ROOM_LAYOUT_DATA",value:e}},X=function(e){return{type:"UPDATE_ROOM_SESSION_ID",value:e}},Z=function(e){return{type:"UPDATE_ROOM_SESSION_LABEL",value:e}},$=function(e){return{type:"UPDATE_ROOM_DATE",value:e}},ee=function(e){return{type:"UPDATE_ROOM_WEEK_BEGIN",value:e}},ae=function(e){return{type:"UPDATE_ROOM_DAY_LIST",value:e}},te=function(e){return{type:"UPDATE_ROOM_WEEK_SYSTEM",value:e}},ne=function(e){return{type:"UPDATE_ROOM_WEEK_UUID",value:e}},re=function(e){return{type:"UPDATE_FORCE_COLLIDED_BOOKINGS",value:e}},le=function(e){return{type:"UPDATE_FORCE_SIGNIN",value:e}},oe=function(e){return{type:"UPDATE_FROM_SIGNIN",value:e}},ce=t(13),ie=t(1),se=t(72),ue=t(482),me=t(14),de=t.n(me);var Ee=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=Object(D.f)(),m=Object(u.b)(),d=Object(n.useState)({slotClass:"",dayClass:"",dates:["","","","","","",""],weekSlot:"",dayIndex:0,data:{},holiday:"",weekSystemUUID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({days:[],order:[],sessions:[],sessionTotal:0}),p=Object(c.a)(f,2),h=p[0],O=p[1],y=Object(n.useState)({open:!1,heading:"",message:""}),j=Object(c.a)(y,2),k=j[0],C=j[1];function N(){C((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function U(t,n,r){var l={},o=[],c=de()(t,"DD/MM/YYYY"),i={user:"",department:"",type:""},u=_(c.week())+"-"+c.format("YY");console.log(u);for(var m=0;m<7;m++){var d,E=Object(ce.a)(n);try{for(E.s();!(d=E.n()).done;){var b=d.value;o.push(_(c.day())+"-"+_(r[b].id)),l[_(c.week())+"-"+c.format("YY")+"-"+_(c.day())+"-"+_(r[b].id)]=i}}catch(p){E.e(p)}finally{E.f()}c.add(1,"d")}var f={orgID:a,room:e.roomID,week:u,days:o,weekBG:t};s.a.post("/booking/getBookings",f).then((function(e){var a=e.data;console.log(a.bookings),"null"===a.error&&g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSlot:u,data:a.bookings})}))})).catch((function(e){console.log(e)}))}function B(a){var n,r=de()(a,"DD/MM/YYYY"),l=_(r.week())+"-"+r.format("YY"),o="",c=Object(ce.a)(t.holidays);try{var i=function(){var a=n.value;if(a.weeks.includes(l))return a.titleUUID.includes("w")?e.weekSystem&&(o=a.name,g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystemUUID:a.titleUUID})}))):a.titleUUID.includes("h")&&(o="Holiday: "+a.name),"break"};for(c.s();!(n=c.n()).done;){if("break"===i())break}}catch(s){c.e(s)}finally{c.f()}g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{holiday:o})}))}function _(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}function x(t){m(w(!1));var n=t.target.id,r=n.toString().split("-");m(V(e.roomName)),m(J(e.roomID)),m(X(n)),m(te(e.weekSystem)),m(ne(b.weekSystemUUID)),m(z(e.layoutData)),h.sessions[r[1]].id.includes("b")?m(Z(h.sessions[r[1]].breakText)):""!=h.sessions[r[1]].customText?m(Z(h.sessions[r[1]].customText)):m(Z(h.sessions[r[1]].id)),m(ee(b.dates[0])),m($(b.dates[r[0]])),m({type:"UPDATE_ROOM_TOTAL_SESSIONS",value:h.sessionTotal}),m(ae(h.days)),i.push("/org/"+a+"/book")}function R(e){var t={orgID:a,uuid:e};s.a.post("/booking/getBookingData",t).then((function(a){var t=a.data;m({type:"UPDATE_BOOKING_USER",value:t.booking.user}),m(function(e){return{type:"UPDATE_BOOKING_DEPARTMENT",value:e}}(L(t.booking.departmentID))),m(function(e){return{type:"UPDATE_BOOKING_SESSIONDES",value:e}}(t.booking.sessionDes)),m(function(e){return{type:"UPDATE_BOOKING_SESSIONLENGTH",value:e}}(t.booking.sessionTotal)),"single"==t.booking.bookingType?m(I("Single")):(m(I("Repeat - "+t.booking.repeatType)),m(function(e){return{type:"UPDATE_BOOKING_BOOKINGUNTIL",value:e}}(t.booking.repeatUntil))),m(function(e){return{type:"UPDATE_BOOKING_COMMENTS",value:e}}(t.booking.comments)),m(w(!0)),m(T(e))})).catch((function(e){console.log(e)}))}function Y(e,a,t){for(var n=[],r=0;r<7;r++)n.push(e.format("DD/MM/YYYY")),e.add(1,"d");g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dates:n})})),U(n[0],a,t),B(n[0])}function L(e){var a,n=Object(ce.a)(t.departments);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.uuid==e)return r.name}}catch(l){n.e(l)}finally{n.f()}}return Object(n.useEffect)((function(){!function(){console.log(e.weekSystem);var t,n=e.layoutData.days.split(","),r=[],o={},i=e.layoutData.sessionOrder.split(","),u=Object(ce.a)(n);try{for(u.s();!(t=u.n()).done;){var m=t.value;r.push("true"==m)}}catch(E){u.e(E)}finally{u.f()}var d={orgID:a,layoutUUID:e.layoutData.uuid};s.a.post("/organisation/getTimetableSessions",d).then((function(a){var t,n=a.data.sessions,s=Object(ce.a)(n);try{for(s.s();!(t=s.n()).done;){var u=t.value;o[u.id]=u}}catch(E){s.e(E)}finally{s.f()}O((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{days:r,sessions:o,sessionTotal:e.layoutData.sessions,order:i})}));var m,d=0,b=Object(ce.a)(r);try{for(b.s();!(m=b.n()).done;){m.value&&d++}}catch(E){b.e(E)}finally{b.f()}if(console.log(d),g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{slotClass:"session"+d+"-slot timetable-layout",dayClass:"session"+d+"-days timetable-layout"})})),console.log(l.weekBeginDate),""==l.weekBeginDate){var f=function(e){var a=de()();a.startOf("week");for(var t,n=[],r=0;r<7;r++)n.push(a.format("DD/MM/YYYY")),a.add(1,"d");g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dates:n})}));var l,o=Object(ce.a)(e.entries());try{for(o.s();!(l=o.n()).done;){var i=Object(c.a)(l.value,2),s=i[0];if(i[1]){t=s;break}}}catch(E){o.e(E)}finally{o.f()}return g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dayIndex:t})})),n[0]}(r);U(f,i,o),B(f)}else{!function(e){var a,t,n=Object(ce.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),l=r[0];if(r[1]){a=l;break}}}catch(E){n.e(E)}finally{n.f()}g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dayIndex:a})}))}(r),Y(de()(l.weekBeginDate,"DD/MM/YYYY"),i,o)}})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred"},"Week Beginning: ",b.dates[b.dayIndex]))),r.a.createElement(A.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred-100"},b.holiday))),r.a.createElement(A.a,null,r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(S.a,{variant:"primary",onClick:function(){m(w(!1));var a=de()(b.dates[0],"DD/MM/YYYY");a.subtract(1,"w");var t=de()();t.startOf("week"),a<t?C({heading:e.roomName,message:"You cannot go back previous from this week",open:!0}):Y(a,h.order,h.sessions)}},"-"),r.a.createElement(S.a,{variant:"primary",onClick:function(){m(w(!1));var e=de()(b.dates[0],"DD/MM/YYYY");e.add(1,"w"),Y(e,h.order,h.sessions)}},"+")))),r.a.createElement(v.a,null,r.a.createElement("table",{className:"timetable-layout",width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:b.slotClass},"Session"),h.days.map((function(e,a){if(e)return r.a.createElement("td",{className:b.dayClass,key:a},o[a]," ",r.a.createElement("br",null)," ",b.dates[a])})))),r.a.createElement("tbody",null,h.order.map((function(e,a){return e.toString().includes("b")?r.a.createElement("tr",{key:a,style:{backgroundColor:h.sessions[e].bgColor}},r.a.createElement("td",{className:b.slotClass,style:{color:h.sessions[e].textColor}},""!=h.sessions[e].breakText?h.sessions[e].breakText:h.sessions[e].id),h.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var l=b.weekSlot+"-"+_(n)+"-"+_(h.sessions[e].id);return"single"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+h.session,onClick:function(){return R(b.data[l].uuid)}},b.data[l].user," ",r.a.createElement("br",null)," ",L(b.data[l].department)):"repeat"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:function(){return R(b.data[l].uuid)}},b.data[l].user," ",r.a.createElement("br",null)," ",L(b.data[l].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}}))):r.a.createElement("tr",{key:a},r.a.createElement("td",{className:b.slotClass,"data-tip":""!=h.sessions[e].hoverText?h.sessions[e].hoverText:null},""!=h.sessions[e].customText?h.sessions[e].customText:h.sessions[e].id),h.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var l=b.weekSlot+"-"+_(n)+"-"+_(h.sessions[e].id);return"single"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+e,onClick:function(){return R(b.data[l].uuid)}},b.data[l].user," ",r.a.createElement("br",null)," ",L(b.data[l].department)):"repeat"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:function(){return R(b.data[l].uuid)}},b.data[l].user," ",r.a.createElement("br",null)," ",L(b.data[l].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:x},"Book")}})))})),void se.a.rebuild())),r.a.createElement(se.a,null)),r.a.createElement(ue.a,{show:k.open,onHide:N},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,k.heading)),r.a.createElement(ue.a.Body,null,k.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:N},"Close"))))};var be=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=Object(u.b)(),m=Object(D.f)(),d=Object(n.useState)({slotClass:"",dayClass:"",times:[],startTime:"",finishTime:"",interval:"",dates:["","","","","","",""],dayIndex:0,weekSlot:"",data:{},holiday:"",days:[],weekSystemUUID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1];Object(n.useEffect)((function(){!function(){var a,t=e.layoutData.days.split(","),n=[],r=e.layoutData.startTime,o=e.layoutData.finishTime,i=e.layoutData.timeInterval,s=Object(ce.a)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;n.push("true"==u)}}catch(p){s.e(p)}finally{s.f()}for(var m=0,d=0,E=n;d<E.length;d++){E[d]&&m++}g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{slotClass:"session"+m+"-slot timetable-layout",dayClass:"session"+m+"-days timetable-layout",startTime:r,finishTime:o,interval:i,days:n})}));var b=function(e,a,t){var n=[];if("Start Time"!==e&&"Finish Time"!==a&&0!==t){for(var r=de()(e,"HH:mm"),l=de()(a,"HH:mm");r.isBefore(l);)n.push(r.format("HH:mm")),r.add(t,"m");g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{times:n})}))}return n}(r,o,i);if(""==l.weekBeginDate){var f=function(e){var a=de()();a.startOf("week");for(var t,n=[],r=0;r<7;r++)n.push(a.format("DD/MM/YYYY")),a.add(1,"d");g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dates:n})}));var l,o=Object(ce.a)(e.entries());try{for(o.s();!(l=o.n()).done;){var i=Object(c.a)(l.value,2),s=i[0];if(i[1]){t=s;break}}}catch(p){o.e(p)}finally{o.f()}return g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekbegin:n[0],dayIndex:t})})),n[0]}(n);k(f,b),j(f)}else{!function(e){var a,t,n=Object(ce.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),l=r[0];if(r[1]){a=l;break}}}catch(p){n.e(p)}finally{n.f()}g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dayIndex:a})}))}(n),C(de()(l.weekBeginDate,"DD/MM/YYYY"),b)}}()}),[]);var f=Object(n.useState)({open:!1,heading:"",message:""}),p=Object(c.a)(f,2),h=p[0],O=p[1];function y(){O((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function j(a){var n,r=de()(a,"DD/MM/YYYY"),l=I(r.week())+"-"+r.format("YY"),o="",c=Object(ce.a)(t.holidays);try{var i=function(){var a=n.value;if(a.weeks.includes(l))return a.titleUUID.includes("w")?e.weekSystem&&(o=a.name,g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystemUUID:a.titleUUID})}))):a.titleUUID.includes("h")&&(o="Holiday: "+a.name),"break"};for(c.s();!(n=c.n()).done;){if("break"===i())break}}catch(s){c.e(s)}finally{c.f()}g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{holiday:o})}))}function k(t,n){for(var r={},l=[],o=de()(t,"DD/MM/YYYY"),c={user:"",department:"",type:""},i=I(o.week())+"-"+o.format("YY"),u=0;u<7;u++){var m,d=Object(ce.a)(n);try{for(d.s();!(m=d.n()).done;){var E=m.value;l.push(I(o.day())+"-"+E.replace(":","")),r[I(o.week())+"-"+o.format("YY")+"-"+I(o.day())+"-"+E.replace(":","")]=c}}catch(f){d.e(f)}finally{d.f()}o.add(1,"d")}var b={orgID:a,room:e.roomID,week:i,days:l,weekBG:t};s.a.post("/booking/getBookings",b).then((function(e){var a=e.data;"null"===a.error&&g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSlot:i,data:a.bookings})}))})).catch((function(e){console.log(e)}))}function I(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}function C(e,a){for(var t=[],n=0;n<7;n++)t.push(e.format("DD/MM/YYYY")),e.add(1,"d");g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{dates:t})})),k(t[0],a),j(t[0])}function N(t){var n=t.target.id;console.log(n);var r=n.toString().split("-");i(V(e.roomName)),i(J(e.roomID)),i(z(e.layoutData)),i(X(n)),i(Z(r[1])),i(ee(b.dates[0])),i($(b.dates[r[0]])),i(ae(b.days)),i(te(e.weekSystem)),i(ne(b.weekSystemUUID)),i({type:"UPDATE_DIARY_START_TIME",value:b.startTime}),i(function(e){return{type:"UPDATE_DIARY_FINISH_TIME",value:e}}(b.finishTime)),i(function(e){return{type:"UPDATE_DIARY_TIME_INTERVAL",value:e}}(b.interval)),m.push("/org/"+a+"/book")}function U(e){var a,n=Object(ce.a)(t.departments);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.uuid==e)return r.name}}catch(l){n.e(l)}finally{n.f()}}function B(e){console.log("booking"),i(w(!0)),i(T(e))}return r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred"},"Week Beginning: ",b.dates[b.dayIndex]))),r.a.createElement(A.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred-100"},b.holiday))),r.a.createElement(A.a,null,r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(S.a,{variant:"primary",onClick:function(){var a=de()(b.dates[0],"DD/MM/YYYY");a.subtract(1,"w");var t=de()();t.startOf("week"),a<t?O({heading:e.roomName,message:"You cannot go back previous from this week",open:!0}):C(a,b.times)}},"-"),r.a.createElement(S.a,{variant:"primary",onClick:function(){var e=de()(b.dates[0],"DD/MM/YYYY");e.add(1,"w"),C(e,b.times)}},"+")))),r.a.createElement(v.a,null,r.a.createElement("table",{className:"timetable-layout",width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:b.slotClass},"Session"),b.days.map((function(e,a){if(e)return r.a.createElement("td",{className:b.dayClass,key:a},o[a]," ",r.a.createElement("br",null)," ",b.dates[a])})))),r.a.createElement("tbody",null,b.times.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:b.slotClass},e),b.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var l=b.weekSlot+"-"+I(n)+"-"+e.replace(":","");return"single"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+e,onClick:function(){return B(b.data[l].uuid)}},b.data[l].user," ",r.a.createElement("br",null)," ",U(b.data[l].department)):"repeat"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:function(){return B(b.data[l].uuid)}},b.data[l].user," ",r.a.createElement("br",null)," ",U(b.data[l].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:N},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:N},"Book")}})))}))))),r.a.createElement(ue.a,{show:h.open,onHide:y},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,h.heading)),r.a.createElement(ue.a.Body,null,h.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:y},"Close"))))};var ge=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(u.c)((function(e){return e.bookings})),i=Object(u.c)((function(e){return e.user})),m=Object(u.b)(),d=Object(n.useState)({orgTitle:"",orgLocked:"",roomName:"Rooms",roomLayout:"",roomID:"",layoutData:{},view:!1,weekSystem:!1}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({open:!1,heading:"",message:""}),p=Object(c.a)(f,2),h=p[0],O=p[1],y=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),j=Object(c.a)(y,2),k=j[0],D=j[1];function T(){O((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function I(){D((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function N(){D({open:!1});var e={orgID:a,bookingID:o.bookingID};s.a.post("/booking/deleteBooking",e).then((function(e){"null"==e.data.error&&(O({heading:"Delete booking",message:"Booking deleted!",open:!0}),m(w(!1)),g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{view:!1})})),setTimeout((function(){g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{view:!0})}))}),100))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){document.title="STAFF",""!=l.roomName&&(console.log(l.roomName),g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{roomName:l.roomName,roomLayout:l.layoutData.layout,layoutData:l.layoutData,roomID:l.roomID,weekSystem:l.weekSystem})})),setTimeout((function(){g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{view:!0})}))}),100))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,t.name),t.locked?r.a.createElement("h2",null,"Organisation Locked"):null,r.a.createElement(v.a,null,r.a.createElement(A.a,null),r.a.createElement(A.a,{xs:8},r.a.createElement("div",{className:"roomLbl"},"Rooms:"),r.a.createElement(C.a,{className:"rooms"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},b.roomName),r.a.createElement(C.a.Menu,{className:"dropdown-items"},t.rooms.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:function(){!function(e,a,n,r){var l;g((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{roomName:e,roomLayout:"---",roomID:n,weekSystem:!1})}));var o,c=Object(ce.a)(t.layouts);try{for(c.s();!(o=c.n()).done;){var i=o.value;i.uuid==a&&(l=i)}}catch(s){c.e(s)}finally{c.f()}g((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{roomName:e,roomLayout:l.layout,roomID:n,weekSystem:"true"==r,layoutData:l,view:!1})})),m(w(!1)),setTimeout((function(){g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{view:!0})}))}),100)}(e.name,e.layout,e.uuid,e.weekSystem)}},e.name)}))))),r.a.createElement(A.a,null)),r.a.createElement(v.a,null,r.a.createElement(A.a,null),r.a.createElement(A.a,{xs:8},b.view?r.a.createElement("div",null,""!=b.roomLayout&&"Timetable"==b.roomLayout?r.a.createElement(Ee,{orgID:a,roomName:b.roomName,roomID:b.roomID,layoutData:b.layoutData,weekSystem:b.weekSystem}):null,""!=b.roomLayout&&"Diary"==b.roomLayout?r.a.createElement(be,{orgID:a,roomName:b.roomName,roomID:b.roomID,layoutData:b.layoutData,weekSystem:b.weekSystem}):null):null),r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"row-nothing"},r.a.createElement(S.a,{disabled:!0},"Test"))),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:o.editBooking?"edit-booking-show":"edit-booking-hide"},r.a.createElement("strong",null,"Booking Details"),r.a.createElement("div",{className:"align-left"},r.a.createElement("br",null),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,"User:")),r.a.createElement(A.a,null,o.user)),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,"Department:")),r.a.createElement(A.a,null,o.department)),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,"Class:")),r.a.createElement(A.a,null,o.sessionDes)),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("br",null),r.a.createElement("strong",null,"Session Length:")),r.a.createElement(A.a,null,r.a.createElement("br",null),o.sessionLength)),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,"Booking Type:")),r.a.createElement(A.a,null,o.bookingType)),"Repeat - weekly"==o.bookingType||"Repeat - Daily"==o.bookingType?r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,"Repeat Until:")),r.a.createElement(A.a,null,o.bookingUntil))):null,""!=o.comments?r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("br",null),r.a.createElement("strong",null,"Comments"))),r.a.createElement(v.a,null,r.a.createElement(A.a,null,o.comments))):null,r.a.createElement("br",null)," ",r.a.createElement("br",null),"user"!=i.role?r.a.createElement(S.a,{variant:"primary",onClick:function(){D({heading:"Delete Booking",message:"Are you sure you want to delete this booking?",acceptFunction:N,acceptName:"Yes",showAccept:!0,showCancel:!0,cancelName:"No",open:!0})}},"Delete"):null)))))))),r.a.createElement(ue.a,{show:h.open,onHide:T},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,h.heading)),r.a.createElement(ue.a.Body,null,h.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:T},"Close"))),r.a.createElement(ue.a,{show:k.open,onHide:I},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,k.heading)),r.a.createElement(ue.a.Body,null,k.message),r.a.createElement(ue.a.Footer,null,k.showAccept?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:k.acceptFunction},k.acceptName)):null,k.showCancel?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:I},k.cancelName)):null)))},fe=t(16),pe=t(117);var he=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.globalVars}));return r.a.createElement("div",null,r.a.createElement(pe.a,{body:!0,className:"collides_bookingSlot"},r.a.createElement(v.a,null,"Booking - Room: ",e.roomName),r.a.createElement(v.a,null,r.a.createElement(A.a,null,"User: ",r.a.createElement("br",null),e.user),r.a.createElement(A.a,null,"Description: ",r.a.createElement("br",null),e.sessionDes),r.a.createElement(A.a,null,"Booking Type:",r.a.createElement("br",null)," ",e.bookingType," - ",e.repeatType),r.a.createElement(A.a,null,"Start Date: ",r.a.createElement("br",null)," ",e.startDate),r.a.createElement(A.a,null,"Session: ",e.session),r.a.createElement(A.a,null,"Session Length: ",e.sessionTotal),r.a.createElement(A.a,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){return function(n){var r={orgID:e.orgID,bookingUUID:n};s.a.post("/collide/deleteBooking",r).then((function(e){"null"==e.data.error&&(t.collideBookingsUpdate?a(re(!1)):a(re(!0)))})).catch((function(e){console.log(e)}))}(e.uuid)}},"Delete")))))};var Oe=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.globalVars}));return r.a.createElement("div",null,r.a.createElement(pe.a,{body:!0,className:"collides_collideSlot"},r.a.createElement(v.a,null,"Collided Booking"),r.a.createElement(v.a,null,r.a.createElement(A.a,null,"User: ",r.a.createElement("br",null),e.user),r.a.createElement(A.a,null,"Description: ",r.a.createElement("br",null),e.sessionDes),r.a.createElement(A.a,null,"Booking Type:",r.a.createElement("br",null)," ",e.bookingType),r.a.createElement(A.a,null,"Start Date: ",r.a.createElement("br",null)," ",e.startDate),r.a.createElement(A.a,null,"Session: ",e.session),r.a.createElement(A.a,null,"Session Length: ",e.sessionTotal),r.a.createElement(A.a,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){return function(n,r){var l={orgID:e.orgID,bookingUUID:n,collideUUID:r};s.a.post("/collide/deleteCollide",l).then((function(e){"null"==e.data.error&&(t.collideBookingsUpdate?a(re(!1)):a(re(!0)))})).catch((function(e){console.log(e)}))}(e.bookingUUID,e.uuid)}},"Delete")))))};var ye=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(D.f)(),i=Object(n.useState)({bookings:[]}),m=Object(c.a)(i,2),d=m[0],E=m[1];function b(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}return Object(n.useEffect)((function(){!function(){if(t.locked){var e=Object(fe.a)({orgID:a},"orgID",a);s.a.post("/organisation/collidedbookings",e).then((function(e){var n=e.data;"null"!=n.error?o.push("/org/"+a+"/organisationAdmin"):n.bookings.length>0?function(e,a,n){var r,l=Object(ce.a)(e);try{for(l.s();!(r=l.n()).done;){var o,c=r.value,i=c.sessions.split(",")[0].split("-")[1],s="",u="",m=Object(ce.a)(t.rooms);try{for(m.s();!(o=m.n()).done;){var d=o.value;d.uuid==c.roomID&&(c.roomName=d.name,s=d.layout)}}catch(B){m.e(B)}finally{m.f()}var g,f=Object(ce.a)(t.layouts);try{for(f.s();!(g=f.n()).done;){var p=g.value;p.uuid==s&&(u=p.layout)}}catch(B){f.e(B)}finally{f.f()}if("Timetable"==u){var h,O=Object(ce.a)(n);try{for(O.s();!(h=O.n()).done;){var y=h.value;y.layoutUUID==s&&b(y.id)==i&&(i.includes("b")?""!=y.breakText?c.firstSession=y.breakText:c.firstSession=i:""!=y.customText?c.firstSession=y.customText:c.firstSession=i)}}catch(B){O.e(B)}finally{O.f()}}else"Diary"==u&&(c.firstSession=i[0]+i[1]+":"+i[2]+i[3]);var v,A=c.collideUUID.split(","),j=[],k=Object(ce.a)(A);try{for(k.s();!(v=k.n()).done;){var D,w=v.value,T=Object(ce.a)(a);try{for(T.s();!(D=T.n()).done;){var I=D.value;if(I.uuid==w){var C=I.sessions.split(",")[0].split("-")[1];if("Timetable"==u){var S,N=Object(ce.a)(n);try{for(N.s();!(S=N.n()).done;){var U=S.value;U.layoutUUID==s&&b(U.id)==C&&(C.includes("b")?""!=U.breakText?I.firstSession=U.breakText:I.firstSession=C:""!=U.customText?I.firstSession=U.customText:I.firstSession=C)}}catch(B){N.e(B)}finally{N.f()}}else"Diary"==u&&(I.firstSession=C[0]+C[1]+":"+C[2]+C[3]);j.push(I)}}}catch(B){T.e(B)}finally{T.f()}}}catch(B){k.e(B)}finally{k.f()}c.collideBookings=j}}catch(B){l.e(B)}finally{l.f()}E((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{bookings:e})}))}(n.bookings,n.collides,n.sessions):o.push("/org/"+a+"/organisationAdmin")})).catch((function(e){console.log(e)}))}else o.push("/org/"+a)}()}),[l.collideBookingsUpdate]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Collision Bookings"),r.a.createElement("br",null),d.bookings.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(he,{orgID:a,uuid:e.uuid,roomName:e.roomName,user:e.user,sessionDes:e.sessionDes,bookingType:e.bookingType,repeatType:e.repeatType,startDate:e.startDate,sessionTotal:e.sessionTotal,session:e.firstSession}),d.bookings[t].collideBookings.map((function(t,n){return r.a.createElement(Oe,{orgID:a,bookingUUID:e.uuid,uuid:t.uuid,key:n,user:t.user,sessionDes:t.sessionDes,bookingType:t.bookingType,startDate:t.startDate,sessionTotal:t.sessionTotal,session:t.firstSession})})),r.a.createElement("br",null))})))))};var ve=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.user})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(u.b)(),i=Object(n.useState)({organisation:{}}),m=Object(c.a)(i,2),d=m[0],E=m[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),p=f[0],h=f[1];function y(){l.forceSignIn?(o(oe(!0)),o(le(!1))):(o(oe(!0)),o(le(!0))),h((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}return Object(n.useEffect)((function(){!function(){var e={orgID:a};s.a.post("/organisation/getSARData",e).then((function(e){console.log(e.data.org),E({organisation:e.data.org})})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",{className:"body changeOfSenior"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Change of Senior Admin Request"),r.a.createElement("br",null),r.a.createElement("p",null,"You are viewing this screen because ",d.organisation.POC_Name," has requested a change of Senior Admin role to you. "),r.a.createElement("p",null,"This means that you will be responible for the admin side of your organisation."),r.a.createElement("p",null,"If you require help, please speak to ",d.organisation.POC_Name," or contact High-View Studios"),r.a.createElement("p",null,"Do you want to Accept or Decline this invitation?"),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){var e,n=(e={orgID:a},Object(fe.a)(e,"orgID",a),Object(fe.a)(e,"invate","Accept"),Object(fe.a)(e,"newUserID",t.uuid),e);s.a.post("/organisation/SAInvate",n).then((function(e){console.log(e.data),"Senior Admin Updated"==e.data.message&&(o(b(e.data.role)),o(O("")),h({heading:"Request Accepted",open:!0}))})).catch((function(e){console.log(e)}))}},"Accept")),r.a.createElement(A.a,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){var e,n=(e={orgID:a},Object(fe.a)(e,"orgID",a),Object(fe.a)(e,"invate","Decline"),Object(fe.a)(e,"newUserID",t.uuid),e);s.a.post("/organisation/SAInvate",n).then((function(e){"Senior Admin Request Declined"==e.data.message&&(o(O("")),l.forceSignIn?(o(oe(!0)),o(le(!1))):(o(oe(!0)),o(le(!0))))})).catch((function(e){console.log(e)}))}},"Decline"))))),r.a.createElement(ue.a,{show:p.open,onHide:y},r.a.createElement(ue.a.Header,null,r.a.createElement(ue.a.Title,null,p.heading)),r.a.createElement(ue.a.Body,null,r.a.createElement("p",null,"You are now the Senior Admin of this organisation."),r.a.createElement("p",null,"To get to the Admin side, go on the organisation page drop-down at the top-right of the screen")),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:y},"Close"))))},Ae=t(25),je=Object(n.createContext)();var ke=function(e){var a=Object(n.useState)({uuid:0,fromDetails:!1}),t=Object(c.a)(a,2),l=t[0],o=t[1];return r.a.createElement(je.Provider,{value:{GUser:l,setGUserID:function(e){o((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{uuid:e})}))},setFromDetails:function(e){o((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{fromDetails:e})}))}}},e.children)},De=t(18),we=t(483);var Te=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),l=Object(n.useContext)(je).GUser,o=Object(D.f)(),i=Object(n.useState)({name:"",email:"",roles:!0,role_User:!1,role_Admin:!1,role_SeniorAdmin:!1,departments:[],depToUser:""}),m=Object(c.a)(i,2),d=m[0],E=m[1],b=Object(n.useState)({open:!1}),g=Object(c.a)(b,2),f=g[0],p=g[1];function h(){p((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}var O=Object(n.useState)({open:!1,heading:"",message:""}),y=Object(c.a)(O,2),j=y[0],k=y[1];function w(){k((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}var T=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),I=Object(c.a)(T,2),C=I[0],N=I[1],U=Object(n.useState)({open:!1,heading:"",message:"",option1Function:"",option1Name:"",showOption1:!1,option2Function:"",option2Name:"",showOption2:!1}),x=Object(c.a)(U,2),R=x[0],Y=x[1];function L(){N((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function M(e){var a=e.target.name;"role_User"==a&&E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_Admin:!1,role_User:!0})})),"role_Admin"==a&&E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_Admin:!0,role_User:!1})}))}function P(e){var a,n=e.split(","),r=[],l=Object(ce.a)(n);try{for(l.s();!(a=l.n()).done;){var o,c=a.value,i=Object(ce.a)(t.departments);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.uuid==c&&r.push(s.name)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){l.e(u)}finally{l.f()}return r}function Q(e){var a=e.target,t=a.name,n=a.value;E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,n))}))}function F(){Y({open:!1});var e={orgID:a,uuid:l.uuid,method:"google"};s.a.post("/organisaation/changeUserLoginMethod",e).then((function(e){"Strategy Updated"==e.data.message&&k({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}function G(){Y({open:!1});var e={orgID:a,uuid:l.uuid,method:"local"};s.a.post("/organisaation/changeUserLoginMethod",e).then((function(e){"Strategy Updated"==e.data.message&&k({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}function H(){N({open:!1});var e={uuid:l.uuid,orgID:a};s.a.post("/organisation/removeUser",e).then((function(e){"User removed successfully"==e.data.message&&(k((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Remove User",message:"User has been removed and deleted",open:!0})})),o.push("/org/"+a+"/organisationAdmin"))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){!function(){var e={uuid:l.uuid};s.a.post("/organisation/getJustUser",e).then((function(e){var t=e.data;console.log(t),"no user"==t.error?o.push("/org/"+a+"/organisationAdmin"):E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{name:t.user.displayName,email:t.user.email,departments:P(t.user.departments)})})),"seniorAdmin"==t.user.role?E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{roles:!1,role_SeniorAdmin:!0,role_Admin:!1,role_User:!1})})):"admin"==t.user.role?E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{roles:!0,role_SeniorAdmin:!1,role_Admin:!0,role_User:!1})})):"user"==t.user.role&&E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{roles:!0,role_SeniorAdmin:!1,role_Admin:!1,role_User:!0})}))})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",null,r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"User Details"),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:"normal-text"},r.a.createElement(De.a,null,r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblName"},r.a.createElement("strong",null,"Name:")),r.a.createElement(De.a.Control,{id:"txtName",name:"name",type:"text",value:d.name,onChange:Q}))),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblEmail"},r.a.createElement("strong",null,"Email:")),r.a.createElement(De.a.Control,{id:"txtEmail",name:"email",type:"text",value:d.email,onChange:Q}))),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement("div",{className:d.roles?null:"roles-hidden"},r.a.createElement(De.a.Label,{id:"lblRole"},r.a.createElement("strong",null,"Role:")),r.a.createElement(De.a.Check,{id:"radRoleUser",type:"radio",name:"role_User",checked:d.role_User,onChange:M,label:"User"}),r.a.createElement(De.a.Check,{id:"radRoleAdmin",type:"radio",name:"role_Admin",checked:d.role_Admin,onChange:M,label:"Admin"})))),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblDepartmentsTitle"},r.a.createElement("strong",null,"Departments:"))," ",r.a.createElement("br",null),0==d.departments.length?r.a.createElement("div",{className:"departments-hidden"},r.a.createElement(De.a.Label,null,"---")):r.a.createElement("div",null,r.a.createElement(De.a.Label,{id:"lblDepartments"},d.departments.toString()))))))),r.a.createElement(A.a,null,r.a.createElement("h3",null,r.a.createElement("strong",null,"Departments")),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(S.a,{onClick:function(){d.departments.includes(d.depToUser)||E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{departments:[].concat(Object(Ae.a)(d.departments),[d.depToUser])})}))}},"Add"),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){if(d.departments.includes(d.depToUser)){var e=d.departments.filter((function(e){return e!=d.depToUser}));E((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{departments:e})}))}}},"Remove")),r.a.createElement(A.a,null,r.a.createElement("div",{className:"scrollable-250 normal-text"},r.a.createElement(we.a,null,t.departments.map((function(e,a){return r.a.createElement(we.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.name,E((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{depToUser:a})}))}},e.name)})))),r.a.createElement("div",{className:"add-button"},r.a.createElement(S.a,{onClick:function(){var e=function(){var e,a=[],n=Object(ce.a)(t.departments);try{for(n.s();!(e=n.n()).done;){var r=e.value;d.departments.includes(r.name)&&a.push(r.uuid)}}catch(l){n.e(l)}finally{n.f()}return console.log(a),a.toString()}(),n="";d.role_SeniorAdmin&&(n="seniorAdmin"),d.role_User&&(n="user"),d.role_Admin&&(n="admin");var r={uuid:l.uuid,name:d.name,email:d.email,role:n,departments:e,orgID:a};s.a.post("/organisation/updateUser",r).then((function(e){"User updated successfully"==e.data.message&&k((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Update User",message:"User has been updated",open:!0})}))})).catch((function(e){console.log(e)}))}},"Update User"))))),r.a.createElement(A.a,null,r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement("strong",null,"Advanced Actions")),r.a.createElement(S.a,{onClick:function(){p({open:!0})}},"S/A Request")," ",r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){var e={uuid:l.uuid};s.a.post("/organisation/getUserLoginMethod",e).then((function(e){var t=e.data.method;if(""==t){var n=e.data.name+" has not logged into the website yet, you can choose which method you want them to log in with.";Y({heading:"Change Login Method",message:n,option1Name:"Local",option2Name:"Google",option1Function:G,option2Function:F,showOption1:!0,showOption2:!0,open:!0})}else{var r;"local"==t?r="google":"google"==t&&(r="local");var o=e.data.name+"'s login method is "+t+". Are you sure you want to change it to a "+r+" method?";N({heading:"Change Login Method",message:o,acceptName:"Yes",acceptFunction:function(){!function(e,a,t){N({open:!1});var n={orgID:t,uuid:e,method:a};s.a.post("/organisaation/changeUserLoginMethod",n).then((function(e){"Strategy Updated"==e.data.message&&k({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}(l.uuid,r,a)},showAccept:!0,cancelName:"No",showCancel:!0,open:!0})}})).catch((function(e){console.log(e)}))}},"Change Login Method"),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){d.role_SeniorAdmin?k({heading:"Remove User",message:"You cannot delete a Senior Admin",open:!0}):N({heading:"Remove User",message:"Are you sure you want to remove this user and all their bookings?",acceptName:"Yes",acceptFunction:H,showAccept:!0,showCancel:!0,cancelName:"No",open:!0})}},"Remove")))))),r.a.createElement(ue.a,{show:j.open,onHide:w},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,j.heading)),r.a.createElement(ue.a.Body,null,j.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:w},"Close"))),r.a.createElement(ue.a,{show:f.open,onHide:h},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Change of Senior Admin Request")),r.a.createElement(ue.a.Body,null,r.a.createElement("p",null,"You are requesting ",d.name," to change roles to the Senior Admin of this organisation. You can only have ONE Senior Admin per organisation, so this means you will not have access to the administrator panel for this organisation. Your role will change to Admin"),r.a.createElement("p",null,"This user will also be to new \u2018point of contact\u2019 for High-View Studios."),r.a.createElement("p",null,"This user will be sent an email and they have to accept the request. In the meantime you will still have access."),r.a.createElement("p",null,"You and High-View Studios will be notified when this request has been accepted."),r.a.createElement("p",null,"Do you want to continue?")),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,newUUID:l.uuid};s.a.post("/organisation/changeSeniorAdmin",e).then((function(e){"Request sent successfully"==e.data.message&&(p({open:!1}),k({heading:"Change of Senior Admin Request",message:"A request has been sent to "+d.name,open:!0}))})).catch((function(e){console.log(e)}))}},"Yes"),r.a.createElement(S.a,{variant:"primary",onClick:h},"No"))),r.a.createElement(ue.a,{show:C.open,onHide:L},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,C.heading)),r.a.createElement(ue.a.Body,null,C.message),r.a.createElement(ue.a.Footer,null,C.showAccept?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:C.acceptFunction},C.acceptName)):null,C.showCancel?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:L},C.cancelName)):null)),r.a.createElement(ue.a,{show:R.open,onHide:function(){Y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,R.heading)),r.a.createElement(ue.a.Body,null,R.message),r.a.createElement(ue.a.Footer,null,R.showOption1?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:R.option1Function},R.option1Name)):null,R.showOption2?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:R.option2Function},R.option2Name)):null)))};var Ie=function(e){var a=e.match.params.id,t=Object(D.f)(),l=Object(n.useState)(""),o=Object(c.a)(l,2),i=o[0],m=o[1],d=Object(n.useState)(!1),E=Object(c.a)(d,2),b=E[0],g=E[1];return Object(u.b)(),Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Forgot your password?"),b?r.a.createElement("div",null,r.a.createElement("h3",null,"Your new password has been requested, please check your email"),r.a.createElement(S.a,{variant:"warning",onClick:function(){return t.push("/org/"+a+"/signIn")}},"Back to Sign In"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("h3",null,"Please enter your email below:"),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement(De.a.Control,{id:"txtEmail",type:"email",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,i),r.a.createElement(S.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtEmail").value;if(""!=a){var t={email:a};s.a.post("/requestPassword/",t).then((function(e){"Yes"==e.data.userError?m(e.data.message):g(!0)})).catch((function(e){console.log(e)}))}}},"Request New Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null)))))};var Ce=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)(!1),m=Object(c.a)(i,2),d=m[0],E=m[1],b=Object(u.b)(),g=Object(u.c)((function(e){return e.globalVars}));return Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Please create a new password"),r.a.createElement("form",null,r.a.createElement("label",{id:"lblCurrentPassword"},"Current Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtCurrentPassword",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblNewPassword"},"New Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtNewPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{id:"lblConfirmPassword"},"Confirm Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtConfirmPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,l),d?r.a.createElement("div",{className:"password-help-text"},"Your password must contain at least 1 uppercase, 1 lowercase, 1 number & 1 special character. It also requires to be a minimum 8 characters in length"):null,r.a.createElement(S.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtCurrentPassword").value,t=document.getElementById("txtNewPassword").value,n=document.getElementById("txtConfirmPassword").value;if(""!=a&&""!=t&&""!=n){var r={oldPassword:a,newPassword:t,confirmPassword:n};s.a.post("/changePassword",r).then((function(e){"Yes"==e.data.userError?"Your password is not strong enough"==e.data.message?(o(e.data.message),E(!0)):(E(!1),o(e.data.message)):"Updated user password"==e.data.message&&(b(f(e.data.user.requestedPassword)),g.forceSignIn?(b(oe(!0)),b(le(!1))):(b(oe(!0)),b(le(!0))))})).catch((function(e){console.log(e)}))}}},"Set Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null))))};var Se=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)(!1),m=Object(c.a)(i,2),d=m[0],E=m[1],b=Object(u.b)(),f=Object(u.c)((function(e){return e.globalVars}));return Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Hello, and welcome to My STAFF"),r.a.createElement("h3",null,"Please create a new password"),r.a.createElement("form",null,r.a.createElement("label",{id:"lblCurrentPassword"},"Current Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtCurrentPassword",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblNewPassword"},"New Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtNewPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{id:"lblConfirmPassword"},"Confirm Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtConfirmPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,l),d?r.a.createElement("div",{className:"password-help-text"},"Your password must contain at least 1 uppercase, 1 lowercase, 1 number & 1 special character. It also requires to be a minimum 8 characters in length"):null,r.a.createElement(S.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtCurrentPassword").value,t=document.getElementById("txtNewPassword").value,n=document.getElementById("txtConfirmPassword").value;if(""!=a&&""!=t&&""!=n){var r={oldPassword:a,newPassword:t,confirmPassword:n};s.a.post("/createPassword",r).then((function(e){"Yes"==e.data.userError?"Your password is not strong enough"==e.data.message?(o(e.data.message),E(!0)):(E(!1),o(e.data.message)):"Updated user first password"==e.data.message&&(b(g(e.data.user.new)),f.forceSignIn?(b(oe(!0)),b(le(!1))):(b(oe(!0)),b(le(!0))))})).catch((function(e){console.log(e)}))}}},"Set Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null))))};var Ne=function(e){e.match.params.id;var a=Object(u.c)((function(e){return e.globalVars})),t=(Object(u.c)((function(e){return e.user})),Object(D.f)(),Object(u.b)());return Object(n.useEffect)((function(){document.title="STAFF - Not Connected"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h3",null,"Sorry, this is not your organisation"),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(S.a,{variant:"warning",onClick:function(){a.forceSignIn?(t(oe(!0)),t(le(!1))):(t(oe(!0)),t(le(!0)))}},"Back to my organisation"),r.a.createElement("br",null),r.a.createElement("br",null))))},Ue=t(211),Be=(t(251),t(111)),_e=t(110),xe=t(33),Re=t.n(xe),Ye=t(34),Le=t.n(Ye);var Me=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.b)(),o=Object(n.useState)({open:!1,auth_local:!1,auth_google:!1,message:"",save:!1,showSave:!1}),i=Object(c.a)(o,2),m=i[0],d=i[1],E=new Ue.a.Tour({defaultStepOtions:{classes:"shepherd",scrollTo:!0},useModalOverlay:!0});function b(e){var a=e.target,t=a.name,n=a.checked;d((function(e){var a;return Object(ie.a)(Object(ie.a)({},e),{},(a={},Object(fe.a)(a,t,Boolean(n)),Object(fe.a)(a,"showSave",!0),a))})),console.log(t)}return E.addStep({id:"example-step",title:"Message",text:"This step is attached to the bottom of the <code>.example-css-selector</code> element.",attachTo:{element:".example-class-selector",on:"bottom"},classes:"",buttons:[{text:"NEXT",action:E.next}]}),r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(_e.a,{className:"plus-image",src:m.open?Le.a:Re.a,onClick:function(){m.open?d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})})):d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{auth_local:t.signInLocal,auth_google:t.signInGoogle,message:t.message,open:!0})}))}})," Login Settings"),r.a.createElement("br",null),r.a.createElement(Be.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},r.a.createElement(S.a,{variant:"primary",onClick:function(){E.start()}},"Tour")),r.a.createElement("div",{className:"normal-text"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(De.a,null,"Login Options:",r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Check,{id:"LoginSettings_ckbLocal",name:"auth_local",type:"checkbox",checked:m.auth_local,onChange:b,label:"Local Login"})),r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Check,{id:"LoginSettings_ckbGoogle",name:"auth_google",type:"checkbox",checked:m.auth_google,onChange:b,label:"Google Login"})),r.a.createElement(De.a.Label,{className:"example-class-selector",id:"LoginSettings_lblMessage"},"Login Message:"),r.a.createElement("br",null),r.a.createElement(De.a.Control,{id:"LoginSettings_txtMessage",name:"message",value:m.message,onChange:function(e){var a=e.target,t=a.name,n=a.value;d((function(e){var a;return Object(ie.a)(Object(ie.a)({},e),{},(a={},Object(fe.a)(a,t,n),Object(fe.a)(a,"showSave",!0),a))}))},type:"text",required:!0}))),r.a.createElement(A.a,null))),r.a.createElement("div",{className:m.showSave?"submit-button-show":"submit-button-hidden"},r.a.createElement(S.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault();var t=document.getElementById("LoginSettings_ckbLocal").checked,n=document.getElementById("LoginSettings_ckbGoogle").checked,r=document.getElementById("LoginSettings_txtMessage").value,o={orgID:a,auth_local:t.toString(),auth_google:n.toString(),message:r};s.a.post("/organisation/updateLoginSettings",o).then((function(e){if("Login settings updated successfully"==e.data.message){l(L(t)),l(M(n)),l(P(r)),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{save:!0})}));setTimeout((function(){d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{save:!1,showSave:!1,open:!1})}))}),2e3)}})).catch((function(e){console.log(e)}))}},"Save")," ",m.save?"Saved!":null))))))))};var Pe=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.b)(),o=Object(n.useState)({uuid:0,activeRemove:!1}),i=Object(c.a)(o,2),m=i[0],d=i[1],E=Object(n.useState)({open:!1,saved:!1,showSave:!1,useDepartments:!1,aname:"",names:[]}),b=Object(c.a)(E,2),g=b[0],f=b[1],p=Object(n.useState)({open:!1,heading:"",message:""}),h=Object(c.a)(p,2),O=h[0],y=h[1];function j(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(_e.a,{className:"plus-image",src:g.open?Le.a:Re.a,onClick:function(){g.open?f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})})):f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{useDepartments:t.useDepartments,names:t.departments,open:!0})}))}})," Departments"),r.a.createElement("br",null),r.a.createElement(Be.a,{in:g.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(De.a,null,r.a.createElement(De.a.Check,{id:"chkUseDepartments",name:"useDepartments",label:"Use Departments",checked:g.useDepartments,onChange:function(e){var t=e.target,n=t.name,r=t.checked;console.log(r),f((function(e){var a;return Object(ie.a)(Object(ie.a)({},e),{},(a={},Object(fe.a)(a,n,r),Object(fe.a)(a,"showSave",!0),a))}));var o={useDepartments:r.toString(),orgID:a};s.a.post("/organisation/updateUseDepartments",o).then((function(e){console.log(e.data.useDepartments),l(Q(g.useDepartments))})).catch((function(e){console.log(e)}))}}),r.a.createElement("br",null),r.a.createElement("p",null,"Add new department:"),r.a.createElement(De.a.Control,{type:"text",value:g.aname,name:"aname",onChange:function(e){var a=e.target,t=a.name,n=a.value;f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,n))}))}}),r.a.createElement("div",{className:"add-button"},r.a.createElement(S.a,{onClick:function(){if(function(e){var a,n=!1,r=Object(ce.a)(t.departments);try{for(r.s();!(a=r.n()).done;){if(a.value.name==e){n=!0;break}}}catch(l){r.e(l)}finally{r.f()}return n}(g.aname))y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Add Deparment",message:"There is already a department with this name",open:!0})}));else{var e={orgID:a,departmentName:g.aname};s.a.post("/organisation/addDepartment",e).then((function(e){console.log(e.data),l(F(e.data.noOfDepartments)),l(G(e.data.departments)),f((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{names:e.data.departments,aname:""})}))})).catch((function(e){console.log(e)}))}}},"Add")))),r.a.createElement(A.a,null,"Departments:",r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(we.a,null,g.names.map((function(e,a){return r.a.createElement(we.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.uuid,d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{uuid:a,activeRemove:!0})})),console.log(a)}},e.name)})))),r.a.createElement("div",{className:m.activeRemove?"remove-button-show":"remove-button-hidden"},r.a.createElement(S.a,{onClick:function(){if(m.activeRemove){var e={orgID:a,uuid:m.uuid};s.a.post("/organisatiton/removeDepartment",e).then((function(e){console.log(e.data),l(G(e.data.departments)),f((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{names:e.data.departments})})),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{activeRemove:!1})}))})).catch((function(e){console.log(e)}))}}},"Remove"))))))))))),r.a.createElement(ue.a,{show:O.open,onHide:j},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,O.heading)),r.a.createElement(ue.a.Body,null,O.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:j},"Close"))))};var Qe=function(e){var a=Object(n.useContext)(je),t=a.GUser,l=a.setGUserID,o=a.setFromDetails,i=e.orgID,m=Object(u.c)((function(e){return e.organisation})),d=Object(D.f)();Object(n.useEffect)((function(){t.fromDetails&&(f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!0})})),k(),o(!1))}),[]);var E=Object(n.useState)({open:!1,name:"",email:"",role_User:!1,role_Admin:!1,role_SeniorAdmin:!1,multiAdd:!1,departments:[],depToUser:"",userDepartments:[],users:[],edit:!1,editID:0,roles:!0}),b=Object(c.a)(E,2),g=b[0],f=b[1],p=Object(n.useState)({open:!1,heading:"",message:""}),h=Object(c.a)(p,2),O=h[0],y=h[1];function j(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function k(){var e={orgID:i};s.a.post("/organisation/getUsers",e).then((function(e){console.log(e.data),f((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{users:e.data.users})}))})).catch((function(e){console.log(e)}))}function w(){var e,a=[],t=Object(ce.a)(m.departments);try{for(t.s();!(e=t.n()).done;){var n=e.value;g.userDepartments.includes(n.name)&&a.push(n.uuid)}}catch(r){t.e(r)}finally{t.f()}return console.log(a),a.toString()}function T(e){var a,t=e.split(","),n=[],r=Object(ce.a)(t);try{for(r.s();!(a=r.n()).done;){var l,o=a.value,c=Object(ce.a)(m.departments);try{for(c.s();!(l=c.n()).done;){var i=l.value;i.uuid==o&&n.push(i.name)}}catch(s){c.e(s)}finally{c.f()}}}catch(s){r.e(s)}finally{r.f()}return n}function I(e){var a=e.target.name;"role_User"==a&&f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_Admin:!1,role_User:!0})})),"role_Admin"==a&&f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_Admin:!0,role_User:!1})}))}function C(e){var a=e.target,t=a.name,n=a.value;f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,n))}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(_e.a,{className:"plus-image",src:g.open?Le.a:Re.a,onClick:function(){g.open?f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})})):(f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!0})})),k())}})," Users"),r.a.createElement("br",null),r.a.createElement(Be.a,{in:g.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(A.a,{className:"bordered"},r.a.createElement("strong",null,"User Details:"),r.a.createElement(De.a,null,r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblName"},"Name:"),r.a.createElement(De.a.Control,{id:"txtName",name:"name",type:"text",value:g.name,onChange:C}))),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblEmail"},"Email:"),r.a.createElement(De.a.Control,{id:"txtEmail",name:"email",value:g.email,type:"text",onChange:C}))),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement("div",{className:g.roles?null:"roles-hidden"},r.a.createElement(De.a.Label,{id:"lblRole"},"Role:"),r.a.createElement(De.a.Check,{id:"radRoleUser",type:"radio",name:"role_User",checked:g.role_User,onChange:I,label:"User"}),r.a.createElement(De.a.Check,{id:"radRoleAdmin",type:"radio",name:"role_Admin",checked:g.role_Admin,onChange:I,label:"Admin"})))),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblDepartmentsTitle"},"Departments:")," ",r.a.createElement("br",null),0==g.userDepartments.length?r.a.createElement("div",{className:"departments-hidden"},r.a.createElement(De.a.Label,null,"---")):r.a.createElement("div",null,r.a.createElement(De.a.Label,{id:"lblDepartments"},g.userDepartments.toString())))),r.a.createElement(De.a.Row,null,r.a.createElement("div",{className:"submit-button-show"},g.edit?r.a.createElement("div",null,r.a.createElement(S.a,{className:"side-by-side",variant:"primary",onClick:function(){f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{edit:!1,name:"",email:"",roles:!0,role_Admin:!1,role_User:!1,userDepartments:""})}))}},"Add New User")):r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:function(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Multiple Add",message:"The feature is not advailable yet",open:!0})}))}},"Add Multiple"),r.a.createElement(S.a,{variant:"primary",onClick:function(){if(""==g.name||""==g.email)y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Required",message:"Please fill in the name and email field.",open:!0})}));else if(g.role_User||g.role_Admin){var e=w(),a="";g.role_User&&(a="user"),g.role_Admin&&(a="admin");var t={orgID:i,name:g.name,email:g.email,role:a,departments:e};s.a.post("/organisation/addUser",t).then((function(e){var a=e.data;"Yes"==a.userError?y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Add User",message:a.message,open:!0})})):f((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{users:e.data.users,name:"",email:"",role_User:!1,role_Admin:!1,userDepartments:[]})}))})).catch((function(e){console.log(e)}))}else y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Role",message:"Please pick a role.",open:!0})}))}},"Add")))),r.a.createElement(De.a.Row,{className:g.edit?"user-edit":"user-edit edit-hidden"},r.a.createElement("div",null,r.a.createElement(S.a,{className:"side-by-side",variant:"primary",onClick:function(){var e=w(),a="";g.role_SeniorAdmin&&(a="seniorAdmin"),g.role_User&&(a="user"),g.role_Admin&&(a="admin");var t={uuid:g.editID,name:g.name,email:g.email,role:a,departments:e,orgID:i};s.a.post("/organisation/updateUser",t).then((function(e){var a=e.data;"User updated successfully"==a.message&&(y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Update User",message:"User has been updated",open:!0})})),f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{users:a.users,edit:!1})})))})).catch((function(e){console.log(e)}))}},"Update"))))),r.a.createElement(A.a,{className:"bordered"},r.a.createElement("strong",null,"Departments:"),r.a.createElement("div",{className:"scrollable-250"},r.a.createElement(we.a,null,m.departments.map((function(e,a){return r.a.createElement(we.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.name,f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{depToUser:a})}))}},e.name)})))),r.a.createElement("div",{className:"add-button"},r.a.createElement(S.a,{onClick:function(){if(g.userDepartments.includes(g.depToUser)){var e=g.userDepartments.filter((function(e){return e!=g.depToUser}));f((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{userDepartments:e})}))}}},"Remove"),r.a.createElement(S.a,{onClick:function(){g.userDepartments.includes(g.depToUser)||f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{userDepartments:[].concat(Object(Ae.a)(g.userDepartments),[g.depToUser])})}))}},"Add"))))),r.a.createElement(A.a,null,"Users: ",r.a.createElement("br",null),"Single Click on a user to make quick changes on the left, or Double Click to see Advanced Actions",r.a.createElement("div",{className:"scrollable-250"},r.a.createElement(we.a,null,g.users.map((function(e,a){var t="";return t="seniorAdmin"==e.role?e.displayName+" (Senior Admin)":"admin"==e.role?e.displayName+" (Admin)":e.displayName,r.a.createElement(we.a.Item,{key:a,action:!0,onDoubleClick:function(){var a;a=e.uuid,l(a),o(!0),d.push("/org/"+i+"/userDetails")},onClick:function(){!function(e,a,t,n,r){f((function(n){return Object(ie.a)(Object(ie.a)({},n),{},{name:a,email:t,userDepartments:T(r),edit:!0,editID:e})})),"seniorAdmin"==n?f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_SeniorAdmin:!0,role_Admin:!1,role_User:!1,roles:!1})})):"user"==n?f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_User:!0,role_SeniorAdmin:!1,role_Admin:!1,roles:!0})})):"admin"==n&&f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{role_Admin:!0,role_SeniorAdmin:!1,role_User:!1,roles:!0})}))}(e.uuid,e.displayName,e.email,e.role,e.departments)}},t)}))))))))))))),r.a.createElement(ue.a,{show:O.open,onHide:j},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,O.heading)),r.a.createElement(ue.a.Body,null,O.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:j},"Close"))))};var Fe=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.b)(),o=Object(n.useState)({open:!1,layout:"Layout",layoutUUID:0,name:"",rooms:[],newAdd:!1,layouts:!1,editRoom:!1,roomUUID:0,yourLayouts:[],weekSystem:!1,editAdd:!1}),i=Object(c.a)(o,2),m=i[0],d=i[1],E=Object(n.useState)({open:!1,heading:"",message:""}),b=Object(c.a)(E,2),g=b[0],f=b[1],p=Object(n.useState)({open:!1,heading:"",message:""}),h=Object(c.a)(p,2),O=h[0],y=h[1];function j(){f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function k(e,a){console.log(a),d(e===a?function(e){return Object(ie.a)(Object(ie.a)({},e),{},{newAdd:!1,layouts:!1,editAdd:!1})}:function(e){return Object(ie.a)(Object(ie.a)({},e),{},{newAdd:!0,layouts:!0,editAdd:!0})})}function D(e){var a,t=Object(ce.a)(m.yourLayouts);try{for(t.s();!(a=t.n()).done;){var n=a.value;if(n.uuid==e)return n.name}}catch(r){t.e(r)}finally{t.f()}}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(_e.a,{className:"plus-image",src:m.open?Le.a:Re.a,onClick:function(){if(m.open)d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}));else{var e={orgID:a};s.a.post("/organisation/getLayouts",e).then((function(e){d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{open:!0,yourLayouts:e.data.layouts})}))})).catch((function(e){console.log(e)}))}var n={orgID:a};s.a.post("/organisation/getRooms",n).then((function(e){var a=e.data;console.log(a),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{rooms:a.rooms})}))})).catch((function(e){console.log(e)})),k(t.allocatedRooms,t.redeemedRooms)}})," Rooms"),r.a.createElement("br",null),r.a.createElement(Be.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:m.newAdd&&m.yourLayouts.length>0?"rooms-add":"rooms-add rooms-hide"},r.a.createElement(De.a,null,r.a.createElement(De.a.Group,null,r.a.createElement(De.a.Label,{id:"lblName"},"Name:"),r.a.createElement(De.a.Control,{id:"txtName",value:m.name,onChange:function(e){var a=e.target.value;d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{name:a})}))}})))),r.a.createElement("div",{className:m.layouts&&m.yourLayouts.length>0?"":"rooms-hide"},r.a.createElement(De.a,null,r.a.createElement(De.a.Group,null,r.a.createElement(De.a.Label,{className:"side-by-side",id:"lblName"},"Layout:"),r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},m.layout),r.a.createElement(C.a.Menu,{className:"dropdown-items"},m.yourLayouts.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:function(){!function(e,a){d((function(t){return Object(ie.a)(Object(ie.a)({},t),{},{layout:a,layoutUUID:e})}))}(e.uuid,e.name)}},e.name)})))),m.newAdd?r.a.createElement("div",{className:"centred"},r.a.createElement(De.a.Check,{type:"checkbox",checked:m.weekSystem,onChange:function(e){var t=e.target.checked;if(t){var n={orgID:a};s.a.post("/organisation/getMainOrgWeekSystem",n).then((function(e){console.log(e.data),"false"==e.data.weekSystem?(f({heading:"Week System",message:"You cannot turn on a room week system until you turn on the main week system in the 'Week System / Holidays' tab",open:!0}),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:!1})}))):d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:t})}))})).catch((function(e){console.log(e)}))}else d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:t})}))},label:"Use week system"})):null,m.editRoom&&m.yourLayouts.length>0?r.a.createElement("div",{className:"centred"},"Week System: ",m.weekSystem?" Enabled":" Disabled"):null)))),r.a.createElement(v.a,{className:"add-button"},m.newAdd&&m.yourLayouts.length>0?r.a.createElement(S.a,{variant:"primary",onClick:function(){if(""===m.name)f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Add Room",message:"The room requires a Name",open:!0})}));else if(function(e){var a,t=!1,n=Object(ce.a)(m.rooms);try{for(n.s();!(a=n.n()).done;){if(a.value.name==e){t=!0;break}}}catch(r){n.e(r)}finally{n.f()}return t}(m.name))f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Add Room",message:"A room with the same name already exists",open:!0})}));else if("Layout"===m.layout)f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Add Room",message:"The room requires a Layout",open:!0})}));else{var e={orgID:a,name:m.name,layout:m.layoutUUID,weekSystem:m.weekSystem};s.a.post("/organisation/addRoom",e).then((function(e){var a=e.data;"Successfully added room"===a.message&&(l(H(a.redeemedRooms)),l(K(a.rooms)),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{rooms:a.rooms,name:"",layout:"layout",weekSystem:!1})})),k(t.allocatedRooms,a.redeemedRooms))})).catch((function(e){console.log(e)}))}}},"Add"):null,m.editRoom&&m.yourLayouts.length>0?r.a.createElement("div",null,m.editAdd?r.a.createElement(S.a,{variant:"primary",onClick:function(){d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{editRoom:!1,layouts:!1})})),k(t.allocatedRooms,t.redeemedRooms)}},"Add New Room"):null,r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:m.roomUUID,layout:m.layoutUUID};s.a.post("/organisation/updateRoom",e).then((function(e){"Updated Room"==e.data.message&&(d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{rooms:e.data.rooms,roomUUID:0,editRoom:!1,layouts:!1})})),k(t.allocatedRooms,t.redeemedRooms))})).catch((function(e){console.log(e)}))}},"Update")):null),r.a.createElement(v.a,null,r.a.createElement("div",{className:0==m.yourLayouts.length?"rooms-layoutText":"rooms-layoutText rooms-hide"},r.a.createElement("strong",null,"There are no layouts in your system yet, use the layouts tab to add one. Then your will be able to assign a room to a layout.")))),r.a.createElement(A.a,null,"Allocated Rooms: ",t.allocatedRooms," ",r.a.createElement("br",null),"Redeemed Rooms: ",t.redeemedRooms),r.a.createElement(A.a,null,"Room List:",r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(we.a,null,m.rooms.map((function(e,a){return r.a.createElement(we.a.Item,{variant:m.roomUUID==e.uuid?"primary":null,key:a,action:!0,onClick:function(){var a,t,n,r;a=e.uuid,t=D(e.layout),n=e.layout,r=e.weekSystem,d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{roomUUID:a,editRoom:!0,layouts:!0,newAdd:!1,layout:t,layoutUUID:n,weekSystem:"true"==r})}))}},e.name," (",D(e.layout),")")})))),r.a.createElement("div",{className:m.editRoom?"remove-button-show":"remove-button-hidden"},r.a.createElement(S.a,{onClick:function(){f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Remove Room",message:"This feature hasn't been completed yet",open:!0})}))}},"Remove"))))))))))),r.a.createElement(ue.a,{show:g.open,onHide:j},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,g.heading)),r.a.createElement(ue.a.Body,null,g.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:j},"Close"))),r.a.createElement(ue.a,{show:O.open,onHide:function(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Week System")),r.a.createElement(ue.a.Body,null,g.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:!1})})),y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},"No"),r.a.createElement(S.a,{variant:"primary",onClick:function(){d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:!0})})),y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},"Yes"))))},Ge=Object(n.createContext)();var He=function(e){var a=Object(n.useState)({}),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)({view:!1,breakID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1];return r.a.createElement(Ge.Provider,{value:{sessions:l,order:u,breakBtns:b,addSession:function(e){o((function(a){return Object(ie.a)(Object(ie.a)({},a),{},Object(fe.a)({},e,{id:e,customText:"",hoverText:""}))})),m((function(a){return[].concat(Object(Ae.a)(a),[e])}))},resetSessions:function(){o({}),m([])},minusSession:function(e){var a=l;o({});for(var t=function(){var t=u[n];if(t!=e){var r={};r=t.toString().includes("b")?{id:a[t].id,breakText:a[t].breakText,textColor:a[t].textColor,bgColor:a[t].bgColor}:{id:a[t].id,customText:a[t].customText,hoverText:a[t].hoverText},o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,r))}))}},n=0;n<u.length;n++)t();m((function(){return u.filter((function(a){return a!=e}))}))},updateCustomText:function(e,a){var t={customText:a,hoverText:l[e].hoverText,id:l[e].id};o((function(a){return Object(ie.a)(Object(ie.a)({},a),{},Object(fe.a)({},e,t))}))},updateHoverText:function(e,a){var t={customText:l[e].customText,hoverText:a,id:l[e].id};o((function(a){return Object(ie.a)(Object(ie.a)({},a),{},Object(fe.a)({},e,t))}))},addBreak:function(e){var a="b"+e;o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},a,{id:a,breakText:"",textColor:"#000000",bgColor:"#FFFFFF"}))})),m((function(e){return[].concat(Object(Ae.a)(e),[a])}))},toggleBreakBtns:function(e,a){g(a?function(t){return Object(ie.a)(Object(ie.a)({},t),{},{view:a,breakID:e})}:function(e){return Object(ie.a)(Object(ie.a)({},e),{},{view:a})})},orderMoveUp:function(){var e=u.indexOf(b.breakID);if(e-1>=0){var a=u[e];u.splice(e,1);var t=e-1;u.splice(t,0,a),m(u),m((function(e){return Object(Ae.a)(e)}))}},orderMoveDown:function(){var e=u.indexOf(b.breakID);if(e+1<u.length){var a=u[e];u.splice(e,1);var t=e+1;u.splice(t,0,a),m(u),m((function(e){return Object(Ae.a)(e)}))}},removeBreak:function(){u.indexOf(b.breakID);var e=1,a=l,t=[];o({});for(var n=function(){var n=u[r];if(n!=b.breakID){var l={};if(n.toString().includes("b")){var c="b"+e;l={id:c,breakText:a[n].breakText,textColor:a[n].textColor,bgColor:a[n].bgColor},o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},c,l))})),t.push(c),e++}else l={id:a[n].id,customText:a[n].customText,hoverText:a[n].hoverText},o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},n,l))})),t.push(n)}},r=0;r<u.length;r++)n();m(t),m((function(e){return Object(Ae.a)(e)})),g((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{view:!1})}))},updateBreakText:function(e){var a={id:l[b.breakID].id,breakText:e,textColor:l[b.breakID].textColor,bgColor:l[b.breakID].bgColor};o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},b.breakID,a))}))},updateBreakColor:function(e,a){var t={};"textColor"===e&&(t={id:l[b.breakID].id,breakText:l[b.breakID].breakText,textColor:a,bgColor:l[b.breakID].bgColor}),"bgColor"===e&&(t={id:l[b.breakID].id,breakText:l[b.breakID].breakText,textColor:l[b.breakID].textColor,bgColor:a}),o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},b.breakID,t))}))},SetSessions:function(e){o(e)},SetOrder:function(e){m(e)}}},e.children)};var Ke=function(e){var a=Object(n.useContext)(Ge),t=a.updateCustomText,l=a.updateHoverText,o=a.toggleBreakBtns;function c(){o(0,!1)}return r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,{sm:1},r.a.createElement("div",{className:"slot-id"},e.id)),r.a.createElement(A.a,null,r.a.createElement(De.a.Control,{id:"txtCustomText",type:"text",value:e.customText,onFocus:c,onChange:function(a){var n=a.target.value;t(e.id,n)}})),r.a.createElement(A.a,null,r.a.createElement(De.a.Control,{id:"txtHoverText",type:"text",value:e.hoverText,onFocus:c,onChange:function(a){var t=a.target.value;l(e.id,t)}}))))},qe=t(207);var We=function(e){var a=Object(n.useContext)(Ge),t=a.toggleBreakBtns,l=a.updateBreakText,o=a.updateBreakColor,i=Object(n.useState)({open:!1,color:"ff0000",property:""}),s=Object(c.a)(i,2),u=s[0],m=s[1];return r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,{sm:1},r.a.createElement("div",{className:"break-id"},e.id)),r.a.createElement(A.a,{className:"break-padding"},r.a.createElement(De.a.Control,{style:{backgroundColor:e.bgColor,color:e.textColor},id:"txtbreakText",value:e.breakText,onFocus:function(){t(e.id,!0)},onChange:function(e){var a=e.target.value;l(a)}})),r.a.createElement(A.a,null,r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},"Colour"),r.a.createElement(C.a.Menu,null,r.a.createElement(C.a.Item,{onClick:function(){t(e.id,!0),m((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!0,property:"textColor"})}))}},"Text Colour"),r.a.createElement(C.a.Item,{onClick:function(){t(e.id,!0),m((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!0,property:"bgColor"})}))}},"BackgroundColour"))))),r.a.createElement(ue.a,{show:u.open,dialogClassName:"color-modal-90w",onHide:function(){m((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Pick Colour")),r.a.createElement(ue.a.Body,null,r.a.createElement(qe.CompactPicker,{color:u.color,onChangeComplete:function(e){!function(e){m((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{color:e})}))}(e.hex)}})),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){o(u.property,u.color),m((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},"OK"))))};var Ve=function(e){var a=e.orgID,t=Object(n.useContext)(Ge),l=t.sessions,o=t.order,i=t.breakBtns,u=t.addSession,m=t.minusSession,d=t.resetSessions,E=t.addBreak,b=t.orderMoveUp,g=t.orderMoveDown,f=t.removeBreak,p=t.SetSessions,h=t.SetOrder,O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],j=Object(n.useState)({open:!1,layoutText:"layout",yourLayoutText:"Layouts",yourLayouts:[],currentLayout:{},sessions:1,breaks:0,days:[!1,!1,!1,!1,!1,!1,!1],showPreview:!1,startTime:"Start Time",finishTime:"Finish Time",timeIntervalLbl:"Interval",timeInterval:0,times:[],showTimetableSave:!1,showDiarySave:!1}),k=Object(c.a)(j,2),D=k[0],w=k[1],T=Object(n.useState)({open:!1,heading:"",message:""}),I=Object(c.a)(T,2),N=I[0],U=I[1],B=Object(n.useState)({open:!1,heading:"",newName:""}),_=Object(c.a)(B,2),x=_[0],R=_[1];function Y(){U((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function L(e){var a=e.target.innerText,t=[!1,!1,!1,!1,!1,!1,!1];D.currentLayout.layout==a?M(D.currentLayout):"Timetable"==a&&(w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessions:1})})),u(1));for(var n=!1,r=0,l=t;r<l.length;r++){1==l[r]&&(n=!0)}w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{layoutText:a,days:t,showDiarySave:!1,showTimetableSave:!1,showPreview:n})}))}function M(e){if("Timetable"==e.layout){if(""!=e.days){var t=e.days.split(",");t.forEach((function(e,a){t[a]="true"==e}));var n={orgID:a,layoutUUID:e.uuid};s.a.post("/organisation/getTimetableSessions",n).then((function(e){var a,t=e.data.sessions,n={},r=Object(ce.a)(t);try{for(r.s();!(a=r.n()).done;){var l=a.value;n[l.id]=l}}catch(o){r.e(o)}finally{r.f()}p(n)})).catch((function(e){console.log(e)}));var r=e.sessionOrder.split(",");h(r),w((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{open:!0,sessions:e.sessions,breaks:e.breakTotal,days:t,showTimetableSave:!0,showPreview:!0})}))}}else if("Diary"==e.layout){var l=e.days.split(",");l.forEach((function(e,a){l[a]="true"==e})),""!=e.days&&(w((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{startTime:e.startTime,finishTime:e.finishTime,timeInterval:e.timeInterval,days:l,showDiarySave:!0,showPreview:!0})})),function(e){var a="";30==e&&(a="30 Minutes");60==e&&(a="1 hour");90==e&&(a="1 hour, 30 minutes");120==e&&(a="2 hours");w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{timeIntervalLbl:a})}))}(e.timeInterval),G(e.startTime,e.finishTime,e.timeInterval))}}function P(e){var a=e.target.innerText;w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{startTime:a})})),G(a,D.finishTime,D.timeInterval)}function Q(e){var a=e.target.innerText;w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{finishTime:a})})),G(D.startTime,a,D.timeInterval)}function F(e){var a=e.target,t=a.innerText,n=a.name;w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{timeIntervalLbl:t,timeInterval:parseInt(n)})})),G(D.startTime,D.finishTime,parseInt(n))}function G(e,a,t){var n=[];if("Start Time"!==e&&"Finish Time"!==a&&0!==t){for(var r=de()(e,"HH:mm"),l=de()(a,"HH:mm");r.isBefore(l);)n.push(r.format("HH:mm")),r.add(t,"m");w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{times:n})}));var o=!1;for(var c in D.days)1==D.days[c]&&(o=!0);w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{showDiarySave:o})}))}}function H(e){var a=e.target,t=a.name,n=a.checked,r=D.days;r[t]=n;var l=!1;for(var o in r)1==r[o]&&(l=!0);w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{days:r,showPreview:l,showTimetableSave:l})})),"Diary"==D.layoutText&&"Start Time"!==D.startTime&&"Finish Time"!==D.finishTime&&0!==D.timeInterval&&w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{days:r,showPreview:l,showDiarySave:l})}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(_e.a,{className:"plus-image",src:D.open?Le.a:Re.a,onClick:function(){if(D.open)w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})})),d();else{var e={orgID:a};s.a.post("/organisation/getLayouts",e).then((function(e){w((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{open:!0,yourLayouts:e.data.layouts})}))})).catch((function(e){console.log(e)}))}}})," Layouts"),r.a.createElement("br",null),r.a.createElement(Be.a,{in:D.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Your Layouts:"),r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary"},D.yourLayoutText),r.a.createElement(C.a.Menu,null,D.yourLayouts.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:function(){!function(e){var a;d(),w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessions:0,breaks:0})}));var t,n=Object(ce.a)(D.yourLayouts.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),l=(r[0],r[1]);if(l.uuid==e){a=l;break}}}catch(i){n.e(i)}finally{n.f()}var o="layout";""!=a.layout&&(o=a.layout),w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{yourLayoutText:a.name,layoutText:o,currentLayout:a})})),M(a)}(e.uuid)}},e.name)})))),r.a.createElement(S.a,{variant:"primary",onClick:function(){R((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!0})}))}},"Add")),r.a.createElement(v.a,null,"Layouts"!=D.yourLayoutText?r.a.createElement("div",null,r.a.createElement("div",{className:"centred"},"Layouts:"),r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.layoutText),r.a.createElement(C.a.Menu,null,r.a.createElement(C.a.Item,{onClick:L},"Timetable"),r.a.createElement(C.a.Item,{onClick:L},"Diary")))):null),r.a.createElement(v.a,null,r.a.createElement("div",{className:"layout-settings"},"Timetable"==D.layoutText||"Diary"==D.layoutText?r.a.createElement("div",null,r.a.createElement(De.a,null,r.a.createElement(De.a.Group,null,r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"0",onChange:H,type:"checkbox",checked:D.days[0],label:"Sun"}),r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"1",onChange:H,type:"checkbox",checked:D.days[1],label:"Mon"}),r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"2",onChange:H,type:"checkbox",checked:D.days[2],label:"Tue"}),r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"3",onChange:H,type:"checkbox",checked:D.days[3],label:"Wed"}),r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"4",onChange:H,type:"checkbox",checked:D.days[4],label:"Thu"}),r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"5",onChange:H,type:"checkbox",checked:D.days[5],label:"Fri"}),r.a.createElement(De.a.Check,{className:"check-side-by-side",name:"6",onChange:H,type:"checkbox",checked:D.days[6],label:"Sat"})))):null)),r.a.createElement(v.a,null,r.a.createElement("div",{className:"layout-settings"},"Timetable"==D.layoutText?r.a.createElement("div",null,r.a.createElement("div",{className:"centred"},"Sessions: ",D.sessions),r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(S.a,{variant:"primary",onClick:function(){w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessions:D.sessions+1})})),u(D.sessions+1)}},"+"),r.a.createElement(S.a,{variant:"primary",onClick:function(){D.sessions>1&&(w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessions:D.sessions-1})})),m(D.sessions))}},"-"))):null)),"Timetable"==D.layoutText?r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"layout-settings"},r.a.createElement(S.a,{variant:"primary",onClick:function(){w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{breaks:D.breaks+1})})),E(D.breaks+1)}},"Add Break"),i.view?r.a.createElement(S.a,{variant:"primary",onClick:function(){w((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{breaks:D.breaks-1})})),f()}},"Remove"):null)),r.a.createElement(v.a,null,r.a.createElement("div",{className:i.view?"layout-settings-move-btn-show":"layout-settings-move-btn-hide"},r.a.createElement(S.a,{variant:"primary",onClick:function(){b()}},"Move Up"),r.a.createElement(S.a,{variant:"primary",onClick:function(){g()}},"Move Down")))):null,"Diary"==D.layoutText?r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:"centred"},"Start Time:")),r.a.createElement(A.a,null,r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.startTime),r.a.createElement(C.a.Menu,{className:"dropdown-items"},y.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:P},e)})))))),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:"centred"},"Finish Time:")),r.a.createElement(A.a,null,r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.finishTime),r.a.createElement(C.a.Menu,{className:"dropdown-items"},y.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:Q},e)})))))),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:"centred"},"Interval:")),r.a.createElement(A.a,null,r.a.createElement(C.a,{className:"side-by-side"},r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.timeIntervalLbl),r.a.createElement(C.a.Menu,{className:"dropdown-items"},r.a.createElement(C.a.Item,{name:"30",onClick:F},"30 minutes"),r.a.createElement(C.a.Item,{name:"60",onClick:F},"1 hour"),r.a.createElement(C.a.Item,{name:"90",onClick:F},"1 hour, 30 minutes"),r.a.createElement(C.a.Item,{name:"120",onClick:F},"2 hours"))))),r.a.createElement(v.a,null,r.a.createElement(A.a,null),r.a.createElement(A.a,null,D.showDiarySave?r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:D.currentLayout.uuid,layout:D.layoutText,days:D.days.toString(),startTime:D.startTime,finishTime:D.finishTime,timeInterval:D.timeInterval};s.a.post("/organisation/saveLayout",e).then((function(e){"Success"==e.data.message&&(w((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{yourLayouts:e.data.layouts})})),U((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Layout: "+D.yourLayoutText,message:"Layout has been saved!",open:!0})})))})).catch((function(e){console.log(e)}))}},"Save"):null))):null),r.a.createElement(A.a,null,"Timetable"==D.layoutText?r.a.createElement("div",null,"Sessions:",r.a.createElement(v.a,null,r.a.createElement(A.a,{sm:1}),r.a.createElement(A.a,{className:"slot-headings"},"Custom Text"),r.a.createElement(A.a,{className:"slot-headings"},"Hover Text")),r.a.createElement("div",{className:"scrollable-250"},Object.keys(l).length>0?r.a.createElement("div",null,o.map((function(e){return e.toString().includes("b")?r.a.createElement(We,{key:e,id:l[e].id,breakText:l[e].breakText,bgColor:l[e].bgColor,textColor:l[e].textColor}):r.a.createElement(Ke,{key:e,id:l[e].id,customText:l[e].customText,hoverText:l[e].hoverText})}))):null),r.a.createElement("div",{className:"add-button"},D.showTimetableSave?r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:D.currentLayout.uuid,layout:D.layoutText,sessionTotal:D.sessions,breakTotal:D.breaks,sessionOrder:o,days:D.days.toString(),sessions:l};s.a.post("/organisation/saveLayout",e).then((function(e){"Success"==e.data.message&&(w((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{yourLayouts:e.data.layouts})})),U((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Layout: "+D.yourLayoutText,message:"Layout has been saved!",open:!0})})))})).catch((function(e){console.log(e)}))}},"Save"):null)):null))),r.a.createElement(A.a,null,"Timetable"==D.layoutText||"Diary"==D.layoutText?r.a.createElement("div",null,"Preview:"):null,r.a.createElement("div",{className:"scrollable-300"},D.showPreview?r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Session"),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a,"data-tip":"day"},O[a])})))),"Timetable"==D.layoutText&&Object.keys(l).length>0?r.a.createElement("tbody",null,o.map((function(e,a){return e.toString().includes("b")?r.a.createElement("tr",{key:a,style:{backgroundColor:l[e].bgColor}},r.a.createElement("td",{style:{color:l[e].textColor}},""!=l[e].breakText?l[e].breakText:l[e].id),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})}))):r.a.createElement("tr",{key:a},r.a.createElement("td",{"data-tip":""!=l[e].hoverText?l[e].hoverText:null},""!=l[e].customText?l[e].customText:l[e].id),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})})))})),void se.a.rebuild()):null,"Diary"==D.layoutText?r.a.createElement("tbody",null,D.times.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})})))}))):null):null)))))))))),r.a.createElement(se.a,null),r.a.createElement(ue.a,{show:N.open,onHide:Y},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,N.heading)),r.a.createElement(ue.a.Body,null,N.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:Y},"Close"))),r.a.createElement(ue.a,{show:x.open,onHide:function(){R((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Add Layout")),r.a.createElement(ue.a.Body,null,r.a.createElement(De.a.Control,{value:x.newName,onChange:function(e){var a=e.target.value;R((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{newName:a})}))}})),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,name:x.newName};s.a.post("/organisation/addLayout",e).then((function(e){"Successfully Added"==e.data.message&&(w((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{yourLayouts:e.data.layouts})})),R((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{newName:"",open:!1})})))})).catch((function(e){console.log(e)}))}},"Add"))))},Je=t(213),ze=t(88),Xe=t.n(ze);var Ze=function(e){var a=e.orgID,t=Object(u.b)(),l=Object(D.f)(),o=Object(n.useState)({open:!1,startDate:de()(),endDate:de()(),startDateValue:"",endDateValue:"",weeks:[],holidayTitles:[],addNew:!1,newHoliday:"",editWeek:!1,editWeekIndex:0,editTitle:!1,titleUUID:"",showWeeks:!1,downloadedHolidays:[],weekSystem:!1,weeksNum:[],orgLocked:!1,collides:!1}),i=Object(c.a)(o,2),m=i[0],d=i[1],E=Object(n.useState)({open:!1,heading:"",message:""}),b=Object(c.a)(E,2),g=b[0],f=b[1],p=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),h=Object(c.a)(p,2),O=h[0],y=h[1],j=Object(n.useState)({open:!1,heading:"",message1:"",message2:"",message3:"",boldMessage:""}),k=Object(c.a)(j,2),w=k[0],T=k[1],I=Object(n.useState)({open:!1,heading:"",message1:"",message2:"",message3:"",boldMessage:""}),C=Object(c.a)(I,2),N=C[0],U=C[1],B=Object(n.useState)({open:!1,heading:"",message:"",renameText:""}),_=Object(c.a)(B,2),x=_[0],R=_[1],Y=Object(n.useState)({holidayTitlesBorder:!1,weeksBorder:!1,datesText:"",dates:!1,holidayTitlesText:"",holidayTitles:!1,weeksText:"",weeks:!1,weekNums:!1,weekNumsText:""}),L=Object(c.a)(Y,2),M=L[0],P=L[1];function Q(){f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function F(){T((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function G(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function H(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})})),U((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}));var e={orgID:a};s.a.post("/organisation/restore",e).then((function(e){var a=e.data;"System Restored"==a.message&&(t(W("true"==a.locked)),t(q(a.holidays)),y({heading:"System Restored",message:"Your system has been restored!",showAccept:!0,acceptName:"Ok",acceptFunction:K,showCancel:!1,open:!0}))})).catch((function(e){console.log(e)}))}function K(){y((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})})),l.push("/org/"+a)}function V(e,a){if(""!=e&&""!=a){for(var t=de()(e,"DD/MM/YYYY").startOf("week"),n=de()(a,"DD/MM/YYYY").startOf("week"),r=[];t.isBefore(n);){var l={week:J(t.week())+"-"+t.format("YY"),date:t.format("DD/MM/YYYY"),holiday:0};r.push(l),t.add(1,"w")}return d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeks:r,showWeeks:!0})})),r}}function J(e){return 1==e.toString().length?"0"+e:e}function z(e,a){if(m.editWeek){var t=m.weeks;t[m.editWeekIndex].holiday="h"+J(a),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeks:t,editWeek:!1})}))}else d("Normal"!=e?function(e){return Object(ie.a)(Object(ie.a)({},e),{},{editTitle:!0,editWeek:!1,titleUUID:a})}:function(e){return Object(ie.a)(Object(ie.a)({},e),{},{editTitle:!1,editWeek:!1})})}return Object(n.useEffect)((function(){!function(){var e,a,t,n,r=!1,l=!1,o=!1,c=!1;m.showWeeks?m.editWeek||m.editTitle||!m.showWeeks?m.editWeek?(a="Click on a title to assign it to the week",l=!0,m.weekSystem&&(n="Or Click on a week to assign it to",c=!0)):m.editTitle&&(a="Use the 'Rename' or 'Delete' buttons to the left",l=!0,t="Click on a week on the right to assign a holiday to it",o=!0):(a="Click on a holiday title to edit it.",l=!0,t="Click on a week on the right to assign a holiday to it",o=!0):(e="Set the 'Start Date' and 'End Date' to bring up the weeks under Year Preview",r=!0,a=m.holidayTitles.length>0?"Click on a holiday title to edit it.":"Add a holiday title",l=!0);P({holidayTitlesBorder:!1,weeksBorder:!1,datesText:e,dates:r,holidayTitlesText:a,holidayTitles:l,weeksText:t,weeks:o,weekNumsText:n,weekNums:c})}()}),[m.showWeeks,m.editWeek,m.editTitle,m.holidayTitles]),r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(_e.a,{className:"plus-image",src:m.open?Le.a:Re.a,onClick:function(){if(m.open)d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}));else{var e={orgID:a};s.a.post("/organisation/getHolidayData",e).then((function(e){var a=e.data;console.log(a);var t=de()(),n=de()(),r="",l="";""==a.org.holidayStartDate?r="":(t=de()(a.org.holidayStartDate,"DD/MM/YYYY"),r=t.format("DD/MM/YYYY")),""==a.org.holidayEndDate?l="":(n=de()(a.org.holidayEndDate,"DD/MM/YYYY"),l=n.format("DD/MM/YYYY")),console.log(t),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!0,holidayTitles:a.titles,startDate:t,startDateValue:r,endDate:n,endDateValue:l,weekSystem:"true"==a.org.weekSystem,orgLocked:"true"==a.locked,collides:a.collideBookings})})),function(e,a){if(a.length>0){var t,n=Object(ce.a)(a);try{for(n.s();!(t=n.n()).done;){var r,l=t.value,o=Object(ce.a)(e);try{for(o.s();!(r=o.n()).done;){var c=r.value;l.weeks.includes(c.week)&&(c.holiday=l.titleUUID)}}catch(i){o.e(i)}finally{o.f()}}}catch(i){n.e(i)}finally{n.f()}d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{weeks:e})}))}}(V(r,l),a.holidays),function(e){for(var a=[],t=1;t<=e;t++)a.push(t);d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeksNum:a})}))}(a.org.weeks)})).catch((function(e){console.log(e)}))}}})," Week System / Holidays"),r.a.createElement("br",null),r.a.createElement(Be.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text"},M.dates?r.a.createElement("div",null,M.datesText):null,M.dates&&M.holidayTitles?"---":null,M.holidayTitles?r.a.createElement("div",{className:"help-holidayTitles"},M.holidayTitlesText):null,M.holidayTitles&&M.weeks||M.holidayTitles&&M.weekNums?"---":null,M.weeks?r.a.createElement("div",{className:"help-weeks"},M.weeksText):null,M.weekNums?r.a.createElement("div",{className:"help-weekNums"},M.weekNumsText):null),r.a.createElement("div",{className:"normal-text"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(A.a,null,"Start Date:"),r.a.createElement(A.a,null,r.a.createElement(Xe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(m.startDate),value:m.startDateValue,onChange:function(e){d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{startDate:e,startDateValue:de()(e,"DD/MM/YYYY").format("DD/MM/YYYY")})})),V(de()(e,"DD/MM/YYYY").format("DD/MM/YYYY"),m.endDateValue)}}))),r.a.createElement(v.a,{className:"holidays-datePadding"},r.a.createElement(A.a,null,"End Date:"),r.a.createElement(A.a,null,r.a.createElement(Xe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(m.endDate),value:m.endDateValue,onChange:function(e){d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{endDate:e,endDateValue:de()(e,"DD/MM/YYYY").format("DD/MM/YYYY")})})),V(m.startDateValue,de()(e,"DD/MM/YYYY").format("DD/MM/YYYY"))}}))),r.a.createElement(v.a,{className:"holidays-datePadding"},m.editWeek?null:r.a.createElement("div",null,m.addNew?r.a.createElement("div",{className:"holidays-addNew"},r.a.createElement(De.a.Group,null,r.a.createElement(De.a.Label,null,"New Holiday:"),r.a.createElement(De.a.Control,{name:"newHoliday",value:m.newHoliday,onChange:function(e){var a=e.target,t=a.name,n=a.value;d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,n))}))}})),r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,title:m.newHoliday};s.a.post("/organisation/addHolidayTitle",e).then((function(e){var a=e.data;console.log(a),"Successfully added"==a.message&&d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{holidayTitles:a.titles,addNew:!1,newHoliday:""})}))})).catch((function(e){console.log(e)}))}},"Add"),r.a.createElement(S.a,{variant:"primary",onClick:function(){d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{addNew:!1})}))}},"Close")):r.a.createElement("div",null,r.a.createElement(S.a,{className:"side-by-side",variant:"primary",onClick:function(){d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{addNew:!0})}))}},"Add New Holiday Title"),r.a.createElement("div",{className:m.editTitle?null:"weeks-holidays-hide"},r.a.createElement(S.a,{className:"side-by-side",variant:"primary",onClick:function(){var e,a="",t=Object(ce.a)(m.holidayTitles);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.uuid==m.titleUUID){a=n.name;break}}}catch(r){t.e(r)}finally{t.f()}R({heading:"Rename",open:!0,renameText:a})}},"Rename"),r.a.createElement(S.a,{className:"side-by-side",variant:"primary",onClick:function(){var e={orgID:a,uuid:m.titleUUID};s.a.post("/organisation/deleteHolidayTitle",e).then((function(e){var a=e.data;"Successfully Deleted"==a.message&&(d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{holidayTitles:a.titles,editTitle:!1})})),function(e){var a,t=m.weeks,n=Object(ce.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.holiday==e&&(r.holiday=0)}}catch(l){n.e(l)}finally{n.f()}d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeks:t})}))}(m.titleUUID))})).catch((function(e){console.log(e)}))}},"Delete"))))),r.a.createElement(v.a,null,m.editWeek?null:r.a.createElement("div",null,r.a.createElement("div",{className:"weekSystem-centred"},r.a.createElement(De.a.Check,{type:"checkbox",checked:m.weekSystem,onChange:function(e){var t=e.target.checked,n=[];if(t)n=["1"],d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:t,weeksNum:n})})),function(){var e,a=m.weeks,t=Object(ce.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;"0"==n.holiday&&(n.holiday="w01")}}catch(r){t.e(r)}finally{t.f()}d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeks:a})}))}();else{var r={orgID:a};s.a.post("/organisation/geRoomsWeekSystem",r).then((function(e){e.data.rooms?f({heading:"Week System",message:"There are some rooms still using the week system, delete them first",open:!0}):(d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:t,weeksNum:n})})),function(){var e,a=m.weeks,t=Object(ce.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.holiday.includes("w")&&(n.holiday="0")}}catch(r){t.e(r)}finally{t.f()}d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeks:a})}))}())})).catch((function(e){console.log(e)}))}},label:"Use week system"})),m.weekSystem?r.a.createElement("div",{className:"weekSystem-centred"},"Weeks: ",m.weeksNum.length,r.a.createElement("br",null),r.a.createElement(S.a,{variant:"primary",onClick:function(){var e=m.weeksNum;if(e.length>1){var a,t=e.pop(),n=t-1,r=m.weeks,l=Object(ce.a)(r);try{for(l.s();!(a=l.n()).done;){var o=a.value;o.holiday=="w"+J(t)&&(o.holiday="w"+J(n))}}catch(c){l.e(c)}finally{l.f()}d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{weeksNum:e,weeks:r})}))}}},"-"),r.a.createElement(S.a,{variant:"primary",onClick:function(){var e=m.weeksNum,a=e.length+1;100==a?f((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{heading:"Weeks",message:"You cannot exceed 99 weeks",open:!0})})):(e.push(a),d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{weeksNum:e})})))}},"+")):null))),r.a.createElement(A.a,null,r.a.createElement(v.a,null,"Holiday Titles:",r.a.createElement("div",{className:M.holidayTitles?"help-holidaytiles-bordered scrollable-150 holidays-titles":"scrollable-200 holidays-titles"},r.a.createElement(we.a,null,m.weekSystem?null:r.a.createElement(Je.a,{action:!0,onClick:function(){return z("Normal",0)}},"Normal"),m.holidayTitles.map((function(e,a){return r.a.createElement(Je.a,{key:a,action:!0,onClick:function(){return z(e.name,e.uuid)}},e.name)}))))),r.a.createElement(v.a,{className:"weeks-row-padding"},r.a.createElement("div",{className:m.weekSystem?"weekSystem-weeks scrollable-150":"weeks-holidays-hide"},"Weeks:",r.a.createElement("div",{className:M.weekNums?"help-weekNums-bordered":null},r.a.createElement(we.a,null,m.weeksNum.map((function(e,a){return r.a.createElement(Je.a,{key:a,action:!0,onClick:function(){!function(e){if(m.editWeek){var a=m.weeks;a[m.editWeekIndex].holiday="w"+J(e),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weeks:a,editWeek:!1})}))}}(e)}},"Week",e)}))))))))),r.a.createElement(A.a,null,"Year Preview:",r.a.createElement("div",{className:M.weeks?"help-weeks-bordered scrollable-300":"scrollable-300"},r.a.createElement(we.a,null,m.weeks.map((function(e,a){return r.a.createElement(Je.a,{key:a,action:!0,onClick:function(){return e=a,void d((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{editWeekIndex:e,editWeek:!0,editTitle:!1})}));var e}},e.date," - ",function(e){if(0==e)return"Normal";var a="";if(e.includes("h")){var t=e.replace("h","");a="0"==t[0]?t[1]:t;var n,r=Object(ce.a)(m.holidayTitles);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(l.uuid==a)return l.name}}catch(c){r.e(c)}finally{r.f()}}if(e.includes("w")){var o=e.replace("w","");return"0"==o[0]?"Week "+o[1]:"Week "+o}}(e.holiday))})))),r.a.createElement("div",{className:m.showWeeks?"save-button-show":"save-button-hidden"},m.orgLocked?r.a.createElement("div",null,m.collides?r.a.createElement(S.a,{onClick:function(){l.push("/org/"+a+"/collisionBookings")}},"Collided Bookings"):null,r.a.createElement(S.a,{onClick:function(){U({heading:"Unlock Organisation",message1:"To unlock this organisation make sure that you have cleared all of the collided bookings, the system WILL NOT let you unlock until this is done. Backups only stay active for one cycle of locking organisation. Once unlocked, they are deleted and this is unreservable!!",message2:"If you want to restore everything to the orginial state, before you edit the week system, click 'RESTORE'",open:!0})}},"Unlock")):r.a.createElement(S.a,{onClick:function(){console.log(m.weeks);var e,n={},r=Object(ce.a)(m.weeks);try{for(r.s();!(e=r.n()).done;){var l=e.value;if("0"!=l.holiday){var o=n[l.holiday];""==o||null==o?o=l.week:o+=","+l.week,n[l.holiday]=o}}}catch(u){r.e(u)}finally{r.f()}var c=Object.keys(n);console.log(c),console.log(n);var i={orgID:a,startDate:m.startDateValue,endDate:m.endDateValue,holidays:c,holidayWeeks:n,weekSystem:m.weekSystem.toString(),weeksNo:m.weeksNum.length};s.a.post("/organisation/saveHolidays",i).then((function(e){var a=e.data;if(t(q(a.holidays)),a.locked){t(W("true")),d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{orgLocked:a.locked,collides:a.collidedBookings})}));var n="",r="";a.collidedBookings&&(n="\n\nSome of your bookings have been collided with single bookings, as single bookings are not affected with changing the week system. Please go to 'COLLIDED BOOKINGS' to see them",r="You will NOT be able to unlock your organisation until you have cleared all the collided bookings"),T({heading:"Week System",message1:"Some or all of your rooms have the week system enabled on them. Due to this your organisation will be locked until you double check all the bookings are where they should be.\n\n\n\n",message2:"To unlock the organisation, go on 'UNLOCK' and follow the instructions to unlock. Here you will also be able to restore the system back to how it was, by going on 'RESTORE'",message3:n,boldMessage:r,open:!0})}})).catch((function(e){console.log(e)}))}},"Save"))))))))))),r.a.createElement(ue.a,{show:g.open,onHide:Q},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,g.heading)),r.a.createElement(ue.a.Body,null,g.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:Q},"Close"))),r.a.createElement(ue.a,{show:O.open,onHide:G},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,O.heading)),r.a.createElement(ue.a.Body,null,O.message),r.a.createElement(ue.a.Footer,null,O.showAccept?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:O.acceptFunction},O.acceptName)):null,O.showCancel?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:G},O.cancelName)):null)),r.a.createElement(ue.a,{size:"lg",show:w.open,onHide:F},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,w.heading)),r.a.createElement(ue.a.Body,null,""!=w.message1?w.message1:null,""!=w.message2?r.a.createElement("div",null,r.a.createElement("br",null),w.message2):null,""!=w.message3?r.a.createElement("div",null,r.a.createElement("br",null),w.message3):null,""!=w.boldMessage?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("strong",null,w.boldMessage)):null),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:F},"Close"))),r.a.createElement(ue.a,{show:x.open,onHide:function(){R((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,x.heading)),r.a.createElement(ue.a.Body,null,r.a.createElement(De.a.Control,{name:"renameText",value:x.renameText,onChange:function(e){var a=e.target,t=a.name,n=a.value;R((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,n))}))}})),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:m.titleUUID,title:x.renameText};s.a.post("/organisation/renameHolidayTile",e).then((function(e){var a=e.data;"Successfully Updated"==a.message&&d((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{holidayTitles:a.titles,editTitle:!1})}))})).catch((function(e){console.log(e)})),R({renameText:"",open:!1})}},"Rename"))),r.a.createElement(ue.a,{size:"lg",show:N.open,onHide:function(){U((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,N.heading)),r.a.createElement(ue.a.Body,null,""!=N.message1?N.message1:null,""!=N.message2?r.a.createElement("div",null,r.a.createElement("br",null),N.message2):null,""!=N.message3?r.a.createElement("div",null,r.a.createElement("br",null),N.message3):null,""!=N.boldMessage?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("strong",null,N.boldMessage)):null),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:function(){y({heading:"Are you sure?",message:"Are you sure you want to Restore?",acceptName:"Yes",showAccept:!0,acceptFunction:H,cancelName:"No",showCancel:!0,open:!0})}},"Restore"),r.a.createElement(S.a,{variant:"primary",onClick:function(){U((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}));var e={orgID:a};s.a.post("/organisation/unlock",e).then((function(e){var a=e.data;"Yes"==a.error?(U({open:!1}),f({heading:"Error Unlocking",message:a.message,open:!0})):"System Unlocked"==a.message&&(t(W("true"==a.locked)),y({heading:"System Unlocked",message:"Your system has been unlocked!",showAccept:!0,acceptName:"Ok",acceptFunction:K,showCancel:!1,open:!0}))})).catch((function(e){console.log(e)}))}},"Unlock"))))},$e=Object(n.createContext)();var ea=function(e){var a=Object(n.useState)({uuid:"",name:""}),t=Object(c.a)(a,2),l=t[0],o=t[1];return r.a.createElement($e.Provider,{value:{GProfile:l,setIDAndName:function(e,a){o((function(t){return Object(ie.a)(Object(ie.a)({},t),{},{uuid:e,name:a})}))}}},e.children)};var aa=function(e){var a=e.match.params.id;return Object(D.f)(),Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement(Me,{orgID:a}),r.a.createElement("br",null),r.a.createElement(Pe,{orgID:a}),r.a.createElement("br",null),r.a.createElement(Qe,{orgID:a})," ",r.a.createElement("br",null),r.a.createElement(Fe,{orgID:a})," ",r.a.createElement("br",null),r.a.createElement(He,null,r.a.createElement(Ve,{orgID:a})," ",r.a.createElement("br",null)),r.a.createElement(Ze,{orgID:a}),r.a.createElement("br",null))))};var ta=function(e){var a=e.match.params.id,t=Object(n.useContext)($e).GProfile,l=Object(D.f)();Object(n.useEffect)((function(){""==t.uuid?l.push("/org/"+a+"/organisationAdmin"):function(){var e={orgID:a,profileUUID:t.uuid};s.a.post("/userProfile/loadProfile",e).then((function(e){var a=e.data;console.log(a),j(a.users);var t=a.UPRooms,n=a.orgRooms,r=[];n.map((function(e){var a=!1;if(t.map((function(t){if(e.uuid==t.roomUUID){a=!0;var n={uuid:e.uuid,name:e.name,view:"true"==t.view,write:"true"==t.write,edit:"true"==t.edit,delete:"true"==t.delete,repeat:"true"==t.repeat};r.push(n)}})),!a){var n={uuid:e.uuid,name:e.name,view:!1,write:!1,edit:!1,delete:!1,repeat:!1};r.push(n)}})),m((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{rooms:r})}))})).catch((function(e){console.log(e)}))}()}),[]);var o=Object(n.useState)({users:[],userUUID:"",nonProfileUsers:[],profileUsers:[],rooms:[]}),i=Object(c.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)({users:[]}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({open:!1,heading:"",message:""}),p=Object(c.a)(f,2),h=p[0],O=p[1];function y(){O((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function j(e){var a=[],n=[];e.map((function(e){e.userProfiles.split(",").includes(t.uuid.toString())?n.push(e):a.push(e)})),m((function(t){return Object(ie.a)(Object(ie.a)({},t),{},{nonProfileUsers:a,profileUsers:n,users:e,userUUID:""})}))}function k(e,a){var t=u.rooms;t.forEach((function(t){t.uuid==e&&(t[a]?(t[a]=!1,"view"==a&&(t.write=!1,t.edit=!1,t.delete=!1,t.repeat=!1)):t[a]=!0)})),m((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{rooms:t})}))}function w(){var e=[];b.users.map((function(a){u.users.map((function(t){t.uuid==a&&e.push(t)}))}));var n={orgID:a,profileUUID:t.uuid,usersToUpdate:e,rooms:u.rooms};s.a.post("/userProfile/saveProfile",n).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}function T(e){m((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{userUUID:e})}))}function I(e){b.users.includes(e)||g((function(a){return{users:[].concat(Object(Ae.a)(b.users),[e])}}))}return r.a.createElement("div",null,r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Profile Settings"),r.a.createElement("h2",null,t.name),r.a.createElement("br",null),r.a.createElement("div",{className:"align-right"},r.a.createElement(S.a,{variant:"primary",onClick:w},"Update")),r.a.createElement(v.a,{className:"normal-text"},r.a.createElement("strong",null,"Users:")),r.a.createElement("br",null),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("strong",null,"Users in this profile:"),r.a.createElement("div",{className:"align-left, scrollable-300"},r.a.createElement(we.a,null,u.profileUsers.map((function(e,a){return r.a.createElement(we.a.Item,{key:a,action:!0,onClick:function(){return T(e.uuid)}},e.displayName)}))))),r.a.createElement(A.a,null,r.a.createElement("div",{className:"valign-center"},r.a.createElement("span",{className:"valign"},r.a.createElement(S.a,{onClick:function(){""==u.userUUID?O({heading:"Move User",message:"You need to select an user first",open:!0}):u.users.map((function(e){if(e.uuid==u.userUUID){var a=[];""!=e.userProfiles&&(a=e.userProfiles.split(",")),a.length>5?O({heading:"Move User",message:"This user has already got 5 profile assigned to them",open:!0}):(0==a.length?a=[0]:a.push(t.uuid),e.userProfiles=a.toString()),I(u.userUUID),j(u.users)}}))}},"Move into profile"),r.a.createElement("br",null),r.a.createElement(S.a,{onClick:function(){""==u.userUUID?O({heading:"Move User",message:"You need to select an user first",open:!0}):u.users.map((function(e){if(e.uuid==u.userUUID){var a=[];""!=e.userProfiles&&(a=e.userProfiles.split(","));var n=a.indexOf(t.uuid.toString());a.splice(n,1),e.userProfiles=a.toString(),I(u.userUUID),j(u.users)}}))}},"Move out of profile")))),r.a.createElement(A.a,null,r.a.createElement("strong",null,"Users not in this profile:"),r.a.createElement("div",{className:"align-left, scrollable-300"},r.a.createElement(we.a,null,u.nonProfileUsers.map((function(e,a){return r.a.createElement(we.a.Item,{key:a,action:!0,onClick:function(){return T(e.uuid)}},e.displayName)})))))),r.a.createElement("br",null),r.a.createElement(v.a,null,r.a.createElement(A.a,{className:"normal-text"},r.a.createElement("strong",null,"Rooms:"),r.a.createElement("br",null),r.a.createElement("div",{className:"align-right"},r.a.createElement(S.a,{variant:"primary",disabled:!0},"Selected"),r.a.createElement(S.a,{variant:"outline-primary",disabled:!0},"Unselected")),r.a.createElement("div",null),r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(we.a,null,u.rooms.map((function(e,a){return r.a.createElement(we.a.Item,{key:a},r.a.createElement(v.a,null,r.a.createElement(A.a,null,e.name),r.a.createElement(A.a,null,r.a.createElement(S.a,{variant:e.view?"primary":"outline-primary",onClick:function(){return k(e.uuid,"view")}},"View")),r.a.createElement(A.a,null,e.view?r.a.createElement(S.a,{variant:e.write?"primary":"outline-primary",onClick:function(){return k(e.uuid,"write")}},"Write"):null),r.a.createElement(A.a,null,e.view?r.a.createElement(S.a,{variant:e.edit?"primary":"outline-primary",onClick:function(){return k(e.uuid,"edit")}},"Edit"):null),r.a.createElement(A.a,null,e.view?r.a.createElement(S.a,{variant:e.delete?"primary":"outline-primary",onClick:function(){return k(e.uuid,"delete")}},"Delete"):null),r.a.createElement(A.a,null,e.view?r.a.createElement(S.a,{variant:e.repeat?"primary":"outline-primary",onClick:function(){return k(e.uuid,"repeat")}},"Repeat"):null)))}))))),r.a.createElement(A.a,null,"Other Settings")),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:"align-right"},r.a.createElement(S.a,{variant:"primary",onClick:w},"Update")))))),r.a.createElement(ue.a,{show:h.open,onHide:y},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,h.heading)),r.a.createElement(ue.a.Body,null,h.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:y},"Close"))))};var na=function(e){var a=e.match.params.id,t=(Object(u.c)((function(e){return e.user})),Object(u.c)((function(e){return e.organisation}))),l=Object(u.c)((function(e){return e.globalVars})),o=Object(D.f)(),i=Object(u.b)(),y=Object(n.useState)(""),v=Object(c.a)(y,2),A=v[0],w=v[1];return Object(n.useEffect)((function(){document.title="STAFF - Sign In",k()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,t.name)," ",r.a.createElement("br",null),r.a.createElement("h3",null,"Please Sign In!"),r.a.createElement("p",null,t.message),t.signInLocal?r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",{id:"lblEmail"},"Email:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtEmail",type:"email"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblPassword"},"Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtPassword",type:"password"}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,A)),r.a.createElement("br",null),r.a.createElement(S.a,{variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtEmail").value,t=document.getElementById("txtPassword").value;s.a.get("/login?email="+a+"&password="+t).then((function(e){console.log(e.data),"Logged in successful"===e.data.message?(i(m(!0)),i(d(e.data.uuid)),i(E(e.data.displayName)),i(h(e.data.departments)),i(b(e.data.role)),i(g(e.data.new)),i(f(e.data.requestedPassword)),i(p(e.data.orgID)),i(O(e.data.SARequest)),l.forceSignIn?(i(oe(!0)),i(le(!1))):(i(oe(!0)),i(le(!0)))):w(e.data.info)})).catch((function(e){console.log(e)}))}},"Log in"),r.a.createElement(S.a,{variant:"warning",onClick:function(){return o.push("/org/"+a+"/forgotPassword")}},"Forgot Password"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null),t.signInGoogle?r.a.createElement(S.a,{variant:"danger",href:j+"/auth/google"},r.a.createElement("i",{className:"fab fa-google"})," Log in with Google"):r.a.createElement("div",null))))};var ra=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.user})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(u.b)(),i=Object(D.f)(),m=Object(n.useState)(!1),d=Object(c.a)(m,2),E=d[0],b=d[1];return Object(n.useEffect)((function(){document.title="STAFF",function(){var e="/organisation/"+a;s.a.get(e).then((function(e){"Yes"!=e.data.userError?(o({type:"ORG_UPDATE_NAME",value:e.data.organisation.name}),o(L("true"==e.data.organisation.auth_Local)),o(M("true"==e.data.organisation.auth_Google)),o(P(e.data.organisation.message)),o(Q("true"==e.data.organisation.useDepartments)),o(F(e.data.organisation.noOfDepartments)),o(function(e){return{type:"ORG_UPDATE_ALLOCATEDROOMS",value:e}}(e.data.organisation.allocatedRooms)),o(H(e.data.organisation.redeemedRooms)),o(K(e.data.rooms)),o(function(e){return{type:"ORG_UPDATE_LAYOUTS",value:e}}(e.data.layouts)),o(q(e.data.holidays)),o(W("true"==e.data.organisation.locked)),0==t.auth?i.push("/org/"+a+"/signIn"):t.orgID!=a?i.push("/org/"+t.orgID+"/wrongOrganisation"):"true"==t.requestedPassword?i.push("/org/"+a+"/changePassword"):"true"==t.new?i.push("/org/"+a+"/createPassword"):"true"==t.SARequest?i.push("/org/"+a+"/changeOfSeniorRequest"):l.fromSignIn&&i.push("/org/"+a),b(!0)):i.push("/")})).catch((function(e){console.log(e)}));var n={orgID:a};s.a.post("/organisation/allDepartments",n).then((function(e){o(G(e.data.departments))})).catch((function(e){console.log(e)}))}()}),[l.forceSignIn]),r.a.createElement("div",null,E?r.a.createElement("div",null,r.a.createElement(D.a,{path:"/org/:id",exact:!0,component:ge}),r.a.createElement(D.a,{path:"/org/:id/collisionBookings",component:ye}),r.a.createElement(ea,null,r.a.createElement(ke,null,r.a.createElement(D.a,{path:"/org/:id/organisationAdmin",component:aa}),r.a.createElement(D.a,{path:"/org/:id/userDetails",component:Te}),r.a.createElement(D.a,{path:"/org/:id/profileSettings",component:ta}))),r.a.createElement(D.a,{path:"/org/:id/signIn",component:na}),r.a.createElement(D.a,{path:"/org/:id/forgotPassword",component:Ie}),r.a.createElement(D.a,{path:"/org/:id/changePassword",component:Ce}),r.a.createElement(D.a,{path:"/org/:id/changeOfSeniorRequest",component:ve}),r.a.createElement(D.a,{path:"/org/:id/createPassword",component:Se}),r.a.createElement(D.a,{path:"/org/:id/wrongOrganisation",component:Ne})):null)};t(470);var la=function(e){var a=e.match.params.id,t=Object(D.f)(),l=Object(u.c)((function(e){return e.user})),o=Object(u.c)((function(e){return e.organisation})),i=Object(u.c)((function(e){return e.globalVars})),m=Object(n.useState)({userList:[],departmentList:[],user:"Users",userID:"",department:"Departments",departmentID:"",sessionLength:"Length",sessionLengthTitle:"",showSessionLength:!0,sessions:[],repeat:!1,daily:!1,weekly:!1,endOfYear:!1,untilDate:de()(),showUserDropdown:!0,sessDes:"",sessDesTitle:"",comments:"",times:[]}),d=Object(c.a)(m,2),E=d[0],b=d[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),p=f[0],h=f[1];function O(){h((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function y(e){var a=e.target.innerText;b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessionLength:a})}))}function j(e){var a=e.target,t=a.name,n=a.value;b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},Object(fe.a)({},t,n))}))}function k(){var e="",n="",r="",c=[],u=i.sessionID.split("-");if("Timetable"==i.layoutData.layout)if(u[1].toString().includes("b"))c.push(u[1]);else for(var m=parseInt(u[1]),d=0;d<E.sessionLength;d++)c.push(m),m++;else if("Diary"==i.layoutData.layout)for(var b=de()(i.sessionLabel,"HH:mm"),g=de()(E.sessionLength,"HH:mm");b.isBefore(g);)c.push(b.format("HH:mm").replace(":","")),b.add(i.timeInterval,"m");E.repeat?(e="repeat",E.daily?(n="daily",r=E.untilDate.toLocaleDateString()):(E.weekly||E.endOfYear)&&(n="weekly",r=E.untilDate.toLocaleDateString())):(e="single",r="");var f,p="",O=Object(ce.a)(o.holidays);try{for(O.s();!(f=O.n()).done;){var y=f.value;if(y.titleUUID==i.weekUUID){p=y.weeks;break}}}catch(k){O.e(k)}finally{O.f()}var v,A=de()(i.date,"DD/MM/YYYY");"repeat"==e?v=de()(r,"DD/MM/YYYY").format("DD/MM/YYYY"):v="";var j={orgID:a,roomID:i.roomID,user:E.userID,departmentID:E.departmentID,sessionDes:E.sessDes,sessionTotal:c.length,sessions:c.toString(),comments:E.comments,bookingType:e,repeatType:n,startDate:A.format("DD/MM/YYYY"),repeatUntil:v,createdBy:l.uuid,dayList:i.dayList,weekSystem:i.weekSystem,weekSysWeeks:p};s.a.post("/booking/createBooking",j).then((function(e){var n=e.data;"null"==n.error&&"null"==n.userError?t.push("/org/"+a):h((function(){return{heading:"Booking",message:n.message,open:!0}}))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){""==i.date?t.push("/org/"+a):function(){"user"!=l.role?function(){var e={orgID:a,users:!0,departments:!0};s.a.post("/organisation/usersAndDepartments",e).then((function(e){var a=e.data;"none"!=a.userList&&b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{userList:a.userList})})),"none"!=a.departmentList&&b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{departmentList:a.departmentList})}))})).catch((function(e){console.log(e)}))}():(!function(){var e,a=l.userDepartments.split(","),t=[],n=Object(ce.a)(a);try{for(n.s();!(e=n.n()).done;){var r,c=e.value,i=Object(ce.a)(o.departments);try{for(i.s();!(r=i.n()).done;){var s=r.value;s.uuid==c&&t.push(s)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){n.e(u)}finally{n.f()}b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{departmentList:t})}))}(),b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{showUserDropdown:!1,user:l.name,userID:l.uuid})})));if("Timetable"==i.layoutData.layout){if(i.sessionID.includes("b"))b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{showSessionLength:!1,sessionLength:"1"})}));else{for(var e=i.sessionID.split("-"),t=parseInt(e[1]),n=[],r=1,c=t;c<=i.totalSessions;c++)n.push(r),r++;b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessions:n})}))}b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessDesTitle:"Class",sessionLengthTitle:"Session Length"})}))}else if("Diary"==i.layoutData.layout){!function(e,a,t){var n=[],r=de()(e,"HH:mm"),l=de()(a,"HH:mm");r.add(t,"m");for(;r.isSameOrBefore(l);)n.push(r.format("HH:mm")),r.add(t,"m");b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessions:n})})),console.log(n)}(de()(i.sessionLabel,"HH:mm"),i.finishTime,i.timeInterval),b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{sessDesTitle:"Subject",sessionLengthTitle:"Until"})}))}var u=de()(i.date,"DD/MM/YYYY");b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{untilDate:u})}))}()}),[]),r.a.createElement("div",{className:"body booking-content"},r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement(v.a,null,r.a.createElement(A.a,null),r.a.createElement(A.a,{xs:8},r.a.createElement(v.a,null,r.a.createElement(A.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Date: ",i.date)),r.a.createElement(A.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Room: ",i.roomName)),r.a.createElement(A.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Session: ",i.sessionLabel))),r.a.createElement("hr",null),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(De.a.Group,null,"User:",E.showUserDropdown?r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-users"},E.user),r.a.createElement(C.a.Menu,{className:"dropdown-items"},E.userList.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:function(){return a=e.displayName,t=e.uuid,void b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{user:a,userID:t})}));var a,t}},e.displayName)}))))):r.a.createElement("div",null,E.user)),r.a.createElement(De.a.Group,null,"Department:",r.a.createElement(C.a,null,r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-departments"},E.department),r.a.createElement(C.a.Menu,{className:"dropdown-items"},E.departmentList.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:function(){return a=e.name,t=e.uuid,b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{department:a,departmentID:t})})),void console.log(i.roomID);var a,t}},e.name)}))))),r.a.createElement(De.a.Group,null,E.sessDesTitle,":",r.a.createElement(De.a.Control,{type:"text",name:"sessDes",onChange:j})),r.a.createElement(De.a.Group,null,"Comments:",r.a.createElement(De.a.Control,{as:"textarea",rows:"3",name:"comments",onChange:j}))),r.a.createElement(A.a,null,r.a.createElement(De.a.Group,null,E.sessionLengthTitle,":",E.showSessionLength?r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(C.a.Toggle,{variant:"primary",id:"dropdown-sessionLength"},E.sessionLength),r.a.createElement(C.a.Menu,{className:"dropdown-items"},E.sessions.map((function(e,a){return r.a.createElement(C.a.Item,{key:a,onClick:y},e)}))))):" "+E.sessionLength),r.a.createElement(v.a,null,"user"!=l.role?r.a.createElement("div",null,r.a.createElement(De.a.Group,null,r.a.createElement(De.a.Check,{className:"check-side-by-side-b",type:"checkbox",label:"Repeat",onChange:function(e){var a=e.target.checked;b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{repeat:a})}))}}))):null),E.repeat?r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(De.a.Group,null,r.a.createElement(De.a.Check,{className:"check-side-by-side-b",type:"checkbox",label:"Daily",checked:E.daily,onChange:function(e){var a=e.target.checked;b(a?function(e){return Object(ie.a)(Object(ie.a)({},e),{},{daily:a,weekly:!a,endOfYear:!a})}:function(e){return Object(ie.a)(Object(ie.a)({},e),{},{daily:a})})}}),r.a.createElement(De.a.Check,{className:"check-side-by-side",type:"checkbox",label:"Weekly",checked:E.weekly,onChange:function(e){var a=e.target.checked;b(a?function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekly:a,daily:!a,endOfYear:!a})}:function(e){return Object(ie.a)(Object(ie.a)({},e),{},{weekly:a})})}}),r.a.createElement(De.a.Check,{className:"check-side-by-side",type:"checkbox",label:"End of Year (Weekly)",checked:E.endOfYear,onChange:function(e){var a=e.target.checked;a?(b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{endOfYear:a,daily:!a,weekly:!a})})),function(){var e=de()(),a=de()();if(a.month()>6){var t=de()("31/07/"+a.year(),"DD/MM/YYYY");t.add(1,"y"),e=de()(t,"DD/MM/YYYY")}else{var n=de()("31/07/"+a.year(),"DD/MM/YYYY");e=de()(n,"DD/MM/YYYY")}b((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{untilDate:new Date(e)})}))}()):b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{endOfYear:a})}))}}))),r.a.createElement(v.a,null,r.a.createElement(A.a,null),r.a.createElement(A.a,null,r.a.createElement(De.a.Group,null,"Until:",r.a.createElement("br",null),r.a.createElement(Xe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(E.untilDate),onChange:function(e){b((function(a){return Object(ie.a)(Object(ie.a)({},a),{},{untilDate:e})}))}}))))):null,r.a.createElement("div",{className:"add-button"},r.a.createElement(S.a,{variant:"primary",onClick:function(){if(de()(),"Users"==E.user)h({heading:"Booking",message:"Please select an user",open:!0});else if("Departments"==E.department)h({heading:"Booking",message:"Please select a department",open:!0});else if("Length"==E.sessionLength)h({heading:"Booking",message:"Please select a session length",open:!0});else if(""==E.sessDes)h({heading:"Booking",message:"Please put a class",open:!0});else if(E.repeat)if(E.daily||E.weekly||E.endOfYear){var e=de()(E.untilDate,"DD/MM/YYYY"),a=de()(i.date,"DD/MM/YYYY");if(e.isSameOrBefore(a))h({heading:"Booking",message:"Please select a date after the selected booking date",open:!0});else{var t=de()(i.date,"DD/MM/YYYY");t.add(2,"y"),e.isAfter(t)?h({heading:"Booking",message:"You cannot repeat a booking for more than two years.",open:!0}):k()}}else h({heading:"Booking",message:"Please select a repeat method",open:!0});else k()}},"Book"))))),r.a.createElement(A.a,null)))),r.a.createElement(ue.a,{show:p.open,onHide:O},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,p.heading)),r.a.createElement(ue.a.Body,null,p.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:O},"Close"))))};var oa=function(e){var a=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),t=Object(c.a)(a,2),l=t[0],o=t[1];function i(){o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}function u(){b((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{open:!1})}))}var m=Object(n.useState)({open:!1,heading:"",message:""}),d=Object(c.a)(m,2),E=d[0],b=d[1];function g(e,a,t){var n={email:a};s.a.post("/organisation/getSALoginMethod",n).then((function(n){var r,l=n.data.method;"local"==l?r="google":"google"==l&&(r="local"),o({heading:"Change Login Method",message:e+"'s login method is "+l+". Are you sure you want to change it to a "+r+" method?",acceptName:"Yes",acceptFunction:function(){!function(e,a,t){o({open:!1});var n={email:e,method:a,orgID:t};s.a.post("/organisaation/changeASLoginMethod",n).then((function(e){"Strategy Updated"==e.data.message&&b({heading:"Change Login Method",message:"This user's login method has now been changed",open:!0})})).catch((function(e){console.log(e)}))}(a,r,t)},showAccept:!0,cancelName:"No",showCancel:!0,open:!0})})).catch((function(e){console.log(e)}))}return r.a.createElement("div",null,r.a.createElement(pe.a,{body:!0,className:"Organisations-ListBox"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("label",null,e.name)),r.a.createElement(A.a,null,r.a.createElement("label",null,e.email)),r.a.createElement(A.a,null,r.a.createElement("label",null,e.poc)),r.a.createElement(A.a,null,r.a.createElement("label",null,e.orgID)),r.a.createElement(A.a,null,r.a.createElement(C.a,null,r.a.createElement(C.a.Toggle,{variant:"primary"},"More"),r.a.createElement(C.a.Menu,null,r.a.createElement(C.a.Item,{onClick:function(){g(e.poc,e.email,e.orgID)}},"Change Login Method")))))),r.a.createElement(ue.a,{show:E.open,onHide:u},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,E.heading)),r.a.createElement(ue.a.Body,null,E.message),r.a.createElement(ue.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:u},"Close"))),r.a.createElement(ue.a,{show:l.open,onHide:i},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,l.heading)),r.a.createElement(ue.a.Body,null,l.message),r.a.createElement(ue.a.Footer,null,l.showAccept?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:l.acceptFunction},l.acceptName)):null,l.showCancel?r.a.createElement("div",null,r.a.createElement(S.a,{variant:"primary",onClick:i},l.cancelName)):null)))};var ca=function(){var e=Object(D.f)(),a=Object(n.useState)(!1),t=Object(c.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)([]),u=Object(c.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){s.a.get("/organisation/all").then((function(e){console.log(e.data),d(e.data),o(!0)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"AH-AddOrganisationBtn"},r.a.createElement(S.a,{variant:"warning",onClick:function(){return e.push("/administrator/organisationRegister")}},"Add Organisation")),r.a.createElement("br",null),l?r.a.createElement("div",null,r.a.createElement(pe.a,{body:!0,className:"Organisations-ListTitles"},r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement("label",null,"Name")),r.a.createElement(A.a,null,r.a.createElement("label",null,"Email")),r.a.createElement(A.a,null,r.a.createElement("label",null,"Point of Contact")),r.a.createElement(A.a,null,r.a.createElement("label",null,"Org ID")),r.a.createElement(A.a,null))),r.a.createElement("br",null),m.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(oa,{name:e.name,email:e.POC_Email,poc:e.POC_Name,orgID:e.orgID}),r.a.createElement("br",null))}))):r.a.createElement("div",null))};var ia=function(){var e=Object(D.f)(),a=Object(u.c)((function(e){return e.user}));return a.auth&&"superAdmin"==a.role||e.push("/administrator/signIn"),Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{fluid:!0,className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement(ca,null))))};var sa=function(){var e=Object(n.useState)(!0),a=Object(c.a)(e,2),t=a[0],l=a[1],o=Object(u.c)((function(e){return e.user})),i=Object(D.f)();return Object(n.useEffect)((function(){k(),o.auth&&("superAdmin"==o.role?i.push("/"):l(!1))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Administrator Sign In"),t?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(S.a,{variant:"dark",href:j+"/auth/github"},r.a.createElement("i",{class:"fab fa-github"}),"  Log in with Github"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("h1",null,"Access Denied"),r.a.createElement(S.a,{variant:"warning",href:"/"},"Back to Home "),r.a.createElement("br",null),r.a.createElement("br",null)))))};var ua=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1],o=Object(D.f)();return Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(B.a,{className:"p-3"},r.a.createElement(_.a,{className:"back-color"},r.a.createElement("h1",null,"Organisation Register"),r.a.createElement(De.a,{className:"A-AddOrganisationText"},r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblOrgName"},"Organisation Name:"),r.a.createElement("br",null),r.a.createElement(De.a.Control,{id:"txtOrgName",type:"text",required:!0})),r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblAlRooms"},"Allocated Rooms:"),r.a.createElement("br",null),r.a.createElement(De.a.Control,{id:"txtAlRooms",type:"text",required:!0}))),r.a.createElement(De.a.Label,{id:"lblAuthTypes"},"Types of Authencation:"),r.a.createElement("br",null),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Check,{id:"ckbLocal",type:"checkbox",label:"Local Login"})),r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Check,{id:"ckbGoggle",type:"checkbox",label:"Google Login"}))),r.a.createElement(De.a.Label,{className:"A-AddOrganisationTextColor",id:"lblPOC"},"Point of Contact (Senior Admin):"),r.a.createElement("br",null),r.a.createElement(De.a.Row,null,r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblName"},"Name:"),r.a.createElement("br",null),r.a.createElement(De.a.Control,{id:"txtName",type:"text",required:!0})),r.a.createElement(De.a.Group,{as:A.a},r.a.createElement(De.a.Label,{id:"lblEmail"},"Email:"),r.a.createElement("br",null),r.a.createElement(De.a.Control,{id:"txtEmail",type:"text",required:!0}))),r.a.createElement("p",null,t),r.a.createElement(S.a,{type:"submit",onClick:function(e){e.preventDefault();var a=document.getElementById("txtOrgName").value,t=document.getElementById("txtAlRooms").value,n=document.getElementById("ckbLocal").checked,r=document.getElementById("ckbGoggle").checked,c=document.getElementById("txtName").value,i=document.getElementById("txtEmail").value,u={orgName:a,orgRooms:t,authLocal:n.toString(),authGoogle:r.toString(),pName:c,pEmail:i};s.a.post("/administrator/addOrganisation",u).then((function(e){var a=e.data;"null"!=a.error?console.log(a.message):"Yes"==a.userError?l(a.message):"Successfully added"==a.message&&o.push("/administrator")})).catch((function(e){console.log(e)}))},variant:"warning"},"Register")))))},ma=t(19);var da=function(){var e=Object(u.b)(),a=Object(n.useState)(!1),t=Object(c.a)(a,2),l=t[0],o=t[1];return Object(n.useEffect)((function(){s.a.get("/auth",{withCredentials:!0}).then((function(a){console.log(a.data);var t=a.data.auth;e(m(t)),t&&("superAdmin"==a.data.role?(e(E("High-ViewStudios")),e(b("superAdmin"))):(e(d(a.data.user.uuid)),e(E(a.data.user.displayName)),e(b(a.data.user.role)),e(g(a.data.user.new)),e(f(a.data.user.requestedPassword)),e(p(a.data.user.orgID)),e(h(a.data.user.departments)),e(O(a.data.user.SARequest)))),o(!0)})).catch((function(e){console.log("Authe"+e)}))}),[]),r.a.createElement("div",null,l?r.a.createElement(ma.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement(U,null),r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/",exact:!0,component:x})," ",r.a.createElement(D.a,{path:"/org/:id",exact:!0,component:ra}),r.a.createElement(D.a,{path:"/org/:id/collisionBookings",component:ra}),r.a.createElement(D.a,{path:"/org/:id/organisationAdmin",component:ra}),r.a.createElement(D.a,{path:"/org/:id/signIn",component:ra}),r.a.createElement(D.a,{path:"/org/:id/forgotPassword",component:ra}),r.a.createElement(D.a,{path:"/org/:id/changePassword",component:ra}),r.a.createElement(D.a,{path:"/org/:id/changeOfSeniorRequest",component:ra}),r.a.createElement(D.a,{path:"/org/:id/createPassword",component:ra}),r.a.createElement(D.a,{path:"/org/:id/wrongOrganisation",component:ra}),r.a.createElement(D.a,{path:"/org/:id/userDetails",component:ra}),r.a.createElement(D.a,{path:"/org/:id/profileSettings",component:ra}),r.a.createElement(D.a,{path:"/org/:id/book",component:la}),r.a.createElement(D.a,{path:"/org/:id/wrongLogin/",component:Y}),r.a.createElement(D.a,{path:"/notConnected",component:R}),r.a.createElement(D.a,{path:"/administrator",exact:!0,component:ia})," ",r.a.createElement(D.a,{path:"/administrator/signIn",component:sa})," ",r.a.createElement(D.a,{path:"/administrator/organisationRegister",component:ua})))):r.a.createElement("div",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ea=t(66),ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{auth:!1,uuid:"",name:"",email:"",role:"",new:"",requestedPassword:!1,orgID:"",userDepartments:"",SARequest:""},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE_AUTH":return Object(ie.a)(Object(ie.a)({},e),{},{auth:a.value});case"USER_UPDATE_UUID":return Object(ie.a)(Object(ie.a)({},e),{},{uuid:a.value});case"USER_UPDATE_NAME":return Object(ie.a)(Object(ie.a)({},e),{},{name:a.value});case"USER_UPDATE_EMAIL":return Object(ie.a)(Object(ie.a)({},e),{},{email:a.value});case"USER_UPDATE_ROLE":return Object(ie.a)(Object(ie.a)({},e),{},{role:a.value});case"USER_UPDATE_NEW":return Object(ie.a)(Object(ie.a)({},e),{},{new:a.value});case"USER_UPDATE_REQUESTEDPASSWORD":return Object(ie.a)(Object(ie.a)({},e),{},{requestedPassword:a.value});case"USER_UPDATE_ORGID":return Object(ie.a)(Object(ie.a)({},e),{},{orgID:a.value});case"USER_UPDATE_USERDEPARTMENTS":return Object(ie.a)(Object(ie.a)({},e),{},{userDepartments:a.value});case"USER_UPDATE_SAREQUEST":return Object(ie.a)(Object(ie.a)({},e),{},{SARequest:a.value});default:return e}},ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",signInLocal:!1,signInGoogle:!1,message:"",useDepartments:!1,noOfDepartments:"",departments:[],allocatedRooms:0,redeemedRooms:0,rooms:[],layouts:[],holidays:[],locked:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORG_UPDATE_NAME":return Object(ie.a)(Object(ie.a)({},e),{},{name:a.value});case"ORG_UPDATE_SIGNIN_LOCAL":return Object(ie.a)(Object(ie.a)({},e),{},{signInLocal:a.value});case"ORG_UPDATE_SIGNIN_GOOGLE":return Object(ie.a)(Object(ie.a)({},e),{},{signInGoogle:a.value});case"ORG_UPDATE_MESSAGE":return Object(ie.a)(Object(ie.a)({},e),{},{message:a.value});case"ORG_UPDATE_USEDEPARTMENTS":return Object(ie.a)(Object(ie.a)({},e),{},{useDepartments:a.value});case"ORG_UPDATE_NOOFDEPARTMENTS":return Object(ie.a)(Object(ie.a)({},e),{},{noOfDepartments:a.value});case"ORG_UPDATE_DEPARTMENTS":return Object(ie.a)(Object(ie.a)({},e),{},{departments:a.value});case"ORG_UPDATE_ALLOCATEDROOMS":return Object(ie.a)(Object(ie.a)({},e),{},{allocatedRooms:a.value});case"ORG_UPDATE_REDEEMEDROOMS":return Object(ie.a)(Object(ie.a)({},e),{},{redeemedRooms:a.value});case"ORG_UPDATE_ROOMS":return Object(ie.a)(Object(ie.a)({},e),{},{rooms:a.value});case"ORG_UPDATE_LAYOUTS":return Object(ie.a)(Object(ie.a)({},e),{},{layouts:a.value});case"ORG_UPDATE_HOLIDAYS":return Object(ie.a)(Object(ie.a)({},e),{},{holidays:a.value});case"ORG_UPDATE_LOCKED":return Object(ie.a)(Object(ie.a)({},e),{},{locked:a.value});default:return e}},fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roomName:"",roomID:"",sessionID:"",sessionLabel:"",date:"",weekBeginDate:"",totalSessions:0,dayList:[],layoutData:{},weekSystem:!1,weekUUID:"",collideBookingsUpdate:!1,startTime:"",finishTime:"",timeInterval:"",forceSignIn:!1,fromSignIn:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_ROOM_NAME":return Object(ie.a)(Object(ie.a)({},e),{},{roomName:a.value});case"UPDATE_ROOM_ID":return Object(ie.a)(Object(ie.a)({},e),{},{roomID:a.value});case"UPDATE_ROOM_LAYOUT_DATA":return Object(ie.a)(Object(ie.a)({},e),{},{layoutData:a.value});case"UPDATE_ROOM_SESSION_ID":return Object(ie.a)(Object(ie.a)({},e),{},{sessionID:a.value});case"UPDATE_ROOM_SESSION_LABEL":return Object(ie.a)(Object(ie.a)({},e),{},{sessionLabel:a.value});case"UPDATE_ROOM_DATE":return Object(ie.a)(Object(ie.a)({},e),{},{date:a.value});case"UPDATE_ROOM_WEEK_BEGIN":return Object(ie.a)(Object(ie.a)({},e),{},{weekBeginDate:a.value});case"UPDATE_ROOM_TOTAL_SESSIONS":return Object(ie.a)(Object(ie.a)({},e),{},{totalSessions:a.value});case"UPDATE_ROOM_DAY_LIST":return Object(ie.a)(Object(ie.a)({},e),{},{dayList:a.value});case"UPDATE_ROOM_WEEK_SYSTEM":return Object(ie.a)(Object(ie.a)({},e),{},{weekSystem:a.value});case"UPDATE_ROOM_WEEK_UUID":return Object(ie.a)(Object(ie.a)({},e),{},{weekUUID:a.value});case"UPDATE_FORCE_COLLIDED_BOOKINGS":return Object(ie.a)(Object(ie.a)({},e),{},{collideBookingsUpdate:a.value});case"UPDATE_DIARY_START_TIME":return Object(ie.a)(Object(ie.a)({},e),{},{startTime:a.value});case"UPDATE_DIARY_FINISH_TIME":return Object(ie.a)(Object(ie.a)({},e),{},{finishTime:a.value});case"UPDATE_DIARY_TIME_INTERVAL":return Object(ie.a)(Object(ie.a)({},e),{},{timeInterval:a.value});case"UPDATE_FORCE_SIGNIN":return Object(ie.a)(Object(ie.a)({},e),{},{forceSignIn:a.value});case"UPDATE_FROM_SIGNIN":return Object(ie.a)(Object(ie.a)({},e),{},{fromSignIn:a.value});default:return e}},pa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{editBooking:!1,bookingID:0,user:"",department:"",sessionDes:"",sessionLength:"",bookingType:"",bookingUntil:"",comments:""},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_EDIT_BOOKING":return Object(ie.a)(Object(ie.a)({},e),{},{editBooking:a.value});case"UPDATE_BOOKING_ID":return Object(ie.a)(Object(ie.a)({},e),{},{bookingID:a.value});case"UPDATE_BOOKING_USER":return Object(ie.a)(Object(ie.a)({},e),{},{user:a.value});case"UPDATE_BOOKING_DEPARTMENT":return Object(ie.a)(Object(ie.a)({},e),{},{department:a.value});case"UPDATE_BOOKING_SESSIONDES":return Object(ie.a)(Object(ie.a)({},e),{},{sessionDes:a.value});case"UPDATE_BOOKING_SESSIONLENGTH":return Object(ie.a)(Object(ie.a)({},e),{},{sessionLength:a.value});case"UPDATE_BOOKING_BOOKINGTYPE":return Object(ie.a)(Object(ie.a)({},e),{},{bookingType:a.value});case"UPDATE_BOOKING_BOOKINGUNTIL":return Object(ie.a)(Object(ie.a)({},e),{},{bookingUntil:a.value});case"UPDATE_BOOKING_COMMENTS":return Object(ie.a)(Object(ie.a)({},e),{},{comments:a.value});default:return e}},ha=Object(Ea.b)({user:ba,organisation:ga,globalVars:fa,bookings:pa}),Oa=Object(Ea.c)(ha,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(u.a,{store:Oa},r.a.createElement(da,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.f5ecd712.chunk.js.map