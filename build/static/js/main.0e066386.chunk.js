(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[0],{215:function(e,a,t){e.exports=t(471)},220:function(e,a,t){},245:function(e,a,t){},246:function(e,a,t){},247:function(e,a,t){},39:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADICAYAAAC+j+5qAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAwKADAAQAAAABAAAAyAAAAAB9S3ILAAAF30lEQVR4Ae3cQW4UVhAE0BkzFzCC8yQ3i48WzgPIFwA7jhQiNmyaX8LVPDYGrN/qfuWSvLEvF38IECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYJfAddc5v/aaN/cfn1MbfH18L6sA7l1gppEEagQUoCYqiyYEFCChamaNgALURGXRhIACJFTNrBFQgJqoLJoQUICEqpk1AgpQE5VFEwIKkFA1s0ZAAWqismhCQAESqmbWCChATVQWTQgoQELVzBoBBaiJyqIJAQVIqJpZI6AANVFZNCGgAAlVM2sEFKAmKosmBBQgoWpmjYAC1ERl0YSAAiRUzawRUICaqCyaEFCAhKqZNQIKUBOVRRMCCpBQNbNGQAFqorJoQkABEqpm1ggoQE1UFk0IKEBC1cwaAQWoicqiCQEFSKiaWSOgADVRWTQhoAAJVTNrBBSgJiqLJgQUIKFqZo2AAtREZdGEgAIkVM2sEVCAmqgsmhBQgISqmTUCClATlUUTAgqQUDWzRkABaqKyaEJAARKqZtYIKEBNVBZNCChAQtXMGgEFqInKogkBBUiomlkjoAA1UVk0IaAACVUzawQUoCYqiyYEFCChamaNgALURGXRhIACJFTNrBFQgJqoLJoQUICEqpk1AgpQE5VFEwIKkFA1s0ZAAWqismhCQAESqmbWCChATVQWTQgoQELVzBoBBaiJyqIJAQVIqJpZI6AANVFZNCGgAAlVM2sEFKAmKosmBBQgoWpmjYAC1ERl0YSAAiRUzawRUICaqCyaEFCAhKqZNQIKUBOVRRMCCpBQNbNGQAFqorJoQkABEqpm1ggoQE1UFk0IKEBC1cwaAQWoicqiCQEFSKiaWSOgADVRWTQhoAAJVTNrBG63d49/XJ6e/qzZ+BUv+vz8FNvu9vbzX7Hhv9Pgu7u/v3y6//Dt5Nu/X/wvwT18+w8fX6eAjM7kcn26PLxM+r8AvgU642pKqYAClAZn7TMCCnDG0ZRSAQUoDc7aZwQU4IyjKaUCClAanLXPCCjAGUdTSgUUoDQ4a58RUIAzjqaUCihAaXDWPiOgAGccTSkVUIDS4Kx9RkABzjiaUiqgAKXBWfuMgAKccTSlVEABSoOz9hkBBTjjaEqpgAKUBmftMwIKcMbRlFIBBSgNztpnBBTgjKMppQK3y8uvifjvJ+VLT3g9ayd/c8P1evfwei4t3uTl6/377a/f/8Pff07gzf3H55+b8OPXXx/fy+rHPOPP+BZoTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOfhBgEF2JCiG8YCCjCm83CDgAJsSNENYwEFGNN5uEFAATak6IaxgAKM6TzcIKAAG1J0w1hAAcZ0Hm4QUIANKbphLKAAYzoPNwgowIYU3TAWUIAxnYcbBBRgQ4puGAsowJjOww0CCrAhRTeMBRRgTOchAQIECBAg0CvwDwWvJ3alsOgjAAAAAElFTkSuQmCC"},40:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADICAYAAAC+j+5qAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAwKADAAQAAAABAAAAyAAAAAB9S3ILAAADRUlEQVR4Ae3cQQqCYBQE4D/xAkH3qaN1tLpP0AXCMqi2A+0cvjaCT8H5nrO0MfwIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQI/Cewmw/341iW03+3u4vAxgSm6fK47a/fp57fL//zuZy/JxwJNAvslnFe8/0KMDWHlY1AElCAJGReLaAA1esVLgkoQBIyrxZQgOr1CpcEFCAJmVcLKED1eoVLAgqQhMyrBRSger3CJQEFSELm1QIKUL1e4ZKAAiQh82oBBaher3BJQAGSkHm1gAJUr1e4JKAASci8WkABqtcrXBJQgCRkXi2gANXrFS4JKEASMq8WUIDq9QqXBOax/k3E50v5dK05ge0LrO/79kNIQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsCWBF/saEjPJd4SSAAAAAElFTkSuQmCC"},471:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(32),o=t.n(l),c=(t(220),t(7)),s=t(11),i=t.n(s),u=t(9),m=function(e){return{type:"USER_UPDATE_AUTH",value:e}},d=function(e){return{type:"USER_UPDATE_UUID",value:e}},E=function(e){return{type:"USER_UPDATE_NAME",value:e}},b=function(e){return{type:"USER_UPDATE_ROLE",value:e}},g=function(e){return{type:"USER_UPDATE_NEW",value:e}},f=function(e){return{type:"USER_UPDATE_REQUESTEDPASSWORD",value:e}},y=function(e){return{type:"USER_UPDATE_ORGID",value:e}},O=function(e){return{type:"USER_UPDATE_SAREQUEST",value:e}};t(242),t(243),t(244),t(245),t(246),t(247);var h=function(){return r.a.createElement("div",{className:"betaBanner"},r.a.createElement("p",null,r.a.createElement("strong",null,"This website is a beta verison, please expect errors. Any problems, please contact High-View Studios (Shaun Evans)")))},p=t(481),v=t(205),A="";var j=function(){var e=window.location.hostname,a=window.location.protocol;A="localhost"===e?a+"//"+e+":8080":a+"//"+e},k=t(26),D=function(e){return{type:"UPDATE_EDIT_BOOKING",value:e}},w=t(73),T=t(17);var I=function(){var e=Object(k.f)(),a=Object(u.c)((function(e){return e.user})),t=Object(u.b)(),l=Object(n.useState)({name:"",show:!1}),o=Object(c.a)(l,2),s=o[0],d=o[1];function O(){i.a.get("/logout").then((function(n){if(console.log(n.data.message),"User logged out"===n.data.message){var r;if(console.log(a),"superAdmin"==a.role)r="/";else r="/org/"+a.orgID+"/signIn";t(m(!1)),t(E("")),t(b("")),t(g("")),t(f(!1)),t(y("")),t(D(!1)),e.push(r)}})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){j()}),[]),Object(n.useEffect)((function(){a.auth?"superAdmin"==a.role?d({name:"High-View Studios",show:!0}):d({name:a.name,show:!0}):d({name:"",show:!1})}),[a]),r.a.createElement("div",null,s.show?r.a.createElement("div",null,r.a.createElement("strong",null,"User: ",s.name),r.a.createElement("br",null),"seniorAdmin"==a.role?r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(w.a.Toggle,{variant:"warning",id:"dropdown-basic"},"Page"),r.a.createElement(T.a,{variant:"warning",onClick:O},"Log Out"),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{onClick:function(){return e.push("/")}},"Organisation Home"),r.a.createElement(w.a.Item,{onClick:function(){return e.push("/org/"+a.orgID+"/organisationAdmin")}},"Organisation Admin")))):r.a.createElement("div",null,r.a.createElement(T.a,{variant:"warning",onClick:O},"Log Out"))):r.a.createElement("div",null))};var C=function(){return r.a.createElement("nav",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,null,r.a.createElement("a",{className:"websiteTitle",href:"/"},r.a.createElement("div",{className:"clickable"},r.a.createElement("h1",null,r.a.createElement("strong",null,"My STAFF")),r.a.createElement("h2",null,r.a.createElement("strong",null,"Space, Times, Flexible, Facilities"))))),r.a.createElement(v.a,null,r.a.createElement("div",{className:"user-nav"},r.a.createElement(I,null)))))},S=t(19),N=t(20);var U=function(){var e=Object(u.c)((function(e){return e.user})),a=Object(k.f)();return Object(n.useEffect)((function(){document.title="STAFF",console.log(e),1==e.auth&&("superAdmin"==e.role?a.push("/administrator"):a.push("/org/"+e.orgID))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{fluid:!0,className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"My STAFF homepage is coming soon..."),r.a.createElement("br",null),r.a.createElement("h2",null,"If your organisation is already using My STAFF, please use the direct link from your registration email."))))};var B=function(){var e=Object(u.c)((function(e){return e.user})),a=Object(k.f)();return Object(n.useEffect)((function(){document.title="STAFF - Not Connected",j(),e.auth&&a.push("/")}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h3",null,"Email is not connected to any organisation"),r.a.createElement(T.a,{variant:"warning",onClick:function(){return a.push("/")}},"Back to Home"),r.a.createElement("br",null),r.a.createElement("br",null))))};var x=function(e){var a=e.match.params.id,t=(Object(u.c)((function(e){return e.user})),Object(k.f)());return Object(n.useEffect)((function(){document.title="STAFF - Not Connected",j()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h3",null,"This is not the login method you use to log in"),r.a.createElement(T.a,{variant:"warning",onClick:function(){return t.push("/org/"+a+"/")}},"Back"),r.a.createElement("br",null),r.a.createElement("br",null))))},R=function(e){return{type:"ORG_UPDATE_SIGNIN_LOCAL",value:e}},Y=function(e){return{type:"ORG_UPDATE_SIGNIN_GOOGLE",value:e}},_=function(e){return{type:"ORG_UPDATE_MESSAGE",value:e}},L=function(e){return{type:"ORG_UPDATE_USEDEPARTMENTS",value:e}},M=function(e){return{type:"ORG_UPDATE_NOOFDEPARTMENTS",value:e}},P=function(e){return{type:"ORG_UPDATE_DEPARTMENTS",value:e}},Q=function(e){return{type:"ORG_UPDATE_REDEEMEDROOMS",value:e}},F=function(e){return{type:"ORG_UPDATE_ROOMS",value:e}},G=function(e){return{type:"ORG_UPDATE_HOLIDAYS",value:e}},H=function(e){return{type:"ORG_UPDATE_LOCKED",value:e}},q=function(e){return{type:"UPDATE_ROOM_NAME",value:e}},W=function(e){return{type:"UPDATE_ROOM_ID",value:e}},K=function(e){return{type:"UPDATE_ROOM_LAYOUT_DATA",value:e}},V=function(e){return{type:"UPDATE_ROOM_SESSION_ID",value:e}},J=function(e){return{type:"UPDATE_ROOM_SESSION_LABEL",value:e}},z=function(e){return{type:"UPDATE_ROOM_DATE",value:e}},X=function(e){return{type:"UPDATE_ROOM_WEEK_BEGIN",value:e}},Z=function(e){return{type:"UPDATE_ROOM_DAY_LIST",value:e}},$=function(e){return{type:"UPDATE_ROOM_WEEK_SYSTEM",value:e}},ee=function(e){return{type:"UPDATE_ROOM_WEEK_UUID",value:e}},ae=function(e){return{type:"UPDATE_FORCE_COLLIDED_BOOKINGS",value:e}},te=function(e){return{type:"UPDATE_FORCE_SIGNIN",value:e}},ne=function(e){return{type:"UPDATE_FROM_SIGNIN",value:e}},re=t(14),le=t(1),oe=t(72),ce=t(482),se=t(13),ie=t.n(se);var ue=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=Object(k.f)(),m=Object(u.b)(),d=Object(n.useState)({slotClass:"",dayClass:"",dates:["","","","","","",""],weekSlot:"",dayIndex:0,data:{},holiday:"",weekSystemUUID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({days:[],order:[],sessions:[],sessionTotal:0}),y=Object(c.a)(f,2),O=y[0],h=y[1],A=Object(n.useState)({open:!1,heading:"",message:""}),j=Object(c.a)(A,2),w=j[0],I=j[1];function C(){I((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function S(t,n,r){for(var l={},o=[],c=ie()(t,"DD/MM/YYYY"),s={user:"",department:"",type:""},u=U(c.week())+"-"+c.format("YY"),m=0;m<7;m++){var d,E=Object(re.a)(n);try{for(E.s();!(d=E.n()).done;){var b=d.value;o.push(U(c.day())+"-"+U(r[b].id)),l[U(c.week())+"-"+c.format("YY")+"-"+U(c.day())+"-"+U(r[b].id)]=s}}catch(y){E.e(y)}finally{E.f()}c.add(1,"d")}var f={orgID:a,room:e.roomID,week:u,days:o,weekBG:t};i.a.post("/booking/getBookings",f).then((function(e){var a=e.data;console.log(a.bookings),"null"===a.error&&g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSlot:u,data:a.bookings})}))})).catch((function(e){console.log(e)}))}function N(a){var n,r=ie()(a,"DD/MM/YYYY"),l=U(r.week())+"-"+r.format("YY"),o="",c=Object(re.a)(t.holidays);try{var s=function(){var a=n.value;if(a.weeks.includes(l))return a.titleUUID.includes("w")?e.weekSystem&&(o=a.name,g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystemUUID:a.titleUUID})}))):a.titleUUID.includes("h")&&(o="Holiday: "+a.name),"break"};for(c.s();!(n=c.n()).done;){if("break"===s())break}}catch(i){c.e(i)}finally{c.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{holiday:o})}))}function U(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}function B(t){var n=t.target.id,r=n.toString().split("-");m(q(e.roomName)),m(W(e.roomID)),m(V(n)),m($(e.weekSystem)),m(ee(b.weekSystemUUID)),m(K(e.layoutData)),O.sessions[r[1]].id.includes("b")?m(J(O.sessions[r[1]].breakText)):""!=O.sessions[r[1]].customText?m(J(O.sessions[r[1]].customText)):m(J(O.sessions[r[1]].id)),m(X(b.dates[0])),m(z(b.dates[r[0]])),m({type:"UPDATE_ROOM_TOTAL_SESSIONS",value:O.sessionTotal}),m(Z(O.days)),s.push("/org/"+a+"/book")}function x(){m(D(!0))}function R(e,a,t){for(var n=[],r=0;r<7;r++)n.push(e.format("DD/MM/YYYY")),e.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:n})})),S(n[0],a,t),N(n[0])}function Y(e){var a,n=Object(re.a)(t.departments);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.uuid==e)return r.name}}catch(l){n.e(l)}finally{n.f()}}return Object(n.useEffect)((function(){!function(){console.log(e.weekSystem);var t,n=e.layoutData.days.split(","),r=[],o={},s=e.layoutData.sessionOrder.split(","),u=Object(re.a)(n);try{for(u.s();!(t=u.n()).done;){var m=t.value;r.push("true"==m)}}catch(E){u.e(E)}finally{u.f()}var d={orgID:a,layoutUUID:e.layoutData.uuid};i.a.post("/organisation/getTimetableSessions",d).then((function(a){var t,n=a.data.sessions,i=Object(re.a)(n);try{for(i.s();!(t=i.n()).done;){var u=t.value;o[u.id]=u}}catch(E){i.e(E)}finally{i.f()}h((function(a){return Object(le.a)(Object(le.a)({},a),{},{days:r,sessions:o,sessionTotal:e.layoutData.sessions,order:s})}));var m,d=0,b=Object(re.a)(r);try{for(b.s();!(m=b.n()).done;){m.value&&d++}}catch(E){b.e(E)}finally{b.f()}if(console.log(d),g((function(e){return Object(le.a)(Object(le.a)({},e),{},{slotClass:"session"+d+"-slot timetable-layout",dayClass:"session"+d+"-days timetable-layout"})})),console.log(l.weekBeginDate),""==l.weekBeginDate){var f=function(e){var a=ie()();a.startOf("week");for(var t,n=[],r=0;r<7;r++)n.push(a.format("DD/MM/YYYY")),a.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:n})}));var l,o=Object(re.a)(e.entries());try{for(o.s();!(l=o.n()).done;){var s=Object(c.a)(l.value,2),i=s[0];if(s[1]){t=i;break}}}catch(E){o.e(E)}finally{o.f()}return g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dayIndex:t})})),n[0]}(r);S(f,s,o),N(f)}else{!function(e){var a,t,n=Object(re.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),l=r[0];if(r[1]){a=l;break}}}catch(E){n.e(E)}finally{n.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dayIndex:a})}))}(r),R(ie()(l.weekBeginDate,"DD/MM/YYYY"),s,o)}})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred"},"Week Beginning: ",b.dates[b.dayIndex]))),r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred-100"},b.holiday))),r.a.createElement(v.a,null,r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(T.a,{variant:"primary",onClick:function(){var a=ie()(b.dates[0],"DD/MM/YYYY");a.subtract(1,"w");var t=ie()();t.startOf("week"),a<t?I({heading:e.roomName,message:"You cannot go back previous from this week",open:!0}):R(a,O.order,O.sessions)}},"-"),r.a.createElement(T.a,{variant:"primary",onClick:function(){var e=ie()(b.dates[0],"DD/MM/YYYY");e.add(1,"w"),R(e,O.order,O.sessions)}},"+")))),r.a.createElement(p.a,null,r.a.createElement("table",{className:"timetable-layout",width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:b.slotClass},"Session"),O.days.map((function(e,a){if(e)return r.a.createElement("td",{className:b.dayClass,key:a},o[a]," ",r.a.createElement("br",null)," ",b.dates[a])})))),r.a.createElement("tbody",null,O.order.map((function(e,a){return e.toString().includes("b")?r.a.createElement("tr",{key:a,style:{backgroundColor:O.sessions[e].bgColor}},r.a.createElement("td",{className:b.slotClass,style:{color:O.sessions[e].textColor}},""!=O.sessions[e].breakText?O.sessions[e].breakText:O.sessions[e].id),O.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var l=b.weekSlot+"-"+U(n)+"-"+U(O.sessions[e].id);return"single"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+O.session,onClick:x},b.data[l].user," ",r.a.createElement("br",null)," ",Y(b.data[l].department)):"repeat"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:x},b.data[l].user," ",r.a.createElement("br",null)," ",Y(b.data[l].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:B},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:B},"Book")}}))):r.a.createElement("tr",{key:a},r.a.createElement("td",{className:b.slotClass,"data-tip":""!=O.sessions[e].hoverText?O.sessions[e].hoverText:null},""!=O.sessions[e].customText?O.sessions[e].customText:O.sessions[e].id),O.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var l=b.weekSlot+"-"+U(n)+"-"+U(O.sessions[e].id);return"single"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+e,onClick:x},b.data[l].user," ",r.a.createElement("br",null)," ",Y(b.data[l].department)):"repeat"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:x},b.data[l].user," ",r.a.createElement("br",null)," ",Y(b.data[l].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:B},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:B},"Book")}})))})),void oe.a.rebuild())),r.a.createElement(oe.a,null)),r.a.createElement(ce.a,{show:w.open,onHide:C},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,w.heading)),r.a.createElement(ce.a.Body,null,w.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:C},"Close"))))};var me=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=Object(u.b)(),m=Object(k.f)(),d=Object(n.useState)({slotClass:"",dayClass:"",times:[],startTime:"",finishTime:"",interval:"",dates:["","","","","","",""],dayIndex:0,weekSlot:"",data:{},holiday:"",days:[],weekSystemUUID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1];Object(n.useEffect)((function(){!function(){var a,t=e.layoutData.days.split(","),n=[],r=e.layoutData.startTime,o=e.layoutData.finishTime,s=e.layoutData.timeInterval,i=Object(re.a)(t);try{for(i.s();!(a=i.n()).done;){var u=a.value;n.push("true"==u)}}catch(y){i.e(y)}finally{i.f()}for(var m=0,d=0,E=n;d<E.length;d++){E[d]&&m++}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{slotClass:"session"+m+"-slot timetable-layout",dayClass:"session"+m+"-days timetable-layout",startTime:r,finishTime:o,interval:s,days:n})}));var b=function(e,a,t){var n=[];if("Start Time"!==e&&"Finish Time"!==a&&0!==t){for(var r=ie()(e,"HH:mm"),l=ie()(a,"HH:mm");r.isBefore(l);)n.push(r.format("HH:mm")),r.add(t,"m");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{times:n})}))}return n}(r,o,s);if(""==l.weekBeginDate){var f=function(e){var a=ie()();a.startOf("week");for(var t,n=[],r=0;r<7;r++)n.push(a.format("DD/MM/YYYY")),a.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:n})}));var l,o=Object(re.a)(e.entries());try{for(o.s();!(l=o.n()).done;){var s=Object(c.a)(l.value,2),i=s[0];if(s[1]){t=i;break}}}catch(y){o.e(y)}finally{o.f()}return g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekbegin:n[0],dayIndex:t})})),n[0]}(n);D(f,b),j(f)}else{!function(e){var a,t,n=Object(re.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),l=r[0];if(r[1]){a=l;break}}}catch(y){n.e(y)}finally{n.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dayIndex:a})}))}(n),I(ie()(l.weekBeginDate,"DD/MM/YYYY"),b)}}()}),[]);var f=Object(n.useState)({open:!1,heading:"",message:""}),y=Object(c.a)(f,2),O=y[0],h=y[1];function A(){h((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function j(a){var n,r=ie()(a,"DD/MM/YYYY"),l=w(r.week())+"-"+r.format("YY"),o="",c=Object(re.a)(t.holidays);try{var s=function(){var a=n.value;if(a.weeks.includes(l))return a.titleUUID.includes("w")?e.weekSystem&&(o=a.name,g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystemUUID:a.titleUUID})}))):a.titleUUID.includes("h")&&(o="Holiday: "+a.name),"break"};for(c.s();!(n=c.n()).done;){if("break"===s())break}}catch(i){c.e(i)}finally{c.f()}g((function(e){return Object(le.a)(Object(le.a)({},e),{},{holiday:o})}))}function D(t,n){for(var r={},l=[],o=ie()(t,"DD/MM/YYYY"),c={user:"",department:"",type:""},s=w(o.week())+"-"+o.format("YY"),u=0;u<7;u++){var m,d=Object(re.a)(n);try{for(d.s();!(m=d.n()).done;){var E=m.value;l.push(w(o.day())+"-"+E.replace(":","")),r[w(o.week())+"-"+o.format("YY")+"-"+w(o.day())+"-"+E.replace(":","")]=c}}catch(f){d.e(f)}finally{d.f()}o.add(1,"d")}var b={orgID:a,room:e.roomID,week:s,days:l,weekBG:t};i.a.post("/booking/getBookings",b).then((function(e){var a=e.data;"null"===a.error&&g((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSlot:s,data:a.bookings})}))})).catch((function(e){console.log(e)}))}function w(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}function I(e,a){for(var t=[],n=0;n<7;n++)t.push(e.format("DD/MM/YYYY")),e.add(1,"d");g((function(e){return Object(le.a)(Object(le.a)({},e),{},{dates:t})})),D(t[0],a),j(t[0])}function C(t){var n=t.target.id;console.log(n);var r=n.toString().split("-");s(q(e.roomName)),s(W(e.roomID)),s(K(e.layoutData)),s(V(n)),s(J(r[1])),s(X(b.dates[0])),s(z(b.dates[r[0]])),s(Z(b.days)),s($(e.weekSystem)),s(ee(b.weekSystemUUID)),s({type:"UPDATE_DIARY_START_TIME",value:b.startTime}),s(function(e){return{type:"UPDATE_DIARY_FINISH_TIME",value:e}}(b.finishTime)),s(function(e){return{type:"UPDATE_DIARY_TIME_INTERVAL",value:e}}(b.interval)),m.push("/org/"+a+"/book")}function S(e){var a,n=Object(re.a)(t.departments);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.uuid==e)return r.name}}catch(l){n.e(l)}finally{n.f()}}return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred"},"Week Beginning: ",b.dates[b.dayIndex]))),r.a.createElement(v.a,null,r.a.createElement("strong",null,r.a.createElement("div",{className:"centred-100"},b.holiday))),r.a.createElement(v.a,null,r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(T.a,{variant:"primary",onClick:function(){var a=ie()(b.dates[0],"DD/MM/YYYY");a.subtract(1,"w");var t=ie()();t.startOf("week"),a<t?h({heading:e.roomName,message:"You cannot go back previous from this week",open:!0}):I(a,b.times)}},"-"),r.a.createElement(T.a,{variant:"primary",onClick:function(){var e=ie()(b.dates[0],"DD/MM/YYYY");e.add(1,"w"),I(e,b.times)}},"+")))),r.a.createElement(p.a,null,r.a.createElement("table",{className:"timetable-layout",width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{className:b.slotClass},"Session"),b.days.map((function(e,a){if(e)return r.a.createElement("td",{className:b.dayClass,key:a},o[a]," ",r.a.createElement("br",null)," ",b.dates[a])})))),r.a.createElement("tbody",null,b.times.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:b.slotClass},e),b.days.map((function(a,n){if(a){if(Object.keys(b.data).length>0){var l=b.weekSlot+"-"+w(n)+"-"+e.replace(":","");return"single"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout singleSlot",key:n,id:n+"-"+e,onClick:C},b.data[l].user," ",r.a.createElement("br",null)," ",S(b.data[l].department)):"repeat"==b.data[l].type?r.a.createElement("td",{className:" timetable-layout repeatSlot",key:n,id:n+"-"+e,onClick:C},b.data[l].user," ",r.a.createElement("br",null)," ",S(b.data[l].department)):r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:C},"Book")}return r.a.createElement("td",{className:t.locked?"timetable-layout emptySlotDisabled":"timetable-layout emptySlot",key:n,id:n+"-"+e,onClick:C},"Book")}})))}))))),r.a.createElement(ce.a,{show:O.open,onHide:A},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,O.heading)),r.a.createElement(ce.a.Body,null,O.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:A},"Close"))))};var de=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(u.c)((function(e){return e.bookings})),s=Object(u.c)((function(e){return e.user})),i=Object(u.b)(),m=Object(n.useState)({orgTitle:"",orgLocked:"",roomName:"Rooms",roomLayout:"",roomID:"",layoutData:{},view:!1,weekSystem:!1}),d=Object(c.a)(m,2),E=d[0],b=d[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),y=f[0],O=f[1];function h(){O((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}return Object(n.useEffect)((function(){document.title="STAFF",""!=l.roomName&&(console.log(l.roomName),b((function(e){return Object(le.a)(Object(le.a)({},e),{},{roomName:l.roomName,roomLayout:l.layoutData.layout,layoutData:l.layoutData,roomID:l.roomID,weekSystem:l.weekSystem})})),setTimeout((function(){b((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!0})}))}),100))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{fluid:!0,className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,t.name),t.locked?r.a.createElement("h2",null,"Organisation Locked"):null,r.a.createElement(p.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,{xs:8},r.a.createElement("div",{className:"roomLbl"},"Rooms:"),r.a.createElement(w.a,{className:"rooms"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},E.roomName),r.a.createElement(w.a.Menu,{className:"dropdown-items"},t.rooms.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:function(){!function(e,a,n,r){var l;b((function(a){return Object(le.a)(Object(le.a)({},a),{},{roomName:e,roomLayout:"---",roomID:n,weekSystem:!1})}));var o,c=Object(re.a)(t.layouts);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.uuid==a&&(l=s)}}catch(u){c.e(u)}finally{c.f()}b((function(a){return Object(le.a)(Object(le.a)({},a),{},{roomName:e,roomLayout:l.layout,roomID:n,weekSystem:"true"==r,layoutData:l,view:!1})})),i(D(!1)),setTimeout((function(){b((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!0})}))}),100)}(e.name,e.layout,e.uuid,e.weekSystem)}},e.name)}))))),r.a.createElement(v.a,null)),r.a.createElement(p.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,{xs:8},E.view?r.a.createElement("div",null,""!=E.roomLayout&&"Timetable"==E.roomLayout?r.a.createElement(ue,{orgID:a,roomName:E.roomName,roomID:E.roomID,layoutData:E.layoutData,weekSystem:E.weekSystem}):null,""!=E.roomLayout&&"Diary"==E.roomLayout?r.a.createElement(me,{orgID:a,roomName:E.roomName,roomID:E.roomID,layoutData:E.layoutData,weekSystem:E.weekSystem}):null):null),r.a.createElement(v.a,null,r.a.createElement("div",{className:o.editBooking?"edit-booking-show":"edit-booking-hide"},r.a.createElement("div",{className:"edit-delete"},"user"!=s.role?r.a.createElement(T.a,{variant:"primary",onClick:function(){O({heading:"Delete Booking",message:"This feature has not been completed yet!",open:!0})}},"Delete"):null)))))),r.a.createElement(ce.a,{show:y.open,onHide:h},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,y.heading)),r.a.createElement(ce.a.Body,null,y.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:h},"Close"))))},Ee=t(16),be=t(117);var ge=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.globalVars}));return r.a.createElement("div",null,r.a.createElement(be.a,{body:!0,className:"collides_bookingSlot"},r.a.createElement(p.a,null,"Booking - Room: ",e.roomName),r.a.createElement(p.a,null,r.a.createElement(v.a,null,"User: ",r.a.createElement("br",null),e.user),r.a.createElement(v.a,null,"Description: ",r.a.createElement("br",null),e.sessionDes),r.a.createElement(v.a,null,"Booking Type:",r.a.createElement("br",null)," ",e.bookingType," - ",e.repeatType),r.a.createElement(v.a,null,"Start Date: ",r.a.createElement("br",null)," ",e.startDate),r.a.createElement(v.a,null,"Session: ",e.session),r.a.createElement(v.a,null,"Session Length: ",e.sessionTotal),r.a.createElement(v.a,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){return function(n){var r={orgID:e.orgID,bookingUUID:n};i.a.post("/collide/deleteBooking",r).then((function(e){"null"==e.data.error&&(t.collideBookingsUpdate?a(ae(!1)):a(ae(!0)))})).catch((function(e){console.log(e)}))}(e.uuid)}},"Delete")))))};var fe=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.globalVars}));return r.a.createElement("div",null,r.a.createElement(be.a,{body:!0,className:"collides_collideSlot"},r.a.createElement(p.a,null,"Collided Booking"),r.a.createElement(p.a,null,r.a.createElement(v.a,null,"User: ",r.a.createElement("br",null),e.user),r.a.createElement(v.a,null,"Description: ",r.a.createElement("br",null),e.sessionDes),r.a.createElement(v.a,null,"Booking Type:",r.a.createElement("br",null)," ",e.bookingType),r.a.createElement(v.a,null,"Start Date: ",r.a.createElement("br",null)," ",e.startDate),r.a.createElement(v.a,null,"Session: ",e.session),r.a.createElement(v.a,null,"Session Length: ",e.sessionTotal),r.a.createElement(v.a,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){return function(n,r){var l={orgID:e.orgID,bookingUUID:n,collideUUID:r};i.a.post("/collide/deleteCollide",l).then((function(e){"null"==e.data.error&&(t.collideBookingsUpdate?a(ae(!1)):a(ae(!0)))})).catch((function(e){console.log(e)}))}(e.bookingUUID,e.uuid)}},"Delete")))))};var ye=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(k.f)(),s=Object(n.useState)({bookings:[]}),m=Object(c.a)(s,2),d=m[0],E=m[1];function b(e){return e.toString().includes("b")?1==(e=e.replace("b","")).toString().length?"b0"+e:e:1==e.toString().length?"0"+e:e}return Object(n.useEffect)((function(){!function(){if(t.locked){var e=Object(Ee.a)({orgID:a},"orgID",a);i.a.post("/organisation/collidedbookings",e).then((function(e){var n=e.data;"null"!=n.error?o.push("/org/"+a+"/organisationAdmin"):n.bookings.length>0?function(e,a,n){var r,l=Object(re.a)(e);try{for(l.s();!(r=l.n()).done;){var o,c=r.value,s=c.sessions.split(",")[0].split("-")[1],i="",u="",m=Object(re.a)(t.rooms);try{for(m.s();!(o=m.n()).done;){var d=o.value;d.uuid==c.roomID&&(c.roomName=d.name,i=d.layout)}}catch(B){m.e(B)}finally{m.f()}var g,f=Object(re.a)(t.layouts);try{for(f.s();!(g=f.n()).done;){var y=g.value;y.uuid==i&&(u=y.layout)}}catch(B){f.e(B)}finally{f.f()}if("Timetable"==u){var O,h=Object(re.a)(n);try{for(h.s();!(O=h.n()).done;){var p=O.value;p.layoutUUID==i&&b(p.id)==s&&(s.includes("b")?""!=p.breakText?c.firstSession=p.breakText:c.firstSession=s:""!=p.customText?c.firstSession=p.customText:c.firstSession=s)}}catch(B){h.e(B)}finally{h.f()}}else"Diary"==u&&(c.firstSession=s[0]+s[1]+":"+s[2]+s[3]);var v,A=c.collideUUID.split(","),j=[],k=Object(re.a)(A);try{for(k.s();!(v=k.n()).done;){var D,w=v.value,T=Object(re.a)(a);try{for(T.s();!(D=T.n()).done;){var I=D.value;if(I.uuid==w){var C=I.sessions.split(",")[0].split("-")[1];if("Timetable"==u){var S,N=Object(re.a)(n);try{for(N.s();!(S=N.n()).done;){var U=S.value;U.layoutUUID==i&&b(U.id)==C&&(C.includes("b")?""!=U.breakText?I.firstSession=U.breakText:I.firstSession=C:""!=U.customText?I.firstSession=U.customText:I.firstSession=C)}}catch(B){N.e(B)}finally{N.f()}}else"Diary"==u&&(I.firstSession=C[0]+C[1]+":"+C[2]+C[3]);j.push(I)}}}catch(B){T.e(B)}finally{T.f()}}}catch(B){k.e(B)}finally{k.f()}c.collideBookings=j}}catch(B){l.e(B)}finally{l.f()}E((function(a){return Object(le.a)(Object(le.a)({},a),{},{bookings:e})}))}(n.bookings,n.collides,n.sessions):o.push("/org/"+a+"/organisationAdmin")})).catch((function(e){console.log(e)}))}else o.push("/org/"+a)}()}),[l.collideBookingsUpdate]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{fluid:!0,className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Collision Bookings"),r.a.createElement("br",null),d.bookings.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(ge,{orgID:a,uuid:e.uuid,roomName:e.roomName,user:e.user,sessionDes:e.sessionDes,bookingType:e.bookingType,repeatType:e.repeatType,startDate:e.startDate,sessionTotal:e.sessionTotal,session:e.firstSession}),d.bookings[t].collideBookings.map((function(t,n){return r.a.createElement(fe,{orgID:a,bookingUUID:e.uuid,uuid:t.uuid,key:n,user:t.user,sessionDes:t.sessionDes,bookingType:t.bookingType,startDate:t.startDate,sessionTotal:t.sessionTotal,session:t.firstSession})})),r.a.createElement("br",null))})))))};var Oe=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.user})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(u.b)(),s=Object(n.useState)({organisation:{}}),m=Object(c.a)(s,2),d=m[0],E=m[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),y=f[0],h=f[1];function A(){l.forceSignIn?(o(ne(!0)),o(te(!1))):(o(ne(!0)),o(te(!0))),h((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}return Object(n.useEffect)((function(){!function(){var e={orgID:a};i.a.post("/organisation/getSARData",e).then((function(e){console.log(e.data.org),E({organisation:e.data.org})})).catch((function(e){console.log(e)}))}()}),[]),r.a.createElement("div",{className:"body changeOfSenior"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Change of Senior Admin Request"),r.a.createElement("br",null),r.a.createElement("p",null,"You are viewing this screen because ",d.organisation.POC_Name," has requested a change of Senior Admin role to you. "),r.a.createElement("p",null,"This means that you will be responible for the admin side of your organisation."),r.a.createElement("p",null,"If you require help, please speak to ",d.organisation.POC_Name," or contact High-View Studios"),r.a.createElement("p",null,"Do you want to Accept or Decline this invitation?"),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){var e,n=(e={orgID:a},Object(Ee.a)(e,"orgID",a),Object(Ee.a)(e,"invate","Accept"),Object(Ee.a)(e,"newUserID",t.uuid),e);i.a.post("/organisation/SAInvate",n).then((function(e){console.log(e.data),"Senior Admin Updated"==e.data.message&&(o(b(e.data.role)),o(O("")),h({heading:"Request Accepted",open:!0}))})).catch((function(e){console.log(e)}))}},"Accept")),r.a.createElement(v.a,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){var e,n=(e={orgID:a},Object(Ee.a)(e,"orgID",a),Object(Ee.a)(e,"invate","Decline"),Object(Ee.a)(e,"newUserID",t.uuid),e);i.a.post("/organisation/SAInvate",n).then((function(e){"Senior Admin Request Declined"==e.data.message&&(o(O("")),l.forceSignIn?(o(ne(!0)),o(te(!1))):(o(ne(!0)),o(te(!0))))})).catch((function(e){console.log(e)}))}},"Decline"))))),r.a.createElement(ce.a,{show:y.open,onHide:A},r.a.createElement(ce.a.Header,null,r.a.createElement(ce.a.Title,null,y.heading)),r.a.createElement(ce.a.Body,null,r.a.createElement("p",null,"You are now the Senior Admin of this organisation."),r.a.createElement("p",null,"To get to the Admin side, go on the organisation page drop-down at the top-right of the screen")),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:A},"Close"))))},he=t(18);var pe=function(e){var a=e.match.params.id,t=Object(k.f)(),l=Object(n.useState)(""),o=Object(c.a)(l,2),s=o[0],m=o[1],d=Object(n.useState)(!1),E=Object(c.a)(d,2),b=E[0],g=E[1];return Object(u.b)(),Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Forgot your password?"),b?r.a.createElement("div",null,r.a.createElement("h3",null,"Your new password has been requested, please check your email"),r.a.createElement(T.a,{variant:"warning",onClick:function(){return t.push("/org/"+a+"/signIn")}},"Back to Sign In"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("h3",null,"Please enter your email below:"),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement(he.a.Control,{id:"txtEmail",type:"email",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,s),r.a.createElement(T.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtEmail").value;if(""!=a){var t={email:a};i.a.post("/requestPassword/",t).then((function(e){"Yes"==e.data.userError?m(e.data.message):g(!0)})).catch((function(e){console.log(e)}))}}},"Request New Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null)))))};var ve=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(u.b)(),m=Object(u.c)((function(e){return e.globalVars}));return Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Please create a new password"),r.a.createElement("form",null,r.a.createElement("label",{id:"lblCurrentPassword"},"Current Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtCurrentPassword",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblNewPassword"},"New Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtNewPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{id:"lblConfirmPassword"},"Confirm Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtConfirmPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,l),r.a.createElement(T.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtCurrentPassword").value,t=document.getElementById("txtNewPassword").value,n=document.getElementById("txtConfirmPassword").value;if(""!=a&&""!=t&&""!=n){var r={oldPassword:a,newPassword:t,confirmPassword:n};i.a.post("/changePassword",r).then((function(e){"Yes"==e.data.userError?o(e.data.message):"Updated user password"==e.data.message&&(s(f(e.data.user.requestedPassword)),m.forceSignIn?(s(ne(!0)),s(te(!1))):(s(ne(!0)),s(te(!0))))})).catch((function(e){console.log(e)}))}}},"Set Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null))))};var Ae=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(u.b)(),m=Object(u.c)((function(e){return e.globalVars}));return Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Hello, and welcome to My STAFF"),r.a.createElement("h3",null,"Please create a new password"),r.a.createElement("form",null,r.a.createElement("label",{id:"lblCurrentPassword"},"Current Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtCurrentPassword",type:"password",required:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblNewPassword"},"New Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtNewPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("label",{id:"lblConfirmPassword"},"Confirm Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtConfirmPassword",type:"password",required:!0}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,l),r.a.createElement(T.a,{type:"submit",variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtCurrentPassword").value,t=document.getElementById("txtNewPassword").value,n=document.getElementById("txtConfirmPassword").value;if(""!=a&&""!=t&&""!=n){var r={oldPassword:a,newPassword:t,confirmPassword:n};i.a.post("/createPassword",r).then((function(e){"Yes"==e.data.userError?o(e.data.message):"Updated user first password"==e.data.message&&(s(g(e.data.user.new)),m.forceSignIn?(s(ne(!0)),s(te(!1))):(s(ne(!0)),s(te(!0))))})).catch((function(e){console.log(e)}))}}},"Set Password"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("br",null))))};var je=function(e){e.match.params.id;var a=Object(u.c)((function(e){return e.globalVars})),t=(Object(u.c)((function(e){return e.user})),Object(k.f)(),Object(u.b)());return Object(n.useEffect)((function(){document.title="STAFF - Not Connected"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h3",null,"Sorry, this is not your organisation"),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(T.a,{variant:"warning",onClick:function(){a.forceSignIn?(t(ne(!0)),t(te(!1))):(t(ne(!0)),t(te(!0)))}},"Back to my organisation"),r.a.createElement("br",null),r.a.createElement("br",null))))},ke=t(211),De=(t(251),t(111)),we=t(110),Te=t(39),Ie=t.n(Te),Ce=t(40),Se=t.n(Ce);var Ne=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.b)(),o=Object(n.useState)({open:!1,auth_local:!1,auth_google:!1,message:"",save:!1,showSave:!1}),s=Object(c.a)(o,2),m=s[0],d=s[1],E=new ke.a.Tour({defaultStepOtions:{classes:"shepherd",scrollTo:!0},useModalOverlay:!0});function b(e){var a=e.target,t=a.name,n=a.checked;d((function(e){var a;return Object(le.a)(Object(le.a)({},e),{},(a={},Object(Ee.a)(a,t,Boolean(n)),Object(Ee.a)(a,"showSave",!0),a))})),console.log(t)}return E.addStep({id:"example-step",title:"Message",text:"This step is attached to the bottom of the <code>.example-css-selector</code> element.",attachTo:{element:".example-class-selector",on:"bottom"},classes:"",buttons:[{text:"NEXT",action:E.next}]}),r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(we.a,{className:"plus-image",src:m.open?Se.a:Ie.a,onClick:function(){m.open?d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})):d((function(e){return Object(le.a)(Object(le.a)({},e),{},{auth_local:t.signInLocal,auth_google:t.signInGoogle,message:t.message,open:!0})}))}})," Login Settings"),r.a.createElement("br",null),r.a.createElement(De.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},r.a.createElement(T.a,{variant:"primary",onClick:function(){E.start()}},"Tour")),r.a.createElement("div",{className:"normal-text"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(he.a,null,"Login Options:",r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Check,{id:"LoginSettings_ckbLocal",name:"auth_local",type:"checkbox",checked:m.auth_local,onChange:b,label:"Local Login"})),r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Check,{id:"LoginSettings_ckbGoogle",name:"auth_google",type:"checkbox",checked:m.auth_google,onChange:b,label:"Google Login"})),r.a.createElement(he.a.Label,{className:"example-class-selector",id:"LoginSettings_lblMessage"},"Login Message:"),r.a.createElement("br",null),r.a.createElement(he.a.Control,{id:"LoginSettings_txtMessage",name:"message",value:m.message,onChange:function(e){var a=e.target,t=a.name,n=a.value;d((function(e){var a;return Object(le.a)(Object(le.a)({},e),{},(a={},Object(Ee.a)(a,t,n),Object(Ee.a)(a,"showSave",!0),a))}))},type:"text",required:!0}))),r.a.createElement(v.a,null))),r.a.createElement("div",{className:m.showSave?"submit-button-show":"submit-button-hidden"},r.a.createElement(T.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault();var t=document.getElementById("LoginSettings_ckbLocal").checked,n=document.getElementById("LoginSettings_ckbGoogle").checked,r=document.getElementById("LoginSettings_txtMessage").value,o={orgID:a,auth_local:t.toString(),auth_google:n.toString(),message:r};i.a.post("/organisation/updateLoginSettings",o).then((function(e){if("Login settings updated successfully"==e.data.message){l(R(t)),l(Y(n)),l(_(r)),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{save:!0})}));setTimeout((function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{save:!1,showSave:!1,open:!1})}))}),2e3)}})).catch((function(e){console.log(e)}))}},"Save")," ",m.save?"Saved!":null))))))))},Ue=t(483);var Be=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.b)(),o=Object(n.useState)({uuid:0,activeRemove:!1}),s=Object(c.a)(o,2),m=s[0],d=s[1],E=Object(n.useState)({open:!1,saved:!1,showSave:!1,useDepartments:!1,aname:"",names:[]}),b=Object(c.a)(E,2),g=b[0],f=b[1],y=Object(n.useState)({open:!1,heading:"",message:""}),O=Object(c.a)(y,2),h=O[0],A=O[1];function j(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(we.a,{className:"plus-image",src:g.open?Se.a:Ie.a,onClick:function(){g.open?f((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})):f((function(e){return Object(le.a)(Object(le.a)({},e),{},{useDepartments:t.useDepartments,names:t.departments,open:!0})}))}})," Departments"),r.a.createElement("br",null),r.a.createElement(De.a,{in:g.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(he.a,null,r.a.createElement(he.a.Check,{id:"chkUseDepartments",name:"useDepartments",label:"Use Departments",checked:g.useDepartments,onChange:function(e){var t=e.target,n=t.name,r=t.checked;console.log(r),f((function(e){var a;return Object(le.a)(Object(le.a)({},e),{},(a={},Object(Ee.a)(a,n,r),Object(Ee.a)(a,"showSave",!0),a))}));var o={useDepartments:r.toString(),orgID:a};i.a.post("/organisation/updateUseDepartments",o).then((function(e){console.log(e.data.useDepartments),l(L(g.useDepartments))})).catch((function(e){console.log(e)}))}}),r.a.createElement("br",null),r.a.createElement("p",null,"Add new department:"),r.a.createElement(he.a.Control,{type:"text",value:g.aname,name:"aname",onChange:function(e){var a=e.target,t=a.name,n=a.value;f((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},t,n))}))}}),r.a.createElement("div",{className:"add-button"},r.a.createElement(T.a,{onClick:function(){if(function(e){var a,n=!1,r=Object(re.a)(t.departments);try{for(r.s();!(a=r.n()).done;){if(a.value.name==e){n=!0;break}}}catch(l){r.e(l)}finally{r.f()}return n}(g.aname))A((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Deparment",message:"There is already a department with this name",open:!0})}));else{var e={orgID:a,departmentName:g.aname};i.a.post("/organisation/addDepartment",e).then((function(e){console.log(e.data),l(M(e.data.noOfDepartments)),l(P(e.data.departments)),f((function(a){return Object(le.a)(Object(le.a)({},a),{},{names:e.data.departments,aname:""})}))})).catch((function(e){console.log(e)}))}}},"Add")))),r.a.createElement(v.a,null,"Departments:",r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(Ue.a,null,g.names.map((function(e,a){return r.a.createElement(Ue.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.uuid,d((function(e){return Object(le.a)(Object(le.a)({},e),{},{uuid:a,activeRemove:!0})})),console.log(a)}},e.name)})))),r.a.createElement("div",{className:m.activeRemove?"remove-button-show":"remove-button-hidden"},r.a.createElement(T.a,{onClick:function(){if(m.activeRemove){var e={orgID:a,uuid:m.uuid};i.a.post("/organisatiton/removeDepartment",e).then((function(e){console.log(e.data),l(P(e.data.departments)),f((function(a){return Object(le.a)(Object(le.a)({},a),{},{names:e.data.departments})})),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{activeRemove:!1})}))})).catch((function(e){console.log(e)}))}}},"Remove"))))))))))),r.a.createElement(ce.a,{show:h.open,onHide:j},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,h.heading)),r.a.createElement(ce.a.Body,null,h.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:j},"Close"))))},xe=t(30);var Re=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(n.useState)({open:!1,name:"",email:"",role_User:!1,role_Admin:!1,role_SeniorAdmin:!1,multiAdd:!1,departments:[],depToUser:"",userDepartments:[],users:[],edit:!1,editID:0,roles:!0}),o=Object(c.a)(l,2),s=o[0],m=o[1],d=Object(n.useState)({open:!1,heading:"",message:""}),E=Object(c.a)(d,2),b=E[0],g=E[1],f=Object(n.useState)({open:!1}),y=Object(c.a)(f,2),O=y[0],h=y[1];function A(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function j(){h((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function k(){var e,a=[],n=Object(re.a)(t.departments);try{for(n.s();!(e=n.n()).done;){var r=e.value;s.userDepartments.includes(r.name)&&a.push(r.uuid)}}catch(l){n.e(l)}finally{n.f()}return console.log(a),a.toString()}function D(e){var a,n=e.split(","),r=[],l=Object(re.a)(n);try{for(l.s();!(a=l.n()).done;){var o,c=a.value,s=Object(re.a)(t.departments);try{for(s.s();!(o=s.n()).done;){var i=o.value;i.uuid==c&&r.push(i.name)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){l.e(u)}finally{l.f()}return r}function w(e){var a=e.target.name;"role_User"==a&&m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_Admin:!1,role_User:!0})})),"role_Admin"==a&&m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_Admin:!0,role_User:!1})}))}function I(e){var a=e.target,t=a.name,n=a.value;m((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},t,n))}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(we.a,{className:"plus-image",src:s.open?Se.a:Ie.a,onClick:function(){s.open?m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})):(m((function(e){return Object(le.a)(Object(le.a)({},e),{},{departments:t.departments,open:!0})})),function(){var e={orgID:a};i.a.post("/organisation/getUsers",e).then((function(e){console.log(e.data),m((function(a){return Object(le.a)(Object(le.a)({},a),{},{users:e.data.users})}))})).catch((function(e){console.log(e)}))}())}})," Users"),r.a.createElement("br",null),r.a.createElement(De.a,{in:s.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"bordered"},r.a.createElement("strong",null,"User Details:"),r.a.createElement(he.a,null,r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblName"},"Name:"),r.a.createElement(he.a.Control,{id:"txtName",name:"name",type:"text",value:s.name,onChange:I}))),r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblEmail"},"Email:"),r.a.createElement(he.a.Control,{id:"txtEmail",name:"email",value:s.email,type:"text",onChange:I}))),r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement("div",{className:s.roles?null:"roles-hidden"},r.a.createElement(he.a.Label,{id:"lblRole"},"Role:"),r.a.createElement(he.a.Check,{id:"radRoleUser",type:"radio",name:"role_User",checked:s.role_User,onChange:w,label:"User"}),r.a.createElement(he.a.Check,{id:"radRoleAdmin",type:"radio",name:"role_Admin",checked:s.role_Admin,onChange:w,label:"Admin"})))),r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblDepartmentsTitle"},"Departments:")," ",r.a.createElement("br",null),0==s.userDepartments.length?r.a.createElement("div",{className:"departments-hidden"},r.a.createElement(he.a.Label,null,"---")):r.a.createElement("div",null,r.a.createElement(he.a.Label,{id:"lblDepartments"},s.userDepartments.toString())))),r.a.createElement(he.a.Row,null,r.a.createElement("div",{className:"submit-button-show"},s.edit?r.a.createElement("div",null,r.a.createElement(T.a,{variant:"primary",onClick:function(){m((function(e){return Object(le.a)(Object(le.a)({},e),{},{edit:!1,name:"",email:"",roles:!0,role_Admin:!1,role_User:!1,userDepartments:""})}))}},"Add New User"),r.a.createElement(T.a,{variant:"primary",onClick:function(){h({open:!0})}},"S/A Request")," "):r.a.createElement("div",null,r.a.createElement(T.a,{variant:"primary",onClick:function(){g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Multiple Add",message:"The feature is not advailable yet",open:!0})}))}},"Add Multiple"),r.a.createElement(T.a,{variant:"primary",onClick:function(){if(""==s.name||""==s.email)g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Required",message:"Please fill in the name and email field.",open:!0})}));else if(s.role_User||s.role_Admin){var e=k(),t="";s.role_User&&(t="user"),s.role_Admin&&(t="admin");var n={orgID:a,name:s.name,email:s.email,role:t,departments:e};i.a.post("/organisation/addUser",n).then((function(e){var a=e.data;"Yes"==a.userError?g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add User",message:a.message,open:!0})})):m((function(a){return Object(le.a)(Object(le.a)({},a),{},{users:e.data.users,name:"",email:"",role_User:!1,role_Admin:!1,userDepartments:[]})}))})).catch((function(e){console.log(e)}))}else g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Role",message:"Please pick a role.",open:!0})}))}},"Add")))),r.a.createElement(he.a.Row,{className:s.edit?"user-edit":"user-edit edit-hidden"},r.a.createElement("div",null,r.a.createElement(T.a,{variant:"primary",onClick:function(){if(s.role_SeniorAdmin)g({heading:"Remove User",message:"You cannot delete a Senior Admin",open:!0});else{var e={uuid:s.editID,orgID:a};i.a.post("/organisation/removeUser",e).then((function(e){var a=e.data;"User removed successfully"==a.message&&(g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Remove User",message:"User has been removed and deleted",open:!0})})),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{users:a.users,name:"",email:"",role_Admin:!1,role_User:!1,userDepartments:[],edit:!1})})))})).catch((function(e){console.log(e)}))}}},"Remove"),r.a.createElement(T.a,{variant:"primary",onClick:function(){var e=k(),t="";s.role_SeniorAdmin&&(t="seniorAdmin"),s.role_User&&(t="user"),s.role_Admin&&(t="admin");var n={uuid:s.editID,name:s.name,email:s.email,role:t,departments:e,orgID:a};i.a.post("/organisation/updateUser",n).then((function(e){var a=e.data;"User updated successfully"==a.message&&(g((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Update User",message:"User has been updated",open:!0})})),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{users:a.users,edit:!1})})))})).catch((function(e){console.log(e)}))}},"Update"))))),r.a.createElement(v.a,{className:"bordered"},r.a.createElement("strong",null,"Departments:"),r.a.createElement("div",{className:"scrollable-250"},r.a.createElement(Ue.a,null,s.departments.map((function(e,a){return r.a.createElement(Ue.a.Item,{key:a,action:!0,onClick:function(){var a;a=e.name,m((function(e){return Object(le.a)(Object(le.a)({},e),{},{depToUser:a})}))}},e.name)})))),r.a.createElement("div",{className:"add-button"},r.a.createElement(T.a,{onClick:function(){if(s.userDepartments.includes(s.depToUser)){var e=s.userDepartments.filter((function(e){return e!=s.depToUser}));m((function(a){return Object(le.a)(Object(le.a)({},a),{},{userDepartments:e})}))}}},"Remove"),r.a.createElement(T.a,{onClick:function(){s.userDepartments.includes(s.depToUser)||m((function(e){return Object(le.a)(Object(le.a)({},e),{},{userDepartments:[].concat(Object(xe.a)(s.userDepartments),[s.depToUser])})}))}},"Add"))))),r.a.createElement(v.a,null,"Users:",r.a.createElement("div",{className:"scrollable-250"},r.a.createElement(Ue.a,null,s.users.map((function(e,a){var t="";return t="seniorAdmin"==e.role?e.displayName+" (Senior Admin)":"admin"==e.role?e.displayName+" (Admin)":e.displayName,r.a.createElement(Ue.a.Item,{key:a,action:!0,onClick:function(){!function(e,a,t,n,r){m((function(n){return Object(le.a)(Object(le.a)({},n),{},{name:a,email:t,userDepartments:D(r),edit:!0,editID:e})})),"seniorAdmin"==n?m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_SeniorAdmin:!0,role_Admin:!1,role_User:!1,roles:!1})})):"user"==n?m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_User:!0,role_SeniorAdmin:!1,role_Admin:!1,roles:!0})})):"admin"==n&&m((function(e){return Object(le.a)(Object(le.a)({},e),{},{role_Admin:!0,role_SeniorAdmin:!1,role_User:!1,roles:!0})}))}(e.uuid,e.displayName,e.email,e.role,e.departments)}},t)}))))))))))))),r.a.createElement(ce.a,{show:b.open,onHide:A},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,b.heading)),r.a.createElement(ce.a.Body,null,b.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:A},"Close"))),r.a.createElement(ce.a,{show:O.open,onHide:j},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,"Change of Senior Admin Request")),r.a.createElement(ce.a.Body,null,r.a.createElement("p",null,"You are requesting ",s.name," to change roles to the Senior Admin of this organisation. You can only have ONE Senior Admin per organisation, so this means you will not have access to the administrator panel for this organisation. Your role will change to Admin"),r.a.createElement("p",null,"This user will also be to new \u2018point of contact\u2019 for High-View Studios."),r.a.createElement("p",null,"This user will be sent an email and they have to accept the request. In the meantime you will still have access."),r.a.createElement("p",null,"You and High-View Studios will be notified when this request has been accepted."),r.a.createElement("p",null,"Do you want to continue?")),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,newUUID:s.editID};i.a.post("/organisation/changeSeniorAdmin",e).then((function(e){"Request sent successfully"==e.data.message&&(h({open:!1}),g({heading:"Change of Senior Admin Request",message:"A request has been sent to "+s.name,open:!0}))})).catch((function(e){console.log(e)}))}},"Yes"),r.a.createElement(T.a,{variant:"primary",onClick:j},"No"))))};var Ye=function(e){var a=e.orgID,t=Object(u.c)((function(e){return e.organisation})),l=Object(u.b)(),o=Object(n.useState)({open:!1,layout:"Layout",layoutUUID:0,name:"",rooms:[],newAdd:!1,layouts:!1,editRoom:!1,roomUUID:0,yourLayouts:[],weekSystem:!1,editAdd:!1}),s=Object(c.a)(o,2),m=s[0],d=s[1],E=Object(n.useState)({open:!1,heading:"",message:""}),b=Object(c.a)(E,2),g=b[0],f=b[1],y=Object(n.useState)({open:!1,heading:"",message:""}),O=Object(c.a)(y,2),h=O[0],A=O[1];function j(){f((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function k(e,a){console.log(a),d(e===a?function(e){return Object(le.a)(Object(le.a)({},e),{},{newAdd:!1,layouts:!1,editAdd:!1})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{newAdd:!0,layouts:!0,editAdd:!0})})}function D(e){var a,t=Object(re.a)(m.yourLayouts);try{for(t.s();!(a=t.n()).done;){var n=a.value;if(n.uuid==e)return n.name}}catch(r){t.e(r)}finally{t.f()}}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(we.a,{className:"plus-image",src:m.open?Se.a:Ie.a,onClick:function(){if(m.open)d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));else{var e={orgID:a};i.a.post("/organisation/getLayouts",e).then((function(e){d((function(a){return Object(le.a)(Object(le.a)({},a),{},{open:!0,yourLayouts:e.data.layouts})}))})).catch((function(e){console.log(e)}))}var n={orgID:a};i.a.post("/organisation/getRooms",n).then((function(e){var a=e.data;console.log(a),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{rooms:a.rooms})}))})).catch((function(e){console.log(e)})),k(t.allocatedRooms,t.redeemedRooms)}})," Rooms"),r.a.createElement("br",null),r.a.createElement(De.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement("div",{className:m.newAdd&&m.yourLayouts.length>0?"rooms-add":"rooms-add rooms-hide"},r.a.createElement(he.a,null,r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Label,{id:"lblName"},"Name:"),r.a.createElement(he.a.Control,{id:"txtName",value:m.name,onChange:function(e){var a=e.target.value;d((function(e){return Object(le.a)(Object(le.a)({},e),{},{name:a})}))}})))),r.a.createElement("div",{className:m.layouts&&m.yourLayouts.length>0?"":"rooms-hide"},r.a.createElement(he.a,null,r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Label,{className:"side-by-side",id:"lblName"},"Layout:"),r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},m.layout),r.a.createElement(w.a.Menu,{className:"dropdown-items"},m.yourLayouts.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:function(){!function(e,a){d((function(t){return Object(le.a)(Object(le.a)({},t),{},{layout:a,layoutUUID:e})}))}(e.uuid,e.name)}},e.name)})))),m.newAdd?r.a.createElement("div",{className:"centred"},r.a.createElement(he.a.Check,{type:"checkbox",checked:m.weekSystem,onChange:function(e){var t=e.target.checked;if(t){var n={orgID:a};i.a.post("/organisation/getMainOrgWeekSystem",n).then((function(e){console.log(e.data),"false"==e.data.weekSystem?(f({heading:"Week System",message:"You cannot turn on a room week system until you turn on the main week system in the 'Week System / Holidays' tab",open:!0}),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:!1})}))):d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t})}))})).catch((function(e){console.log(e)}))}else d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t})}))},label:"Use week system"})):null,m.editRoom&&m.yourLayouts.length>0?r.a.createElement("div",{className:"centred"},"Week System: ",m.weekSystem?" Enabled":" Disabled"):null)))),r.a.createElement(p.a,{className:"add-button"},m.newAdd&&m.yourLayouts.length>0?r.a.createElement(T.a,{variant:"primary",onClick:function(){if(""===m.name)f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Room",message:"The room requires a Name",open:!0})}));else if(function(e){var a,t=!1,n=Object(re.a)(m.rooms);try{for(n.s();!(a=n.n()).done;){if(a.value.name==e){t=!0;break}}}catch(r){n.e(r)}finally{n.f()}return t}(m.name))f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Room",message:"A room with the same name already exists",open:!0})}));else if("Layout"===m.layout)f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Add Room",message:"The room requires a Layout",open:!0})}));else{var e={orgID:a,name:m.name,layout:m.layoutUUID,weekSystem:m.weekSystem};i.a.post("/organisation/addRoom",e).then((function(e){var a=e.data;"Successfully added room"===a.message&&(l(Q(a.redeemedRooms)),l(F(a.rooms)),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{rooms:a.rooms,name:"",layout:"layout",weekSystem:!1})})),k(t.allocatedRooms,a.redeemedRooms))})).catch((function(e){console.log(e)}))}}},"Add"):null,m.editRoom&&m.yourLayouts.length>0?r.a.createElement("div",null,m.editAdd?r.a.createElement(T.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{editRoom:!1,layouts:!1})})),k(t.allocatedRooms,t.redeemedRooms)}},"Add New Room"):null,r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:m.roomUUID,layout:m.layoutUUID};i.a.post("/organisation/updateRoom",e).then((function(e){"Updated Room"==e.data.message&&(d((function(a){return Object(le.a)(Object(le.a)({},a),{},{rooms:e.data.rooms,roomUUID:0,editRoom:!1,layouts:!1})})),k(t.allocatedRooms,t.redeemedRooms))})).catch((function(e){console.log(e)}))}},"Update")):null),r.a.createElement(p.a,null,r.a.createElement("div",{className:0==m.yourLayouts.length?"rooms-layoutText":"rooms-layoutText rooms-hide"},r.a.createElement("strong",null,"There are no layouts in your system yet, use the layouts tab to add one. Then your will be able to assign a room to a layout.")))),r.a.createElement(v.a,null,"Allocated Rooms: ",t.allocatedRooms," ",r.a.createElement("br",null),"Redeemed Rooms: ",t.redeemedRooms),r.a.createElement(v.a,null,"Room List:",r.a.createElement("div",{className:"scrollable-300"},r.a.createElement(Ue.a,null,m.rooms.map((function(e,a){return r.a.createElement(Ue.a.Item,{variant:m.roomUUID==e.uuid?"primary":null,key:a,action:!0,onClick:function(){var a,t,n,r;a=e.uuid,t=D(e.layout),n=e.layout,r=e.weekSystem,d((function(e){return Object(le.a)(Object(le.a)({},e),{},{roomUUID:a,editRoom:!0,layouts:!0,newAdd:!1,layout:t,layoutUUID:n,weekSystem:"true"==r})}))}},e.name," (",D(e.layout),")")})))),r.a.createElement("div",{className:m.editRoom?"remove-button-show":"remove-button-hidden"},r.a.createElement(T.a,{onClick:function(){f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Remove Room",message:"This feature hasn't been completed yet",open:!0})}))}},"Remove"))))))))))),r.a.createElement(ce.a,{show:g.open,onHide:j},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,g.heading)),r.a.createElement(ce.a.Body,null,g.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:j},"Close"))),r.a.createElement(ce.a,{show:h.open,onHide:function(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,"Week System")),r.a.createElement(ce.a.Body,null,g.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:!1})})),A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},"No"),r.a.createElement(T.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:!0})})),A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},"Yes"))))},_e=Object(n.createContext)();var Le=function(e){var a=Object(n.useState)({}),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(n.useState)([]),i=Object(c.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)({view:!1,breakID:""}),E=Object(c.a)(d,2),b=E[0],g=E[1];return r.a.createElement(_e.Provider,{value:{sessions:l,order:u,breakBtns:b,addSession:function(e){o((function(a){return Object(le.a)(Object(le.a)({},a),{},Object(Ee.a)({},e,{id:e,customText:"",hoverText:""}))})),m((function(a){return[].concat(Object(xe.a)(a),[e])}))},resetSessions:function(){o({}),m([])},minusSession:function(e){var a=l;o({});for(var t=function(){var t=u[n];if(t!=e){var r={};r=t.toString().includes("b")?{id:a[t].id,breakText:a[t].breakText,textColor:a[t].textColor,bgColor:a[t].bgColor}:{id:a[t].id,customText:a[t].customText,hoverText:a[t].hoverText},o((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},t,r))}))}},n=0;n<u.length;n++)t();m((function(){return u.filter((function(a){return a!=e}))}))},updateCustomText:function(e,a){var t={customText:a,hoverText:l[e].hoverText,id:l[e].id};o((function(a){return Object(le.a)(Object(le.a)({},a),{},Object(Ee.a)({},e,t))}))},updateHoverText:function(e,a){var t={customText:l[e].customText,hoverText:a,id:l[e].id};o((function(a){return Object(le.a)(Object(le.a)({},a),{},Object(Ee.a)({},e,t))}))},addBreak:function(e){var a="b"+e;o((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},a,{id:a,breakText:"",textColor:"#000000",bgColor:"#FFFFFF"}))})),m((function(e){return[].concat(Object(xe.a)(e),[a])}))},toggleBreakBtns:function(e,a){g(a?function(t){return Object(le.a)(Object(le.a)({},t),{},{view:a,breakID:e})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{view:a})})},orderMoveUp:function(){var e=u.indexOf(b.breakID);if(e-1>=0){var a=u[e];u.splice(e,1);var t=e-1;u.splice(t,0,a),m(u),m((function(e){return Object(xe.a)(e)}))}},orderMoveDown:function(){var e=u.indexOf(b.breakID);if(e+1<u.length){var a=u[e];u.splice(e,1);var t=e+1;u.splice(t,0,a),m(u),m((function(e){return Object(xe.a)(e)}))}},removeBreak:function(){u.indexOf(b.breakID);var e=1,a=l,t=[];o({});for(var n=function(){var n=u[r];if(n!=b.breakID){var l={};if(n.toString().includes("b")){var c="b"+e;l={id:c,breakText:a[n].breakText,textColor:a[n].textColor,bgColor:a[n].bgColor},o((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},c,l))})),t.push(c),e++}else l={id:a[n].id,customText:a[n].customText,hoverText:a[n].hoverText},o((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},n,l))})),t.push(n)}},r=0;r<u.length;r++)n();m(t),m((function(e){return Object(xe.a)(e)})),g((function(e){return Object(le.a)(Object(le.a)({},e),{},{view:!1})}))},updateBreakText:function(e){var a={id:l[b.breakID].id,breakText:e,textColor:l[b.breakID].textColor,bgColor:l[b.breakID].bgColor};o((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},b.breakID,a))}))},updateBreakColor:function(e,a){var t={};"textColor"===e&&(t={id:l[b.breakID].id,breakText:l[b.breakID].breakText,textColor:a,bgColor:l[b.breakID].bgColor}),"bgColor"===e&&(t={id:l[b.breakID].id,breakText:l[b.breakID].breakText,textColor:l[b.breakID].textColor,bgColor:a}),o((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},b.breakID,t))}))},SetSessions:function(e){o(e)},SetOrder:function(e){m(e)}}},e.children)};var Me=function(e){var a=Object(n.useContext)(_e),t=a.updateCustomText,l=a.updateHoverText,o=a.toggleBreakBtns;function c(){o(0,!1)}return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,{sm:1},r.a.createElement("div",{className:"slot-id"},e.id)),r.a.createElement(v.a,null,r.a.createElement(he.a.Control,{id:"txtCustomText",type:"text",value:e.customText,onFocus:c,onChange:function(a){var n=a.target.value;t(e.id,n)}})),r.a.createElement(v.a,null,r.a.createElement(he.a.Control,{id:"txtHoverText",type:"text",value:e.hoverText,onFocus:c,onChange:function(a){var t=a.target.value;l(e.id,t)}}))))},Pe=t(207);var Qe=function(e){var a=Object(n.useContext)(_e),t=a.toggleBreakBtns,l=a.updateBreakText,o=a.updateBreakColor,s=Object(n.useState)({open:!1,color:"ff0000",property:""}),i=Object(c.a)(s,2),u=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,{sm:1},r.a.createElement("div",{className:"break-id"},e.id)),r.a.createElement(v.a,{className:"break-padding"},r.a.createElement(he.a.Control,{style:{backgroundColor:e.bgColor,color:e.textColor},id:"txtbreakText",value:e.breakText,onFocus:function(){t(e.id,!0)},onChange:function(e){var a=e.target.value;l(a)}})),r.a.createElement(v.a,null,r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},"Colour"),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{onClick:function(){t(e.id,!0),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0,property:"textColor"})}))}},"Text Colour"),r.a.createElement(w.a.Item,{onClick:function(){t(e.id,!0),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0,property:"bgColor"})}))}},"BackgroundColour"))))),r.a.createElement(ce.a,{show:u.open,dialogClassName:"color-modal-90w",onHide:function(){m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,"Pick Colour")),r.a.createElement(ce.a.Body,null,r.a.createElement(Pe.CompactPicker,{color:u.color,onChangeComplete:function(e){!function(e){m((function(a){return Object(le.a)(Object(le.a)({},a),{},{color:e})}))}(e.hex)}})),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){o(u.property,u.color),m((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},"OK"))))};var Fe=function(e){var a=e.orgID,t=Object(n.useContext)(_e),l=t.sessions,o=t.order,s=t.breakBtns,u=t.addSession,m=t.minusSession,d=t.resetSessions,E=t.addBreak,b=t.orderMoveUp,g=t.orderMoveDown,f=t.removeBreak,y=t.SetSessions,O=t.SetOrder,h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],j=Object(n.useState)({open:!1,layoutText:"layout",yourLayoutText:"Layouts",yourLayouts:[],currentLayout:{},sessions:1,breaks:0,days:[!1,!1,!1,!1,!1,!1,!1],showPreview:!1,startTime:"Start Time",finishTime:"Finish Time",timeIntervalLbl:"Interval",timeInterval:0,times:[],showTimetableSave:!1,showDiarySave:!1}),k=Object(c.a)(j,2),D=k[0],I=k[1],C=Object(n.useState)({open:!1,heading:"",message:""}),S=Object(c.a)(C,2),N=S[0],U=S[1],B=Object(n.useState)({open:!1,heading:"",newName:""}),x=Object(c.a)(B,2),R=x[0],Y=x[1];function _(){U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function L(e){var a=e.target.innerText,t=[!1,!1,!1,!1,!1,!1,!1];D.currentLayout.layout==a?M(D.currentLayout):"Timetable"==a&&(I((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:1})})),u(1));for(var n=!1,r=0,l=t;r<l.length;r++){1==l[r]&&(n=!0)}I((function(e){return Object(le.a)(Object(le.a)({},e),{},{layoutText:a,days:t,showDiarySave:!1,showTimetableSave:!1,showPreview:n})}))}function M(e){if("Timetable"==e.layout){if(""!=e.days){var t=e.days.split(",");t.forEach((function(e,a){t[a]="true"==e}));var n={orgID:a,layoutUUID:e.uuid};i.a.post("/organisation/getTimetableSessions",n).then((function(e){var a,t=e.data.sessions,n={},r=Object(re.a)(t);try{for(r.s();!(a=r.n()).done;){var l=a.value;n[l.id]=l}}catch(o){r.e(o)}finally{r.f()}y(n)})).catch((function(e){console.log(e)}));var r=e.sessionOrder.split(",");O(r),I((function(a){return Object(le.a)(Object(le.a)({},a),{},{open:!0,sessions:e.sessions,breaks:e.breakTotal,days:t,showTimetableSave:!0,showPreview:!0})}))}}else if("Diary"==e.layout){var l=e.days.split(",");l.forEach((function(e,a){l[a]="true"==e})),""!=e.days&&(I((function(a){return Object(le.a)(Object(le.a)({},a),{},{startTime:e.startTime,finishTime:e.finishTime,timeInterval:e.timeInterval,days:l,showDiarySave:!0,showPreview:!0})})),function(e){var a="";30==e&&(a="30 Minutes");60==e&&(a="1 hour");90==e&&(a="1 hour, 30 minutes");120==e&&(a="2 hours");I((function(e){return Object(le.a)(Object(le.a)({},e),{},{timeIntervalLbl:a})}))}(e.timeInterval),G(e.startTime,e.finishTime,e.timeInterval))}}function P(e){var a=e.target.innerText;I((function(e){return Object(le.a)(Object(le.a)({},e),{},{startTime:a})})),G(a,D.finishTime,D.timeInterval)}function Q(e){var a=e.target.innerText;I((function(e){return Object(le.a)(Object(le.a)({},e),{},{finishTime:a})})),G(D.startTime,a,D.timeInterval)}function F(e){var a=e.target,t=a.innerText,n=a.name;I((function(e){return Object(le.a)(Object(le.a)({},e),{},{timeIntervalLbl:t,timeInterval:parseInt(n)})})),G(D.startTime,D.finishTime,parseInt(n))}function G(e,a,t){var n=[];if("Start Time"!==e&&"Finish Time"!==a&&0!==t){for(var r=ie()(e,"HH:mm"),l=ie()(a,"HH:mm");r.isBefore(l);)n.push(r.format("HH:mm")),r.add(t,"m");I((function(e){return Object(le.a)(Object(le.a)({},e),{},{times:n})}));var o=!1;for(var c in D.days)1==D.days[c]&&(o=!0);I((function(e){return Object(le.a)(Object(le.a)({},e),{},{showDiarySave:o})}))}}function H(e){var a=e.target,t=a.name,n=a.checked,r=D.days;r[t]=n;var l=!1;for(var o in r)1==r[o]&&(l=!0);I((function(e){return Object(le.a)(Object(le.a)({},e),{},{days:r,showPreview:l,showTimetableSave:l})})),"Diary"==D.layoutText&&"Start Time"!==D.startTime&&"Finish Time"!==D.finishTime&&0!==D.timeInterval&&I((function(e){return Object(le.a)(Object(le.a)({},e),{},{days:r,showPreview:l,showDiarySave:l})}))}return r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(we.a,{className:"plus-image",src:D.open?Se.a:Ie.a,onClick:function(){if(D.open)I((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})),d();else{var e={orgID:a};i.a.post("/organisation/getLayouts",e).then((function(e){I((function(a){return Object(le.a)(Object(le.a)({},a),{},{open:!0,yourLayouts:e.data.layouts})}))})).catch((function(e){console.log(e)}))}}})," Layouts"),r.a.createElement("br",null),r.a.createElement(De.a,{in:D.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text-hide"},"-"),r.a.createElement("div",{className:"normal-text"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement("div",{className:"centred"},"Your Layouts:"),r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary"},D.yourLayoutText),r.a.createElement(w.a.Menu,null,D.yourLayouts.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:function(){!function(e){var a;d(),I((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:0,breaks:0})}));var t,n=Object(re.a)(D.yourLayouts.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(c.a)(t.value,2),l=(r[0],r[1]);if(l.uuid==e){a=l;break}}}catch(s){n.e(s)}finally{n.f()}var o="layout";""!=a.layout&&(o=a.layout),I((function(e){return Object(le.a)(Object(le.a)({},e),{},{yourLayoutText:a.name,layoutText:o,currentLayout:a})})),M(a)}(e.uuid)}},e.name)})))),r.a.createElement(T.a,{variant:"primary",onClick:function(){Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0})}))}},"Add")),r.a.createElement(p.a,null,"Layouts"!=D.yourLayoutText?r.a.createElement("div",null,r.a.createElement("div",{className:"centred"},"Layouts:"),r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.layoutText),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{onClick:L},"Timetable"),r.a.createElement(w.a.Item,{onClick:L},"Diary")))):null),r.a.createElement(p.a,null,r.a.createElement("div",{className:"layout-settings"},"Timetable"==D.layoutText||"Diary"==D.layoutText?r.a.createElement("div",null,r.a.createElement(he.a,null,r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"0",onChange:H,type:"checkbox",checked:D.days[0],label:"Sun"}),r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"1",onChange:H,type:"checkbox",checked:D.days[1],label:"Mon"}),r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"2",onChange:H,type:"checkbox",checked:D.days[2],label:"Tue"}),r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"3",onChange:H,type:"checkbox",checked:D.days[3],label:"Wed"}),r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"4",onChange:H,type:"checkbox",checked:D.days[4],label:"Thu"}),r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"5",onChange:H,type:"checkbox",checked:D.days[5],label:"Fri"}),r.a.createElement(he.a.Check,{className:"check-side-by-side",name:"6",onChange:H,type:"checkbox",checked:D.days[6],label:"Sat"})))):null)),r.a.createElement(p.a,null,r.a.createElement("div",{className:"layout-settings"},"Timetable"==D.layoutText?r.a.createElement("div",null,r.a.createElement("div",{className:"centred"},"Sessions: ",D.sessions),r.a.createElement("div",{className:"side-by-side-R"},r.a.createElement(T.a,{variant:"primary",onClick:function(){I((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:D.sessions+1})})),u(D.sessions+1)}},"+"),r.a.createElement(T.a,{variant:"primary",onClick:function(){D.sessions>1&&(I((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:D.sessions-1})})),m(D.sessions))}},"-"))):null)),"Timetable"==D.layoutText?r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("div",{className:"layout-settings"},r.a.createElement(T.a,{variant:"primary",onClick:function(){I((function(e){return Object(le.a)(Object(le.a)({},e),{},{breaks:D.breaks+1})})),E(D.breaks+1)}},"Add Break"),s.view?r.a.createElement(T.a,{variant:"primary",onClick:function(){I((function(e){return Object(le.a)(Object(le.a)({},e),{},{breaks:D.breaks-1})})),f()}},"Remove"):null)),r.a.createElement(p.a,null,r.a.createElement("div",{className:s.view?"layout-settings-move-btn-show":"layout-settings-move-btn-hide"},r.a.createElement(T.a,{variant:"primary",onClick:function(){b()}},"Move Up"),r.a.createElement(T.a,{variant:"primary",onClick:function(){g()}},"Move Down")))):null,"Diary"==D.layoutText?r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Start Time:")),r.a.createElement(v.a,null,r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.startTime),r.a.createElement(w.a.Menu,{className:"dropdown-items"},A.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:P},e)})))))),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Finish Time:")),r.a.createElement(v.a,null,r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.finishTime),r.a.createElement(w.a.Menu,{className:"dropdown-items"},A.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:Q},e)})))))),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{className:"centred"},"Interval:")),r.a.createElement(v.a,null,r.a.createElement(w.a,{className:"side-by-side"},r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-layouts"},D.timeIntervalLbl),r.a.createElement(w.a.Menu,{className:"dropdown-items"},r.a.createElement(w.a.Item,{name:"30",onClick:F},"30 minutes"),r.a.createElement(w.a.Item,{name:"60",onClick:F},"1 hour"),r.a.createElement(w.a.Item,{name:"90",onClick:F},"1 hour, 30 minutes"),r.a.createElement(w.a.Item,{name:"120",onClick:F},"2 hours"))))),r.a.createElement(p.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,null,D.showDiarySave?r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:D.currentLayout.uuid,layout:D.layoutText,days:D.days.toString(),startTime:D.startTime,finishTime:D.finishTime,timeInterval:D.timeInterval};i.a.post("/organisation/saveLayout",e).then((function(e){"Success"==e.data.message&&(I((function(a){return Object(le.a)(Object(le.a)({},a),{},{yourLayouts:e.data.layouts})})),U((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Layout: "+D.yourLayoutText,message:"Layout has been saved!",open:!0})})))})).catch((function(e){console.log(e)}))}},"Save"):null))):null),r.a.createElement(v.a,null,"Timetable"==D.layoutText?r.a.createElement("div",null,"Sessions:",r.a.createElement(p.a,null,r.a.createElement(v.a,{sm:1}),r.a.createElement(v.a,{className:"slot-headings"},"Custom Text"),r.a.createElement(v.a,{className:"slot-headings"},"Hover Text")),r.a.createElement("div",{className:"scrollable-250"},Object.keys(l).length>0?r.a.createElement("div",null,o.map((function(e){return e.toString().includes("b")?r.a.createElement(Qe,{key:e,id:l[e].id,breakText:l[e].breakText,bgColor:l[e].bgColor,textColor:l[e].textColor}):r.a.createElement(Me,{key:e,id:l[e].id,customText:l[e].customText,hoverText:l[e].hoverText})}))):null),r.a.createElement("div",{className:"add-button"},D.showTimetableSave?r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:D.currentLayout.uuid,layout:D.layoutText,sessionTotal:D.sessions,breakTotal:D.breaks,sessionOrder:o,days:D.days.toString(),sessions:l};i.a.post("/organisation/saveLayout",e).then((function(e){"Success"==e.data.message&&(I((function(a){return Object(le.a)(Object(le.a)({},a),{},{yourLayouts:e.data.layouts})})),U((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Layout: "+D.yourLayoutText,message:"Layout has been saved!",open:!0})})))})).catch((function(e){console.log(e)}))}},"Save"):null)):null))),r.a.createElement(v.a,null,"Timetable"==D.layoutText||"Diary"==D.layoutText?r.a.createElement("div",null,"Preview:"):null,r.a.createElement("div",{className:"scrollable-300"},D.showPreview?r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Session"),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a,"data-tip":"day"},h[a])})))),"Timetable"==D.layoutText&&Object.keys(l).length>0?r.a.createElement("tbody",null,o.map((function(e,a){return e.toString().includes("b")?r.a.createElement("tr",{key:a,style:{backgroundColor:l[e].bgColor}},r.a.createElement("td",{style:{color:l[e].textColor}},""!=l[e].breakText?l[e].breakText:l[e].id),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})}))):r.a.createElement("tr",{key:a},r.a.createElement("td",{"data-tip":""!=l[e].hoverText?l[e].hoverText:null},""!=l[e].customText?l[e].customText:l[e].id),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})})))})),void oe.a.rebuild()):null,"Diary"==D.layoutText?r.a.createElement("tbody",null,D.times.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e),D.days.map((function(e,a){if(e)return r.a.createElement("td",{key:a})})))}))):null):null)))))))))),r.a.createElement(oe.a,null),r.a.createElement(ce.a,{show:N.open,onHide:_},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,N.heading)),r.a.createElement(ce.a.Body,null,N.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:_},"Close"))),r.a.createElement(ce.a,{show:R.open,onHide:function(){Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,"Add Layout")),r.a.createElement(ce.a.Body,null,r.a.createElement(he.a.Control,{value:R.newName,onChange:function(e){var a=e.target.value;Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{newName:a})}))}})),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,name:R.newName};i.a.post("/organisation/addLayout",e).then((function(e){"Successfully Added"==e.data.message&&(I((function(a){return Object(le.a)(Object(le.a)({},a),{},{yourLayouts:e.data.layouts})})),Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{newName:"",open:!1})})))})).catch((function(e){console.log(e)}))}},"Add"))))},Ge=t(213),He=t(88),qe=t.n(He);var We=function(e){var a=e.orgID,t=Object(u.b)(),l=Object(k.f)(),o=Object(n.useState)({open:!1,startDate:ie()(),endDate:ie()(),startDateValue:"",endDateValue:"",weeks:[],holidayTitles:[],addNew:!1,newHoliday:"",editWeek:!1,editWeekIndex:0,editTitle:!1,titleUUID:"",showWeeks:!1,downloadedHolidays:[],weekSystem:!1,weeksNum:[],orgLocked:!1,collides:!1}),s=Object(c.a)(o,2),m=s[0],d=s[1],E=Object(n.useState)({open:!1,heading:"",message:""}),b=Object(c.a)(E,2),g=b[0],f=b[1],y=Object(n.useState)({open:!1,heading:"",message:"",acceptFunction:"",acceptName:"",showAccept:!1,cancelName:"",showCancel:!1}),O=Object(c.a)(y,2),h=O[0],A=O[1],j=Object(n.useState)({open:!1,heading:"",message1:"",message2:"",message3:"",boldMessage:""}),D=Object(c.a)(j,2),w=D[0],I=D[1],C=Object(n.useState)({open:!1,heading:"",message1:"",message2:"",message3:"",boldMessage:""}),S=Object(c.a)(C,2),N=S[0],U=S[1],B=Object(n.useState)({open:!1,heading:"",message:"",renameText:""}),x=Object(c.a)(B,2),R=x[0],Y=x[1],_=Object(n.useState)({holidayTitlesBorder:!1,weeksBorder:!1,datesText:"",dates:!1,holidayTitlesText:"",holidayTitles:!1,weeksText:"",weeks:!1,weekNums:!1,weekNumsText:""}),L=Object(c.a)(_,2),M=L[0],P=L[1];function Q(){f((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function F(){I((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function q(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function W(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})),U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));var e={orgID:a};i.a.post("/organisation/restore",e).then((function(e){var a=e.data;"System Restored"==a.message&&(t(H("true"==a.locked)),t(G(a.holidays)),A({heading:"System Restored",message:"Your system has been restored!",showAccept:!0,acceptName:"Ok",acceptFunction:K,showCancel:!1,open:!0}))})).catch((function(e){console.log(e)}))}function K(){A((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})})),l.push("/org/"+a)}function V(e,a){if(""!=e&&""!=a){for(var t=ie()(e,"DD/MM/YYYY").startOf("week"),n=ie()(a,"DD/MM/YYYY").startOf("week"),r=[];t.isBefore(n);){var l={week:J(t.week()+"-"+t.format("YY")),date:t.format("DD/MM/YYYY"),holiday:0};r.push(l),t.add(1,"w")}return d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:r,showWeeks:!0})})),r}}function J(e){return 1==e.toString().length?"0"+e:e}function z(e,a){if(m.editWeek){var t=m.weeks;t[m.editWeekIndex].holiday="h"+J(a),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:t,editWeek:!1})}))}else d("Normal"!=e?function(e){return Object(le.a)(Object(le.a)({},e),{},{editTitle:!0,editWeek:!1,titleUUID:a})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{editTitle:!1,editWeek:!1})})}return Object(n.useEffect)((function(){!function(){var e,a,t,n,r=!1,l=!1,o=!1,c=!1;m.showWeeks?m.editWeek||m.editTitle||!m.showWeeks?m.editWeek?(a="Click on a title to assign it to the week",l=!0,m.weekSystem&&(n="Or Click on a week to assign it to",c=!0)):m.editTitle&&(a="Use the 'Rename' or 'Delete' buttons to the left",l=!0,t="Click on a week on the right to assign a holiday to it",o=!0):(a="Click on a holiday title to edit it.",l=!0,t="Click on a week on the right to assign a holiday to it",o=!0):(e="Set the 'Start Date' and 'End Date' to bring up the weeks under Year Preview",r=!0,a=m.holidayTitles.length>0?"Click on a holiday title to edit it.":"Add a holiday title",l=!0);P({holidayTitlesBorder:!1,weeksBorder:!1,datesText:e,dates:r,holidayTitlesText:a,holidayTitles:l,weeksText:t,weeks:o,weekNumsText:n,weekNums:c})}()}),[m.showWeeks,m.editWeek,m.editTitle,m.holidayTitles]),r.a.createElement("div",null,r.a.createElement("table",{width:"100%",border:"1px"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("div",{className:"heading-text"}," ",r.a.createElement(we.a,{className:"plus-image",src:m.open?Se.a:Ie.a,onClick:function(){if(m.open)d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));else{var e={orgID:a};i.a.post("/organisation/getHolidayData",e).then((function(e){var a=e.data;console.log(a);var t=ie()(),n=ie()(),r="",l="";""==a.org.holidayStartDate?r="":(t=ie()(a.org.holidayStartDate,"DD/MM/YYYY"),r=t.format("DD/MM/YYYY")),""==a.org.holidayEndDate?l="":(n=ie()(a.org.holidayEndDate,"DD/MM/YYYY"),l=n.format("DD/MM/YYYY")),console.log(t),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!0,holidayTitles:a.titles,startDate:t,startDateValue:r,endDate:n,endDateValue:l,weekSystem:"true"==a.org.weekSystem,orgLocked:"true"==a.locked,collides:a.collideBookings})})),function(e,a){if(a.length>0){var t,n=Object(re.a)(a);try{for(n.s();!(t=n.n()).done;){var r,l=t.value,o=Object(re.a)(e);try{for(o.s();!(r=o.n()).done;){var c=r.value;l.weeks.includes(c.week)&&(c.holiday=l.titleUUID)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){n.e(s)}finally{n.f()}d((function(a){return Object(le.a)(Object(le.a)({},a),{},{weeks:e})}))}}(V(r,l),a.holidays),function(e){for(var a=[],t=1;t<=e;t++)a.push(t);d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeksNum:a})}))}(a.org.weeks)})).catch((function(e){console.log(e)}))}}})," Week System / Holidays"),r.a.createElement("br",null),r.a.createElement(De.a,{in:m.open},r.a.createElement("div",null,r.a.createElement("div",{className:"margin-text"},M.dates?r.a.createElement("div",null,M.datesText):null,M.dates&&M.holidayTitles?"---":null,M.holidayTitles?r.a.createElement("div",{className:"help-holidayTitles"},M.holidayTitlesText):null,M.holidayTitles&&M.weeks||M.holidayTitles&&M.weekNums?"---":null,M.weeks?r.a.createElement("div",{className:"help-weeks"},M.weeksText):null,M.weekNums?r.a.createElement("div",{className:"help-weekNums"},M.weekNumsText):null),r.a.createElement("div",{className:"normal-text"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,null,"Start Date:"),r.a.createElement(v.a,null,r.a.createElement(qe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(m.startDate),value:m.startDateValue,onChange:function(e){d((function(a){return Object(le.a)(Object(le.a)({},a),{},{startDate:e,startDateValue:ie()(e,"DD/MM/YYYY").format("DD/MM/YYYY")})})),V(ie()(e,"DD/MM/YYYY").format("DD/MM/YYYY"),m.endDateValue)}}))),r.a.createElement(p.a,{className:"holidays-datePadding"},r.a.createElement(v.a,null,"End Date:"),r.a.createElement(v.a,null,r.a.createElement(qe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(m.endDate),value:m.endDateValue,onChange:function(e){d((function(a){return Object(le.a)(Object(le.a)({},a),{},{endDate:e,endDateValue:ie()(e,"DD/MM/YYYY").format("DD/MM/YYYY")})})),V(m.startDateValue,ie()(e,"DD/MM/YYYY").format("DD/MM/YYYY"))}}))),r.a.createElement(p.a,{className:"holidays-datePadding"},m.editWeek?null:r.a.createElement("div",null,m.addNew?r.a.createElement("div",{className:"holidays-addNew"},r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Label,null,"New Holiday:"),r.a.createElement(he.a.Control,{name:"newHoliday",value:m.newHoliday,onChange:function(e){var a=e.target,t=a.name,n=a.value;d((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},t,n))}))}})),r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,title:m.newHoliday};i.a.post("/organisation/addHolidayTitle",e).then((function(e){var a=e.data;console.log(a),"Successfully added"==a.message&&d((function(e){return Object(le.a)(Object(le.a)({},e),{},{holidayTitles:a.titles,addNew:!1,newHoliday:""})}))})).catch((function(e){console.log(e)}))}},"Add"),r.a.createElement(T.a,{variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{addNew:!1})}))}},"Close")):r.a.createElement("div",null,r.a.createElement(T.a,{className:"side-by-side",variant:"primary",onClick:function(){d((function(e){return Object(le.a)(Object(le.a)({},e),{},{addNew:!0})}))}},"Add New Holiday Title"),r.a.createElement("div",{className:m.editTitle?null:"weeks-holidays-hide"},r.a.createElement(T.a,{className:"side-by-side",variant:"primary",onClick:function(){var e,a="",t=Object(re.a)(m.holidayTitles);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.uuid==m.titleUUID){a=n.name;break}}}catch(r){t.e(r)}finally{t.f()}Y({heading:"Rename",open:!0,renameText:a})}},"Rename"),r.a.createElement(T.a,{className:"side-by-side",variant:"primary",onClick:function(){var e={orgID:a,uuid:m.titleUUID};i.a.post("/organisation/deleteHolidayTitle",e).then((function(e){var a=e.data;"Successfully Deleted"==a.message&&(d((function(e){return Object(le.a)(Object(le.a)({},e),{},{holidayTitles:a.titles,editTitle:!1})})),function(e){var a,t=m.weeks,n=Object(re.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.holiday==e&&(r.holiday=0)}}catch(l){n.e(l)}finally{n.f()}d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:t})}))}(m.titleUUID))})).catch((function(e){console.log(e)}))}},"Delete"))))),r.a.createElement(p.a,null,m.editWeek?null:r.a.createElement("div",null,r.a.createElement("div",{className:"weekSystem-centred"},r.a.createElement(he.a.Check,{type:"checkbox",checked:m.weekSystem,onChange:function(e){var t=e.target.checked,n=[];if(t)n=["1"],d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t,weeksNum:n})})),function(){var e,a=m.weeks,t=Object(re.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;"0"==n.holiday&&(n.holiday="w01")}}catch(r){t.e(r)}finally{t.f()}d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:a})}))}();else{var r={orgID:a};i.a.post("/organisation/geRoomsWeekSystem",r).then((function(e){e.data.rooms?f({heading:"Week System",message:"There are some rooms still using the week system, delete them first",open:!0}):(d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weekSystem:t,weeksNum:n})})),function(){var e,a=m.weeks,t=Object(re.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.holiday.includes("w")&&(n.holiday="0")}}catch(r){t.e(r)}finally{t.f()}d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:a})}))}())})).catch((function(e){console.log(e)}))}},label:"Use week system"})),m.weekSystem?r.a.createElement("div",{className:"weekSystem-centred"},"Weeks: ",m.weeksNum.length,r.a.createElement("br",null),r.a.createElement(T.a,{variant:"primary",onClick:function(){var e=m.weeksNum;if(e.length>1){var a,t=e.pop(),n=t-1,r=m.weeks,l=Object(re.a)(r);try{for(l.s();!(a=l.n()).done;){var o=a.value;o.holiday=="w"+J(t)&&(o.holiday="w"+J(n))}}catch(c){l.e(c)}finally{l.f()}d((function(a){return Object(le.a)(Object(le.a)({},a),{},{weeksNum:e,weeks:r})}))}}},"-"),r.a.createElement(T.a,{variant:"primary",onClick:function(){var e=m.weeksNum,a=e.length+1;100==a?f((function(e){return Object(le.a)(Object(le.a)({},e),{},{heading:"Weeks",message:"You cannot exceed 99 weeks",open:!0})})):(e.push(a),d((function(a){return Object(le.a)(Object(le.a)({},a),{},{weeksNum:e})})))}},"+")):null))),r.a.createElement(v.a,null,r.a.createElement(p.a,null,"Holiday Titles:",r.a.createElement("div",{className:M.holidayTitles?"help-holidaytiles-bordered scrollable-150 holidays-titles":"scrollable-200 holidays-titles"},r.a.createElement(Ue.a,null,m.weekSystem?null:r.a.createElement(Ge.a,{action:!0,onClick:function(){return z("Normal",0)}},"Normal"),m.holidayTitles.map((function(e,a){return r.a.createElement(Ge.a,{key:a,action:!0,onClick:function(){return z(e.name,e.uuid)}},e.name)}))))),r.a.createElement(p.a,{className:"weeks-row-padding"},r.a.createElement("div",{className:m.weekSystem?"weekSystem-weeks scrollable-150":"weeks-holidays-hide"},"Weeks:",r.a.createElement("div",{className:M.weekNums?"help-weekNums-bordered":null},r.a.createElement(Ue.a,null,m.weeksNum.map((function(e,a){return r.a.createElement(Ge.a,{key:a,action:!0,onClick:function(){!function(e){if(m.editWeek){var a=m.weeks;a[m.editWeekIndex].holiday="w"+J(e),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{weeks:a,editWeek:!1})}))}}(e)}},"Week",e)}))))))))),r.a.createElement(v.a,null,"Year Preview:",r.a.createElement("div",{className:M.weeks?"help-weeks-bordered scrollable-300":"scrollable-300"},r.a.createElement(Ue.a,null,m.weeks.map((function(e,a){return r.a.createElement(Ge.a,{key:a,action:!0,onClick:function(){return e=a,void d((function(a){return Object(le.a)(Object(le.a)({},a),{},{editWeekIndex:e,editWeek:!0,editTitle:!1})}));var e}},e.date," - ",function(e){if(0==e)return"Normal";var a="";if(e.includes("h")){var t=e.replace("h","");a="0"==t[0]?t[1]:t;var n,r=Object(re.a)(m.holidayTitles);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(l.uuid==a)return l.name}}catch(c){r.e(c)}finally{r.f()}}if(e.includes("w")){var o=e.replace("w","");return"0"==o[0]?"Week "+o[1]:"Week "+o}}(e.holiday))})))),r.a.createElement("div",{className:m.showWeeks?"save-button-show":"save-button-hidden"},m.orgLocked?r.a.createElement("div",null,m.collides?r.a.createElement(T.a,{onClick:function(){l.push("/org/"+a+"/collisionBookings")}},"Collided Bookings"):null,r.a.createElement(T.a,{onClick:function(){U({heading:"Unlock Organisation",message1:"To unlock this organisation make sure that you have cleared all of the collided bookings, the system WILL NOT let you unlock until this is done. Backups only stay active for one cycle of locking organisation. Once unlocked, they are deleted and this is unreservable!!",message2:"If you want to restore everything to the orginial state, before you edit the week system, click 'RESTORE'",open:!0})}},"Unlock")):r.a.createElement(T.a,{onClick:function(){var e,n={},r=Object(re.a)(m.weeks);try{for(r.s();!(e=r.n()).done;){var l=e.value;if("0"!=l.holiday){var o=n[l.holiday];""==o||null==o?o=l.week:o+=","+l.week,n[l.holiday]=o}}}catch(u){r.e(u)}finally{r.f()}var c=Object.keys(n);console.log(c);var s={orgID:a,startDate:m.startDateValue,endDate:m.endDateValue,holidays:c,holidayWeeks:n,weekSystem:m.weekSystem.toString(),weeksNo:m.weeksNum.length};i.a.post("/organisation/saveHolidays",s).then((function(e){var a=e.data;if(t(G(a.holidays)),a.locked){t(H("true")),d((function(e){return Object(le.a)(Object(le.a)({},e),{},{orgLocked:a.locked,collides:a.collidedBookings})}));var n="",r="";a.collidedBookings&&(n="\n\nSome of your bookings have been collided with single bookings, as single bookings are not affected with changing the week system. Please go to 'COLLIDED BOOKINGS' to see them",r="You will NOT be able to unlock your organisation until you have cleared all the collided bookings"),I({heading:"Week System",message1:"Some or all of your rooms have the week system enabled on them. Due to this your organisation will be locked until you double check all the bookings are where they should be.\n\n\n\n",message2:"To unlock the organisation, go on 'UNLOCK' and follow the instructions to unlock. Here you will also be able to restore the system back to how it was, by going on 'RESTORE'",message3:n,boldMessage:r,open:!0})}})).catch((function(e){console.log(e)}))}},"Save"))))))))))),r.a.createElement(ce.a,{show:g.open,onHide:Q},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,g.heading)),r.a.createElement(ce.a.Body,null,g.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:Q},"Close"))),r.a.createElement(ce.a,{show:h.open,onHide:q},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,h.heading)),r.a.createElement(ce.a.Body,null,h.message),r.a.createElement(ce.a.Footer,null,h.showAccept?r.a.createElement("div",null,r.a.createElement(T.a,{variant:"primary",onClick:h.acceptFunction},h.acceptName)):null,h.showCancel?r.a.createElement("div",null,r.a.createElement(T.a,{variant:"primary",onClick:q},h.cancelName)):null)),r.a.createElement(ce.a,{size:"lg",show:w.open,onHide:F},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,w.heading)),r.a.createElement(ce.a.Body,null,""!=w.message1?w.message1:null,""!=w.message2?r.a.createElement("div",null,r.a.createElement("br",null),w.message2):null,""!=w.message3?r.a.createElement("div",null,r.a.createElement("br",null),w.message3):null,""!=w.boldMessage?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("strong",null,w.boldMessage)):null),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:F},"Close"))),r.a.createElement(ce.a,{show:R.open,onHide:function(){Y((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,R.heading)),r.a.createElement(ce.a.Body,null,r.a.createElement(he.a.Control,{name:"renameText",value:R.renameText,onChange:function(e){var a=e.target,t=a.name,n=a.value;Y((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},t,n))}))}})),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){var e={orgID:a,uuid:m.titleUUID,title:R.renameText};i.a.post("/organisation/renameHolidayTile",e).then((function(e){var a=e.data;"Successfully Updated"==a.message&&d((function(e){return Object(le.a)(Object(le.a)({},e),{},{holidayTitles:a.titles,editTitle:!1})}))})).catch((function(e){console.log(e)})),Y({renameText:"",open:!1})}},"Rename"))),r.a.createElement(ce.a,{size:"lg",show:N.open,onHide:function(){U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,N.heading)),r.a.createElement(ce.a.Body,null,""!=N.message1?N.message1:null,""!=N.message2?r.a.createElement("div",null,r.a.createElement("br",null),N.message2):null,""!=N.message3?r.a.createElement("div",null,r.a.createElement("br",null),N.message3):null,""!=N.boldMessage?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("strong",null,N.boldMessage)):null),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){A({heading:"Are you sure?",message:"Are you sure you want to Restore?",acceptName:"Yes",showAccept:!0,acceptFunction:W,cancelName:"No",showCancel:!0,open:!0})}},"Restore"),r.a.createElement(T.a,{variant:"primary",onClick:function(){U((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}));var e={orgID:a};i.a.post("/organisation/unlock",e).then((function(e){var a=e.data;"Yes"==a.error?(U({open:!1}),f({heading:"Error Unlocking",message:a.message,open:!0})):"System Unlocked"==a.message&&(t(H("true"==a.locked)),A({heading:"System Unlocked",message:"Your system has been unlocked!",showAccept:!0,acceptName:"Ok",acceptFunction:K,showCancel:!1,open:!0}))})).catch((function(e){console.log(e)}))}},"Unlock"))))};var Ke=function(e){var a=e.match.params.id;return Object(k.f)(),Object(n.useEffect)((function(){document.title="STAFF"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{fluid:!0,className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement(Ne,{orgID:a}),r.a.createElement("br",null),r.a.createElement(Be,{orgID:a}),r.a.createElement("br",null),r.a.createElement(Re,{orgID:a})," ",r.a.createElement("br",null),r.a.createElement(Ye,{orgID:a})," ",r.a.createElement("br",null),r.a.createElement(Le,null,r.a.createElement(Fe,{orgID:a})," ",r.a.createElement("br",null)),r.a.createElement(We,{orgID:a}))))};var Ve=function(e){var a=e.match.params.id,t=(Object(u.c)((function(e){return e.user})),Object(u.c)((function(e){return e.organisation}))),l=Object(u.c)((function(e){return e.globalVars})),o=Object(k.f)(),s=Object(u.b)(),h=Object(n.useState)(""),p=Object(c.a)(h,2),v=p[0],D=p[1];return Object(n.useEffect)((function(){document.title="STAFF - Sign In",j()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,t.name)," ",r.a.createElement("br",null),r.a.createElement("h3",null,"Please Sign In!"),r.a.createElement("p",null,t.message),t.signInLocal?r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",{id:"lblEmail"},"Email:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtEmail",type:"email"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{id:"lblPassword"},"Password:"),r.a.createElement("br",null),r.a.createElement("input",{id:"txtPassword",type:"password"}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("p",null,v)),r.a.createElement("br",null),r.a.createElement(T.a,{variant:"warning",onClick:function(e){e.preventDefault();var a=document.getElementById("txtEmail").value,t=document.getElementById("txtPassword").value;i.a.get("/login?email="+a+"&password="+t).then((function(e){console.log(e.data),"Logged in successful"===e.data.message?(s(m(!0)),s(d(e.data.uuid)),s(E(e.data.displayName)),s(b(e.data.role)),s(g(e.data.new)),s(f(e.data.requestedPassword)),s(y(e.data.orgID)),s(O(e.data.SARequest)),l.forceSignIn?(s(ne(!0)),s(te(!1))):(s(ne(!0)),s(te(!0)))):D(e.data.info)})).catch((function(e){console.log(e)}))}},"Log in"),r.a.createElement(T.a,{variant:"warning",onClick:function(){return o.push("/org/"+a+"/forgotPassword")}},"Forgot Password"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null),t.signInGoogle?r.a.createElement(T.a,{variant:"danger",href:A+"/auth/google"},r.a.createElement("i",{className:"fab fa-google"})," Log in with Google"):r.a.createElement("div",null))))};var Je=function(e){var a=e.match.params.id,t=Object(u.c)((function(e){return e.user})),l=Object(u.c)((function(e){return e.globalVars})),o=Object(u.b)(),s=Object(k.f)(),m=Object(n.useState)(!1),d=Object(c.a)(m,2),E=d[0],b=d[1];return Object(n.useEffect)((function(){document.title="STAFF",function(){var e="/organisation/"+a;i.a.get(e).then((function(e){"Yes"!=e.data.userError?(o({type:"ORG_UPDATE_NAME",value:e.data.organisation.name}),o(R("true"==e.data.organisation.auth_Local)),o(Y("true"==e.data.organisation.auth_Google)),o(_(e.data.organisation.message)),o(L("true"==e.data.organisation.useDepartments)),o(M(e.data.organisation.noOfDepartments)),o(function(e){return{type:"ORG_UPDATE_ALLOCATEDROOMS",value:e}}(e.data.organisation.allocatedRooms)),o(Q(e.data.organisation.redeemedRooms)),o(F(e.data.rooms)),o(function(e){return{type:"ORG_UPDATE_LAYOUTS",value:e}}(e.data.layouts)),o(G(e.data.holidays)),o(H("true"==e.data.organisation.locked)),0==t.auth?s.push("/org/"+a+"/signIn"):t.orgID!=a?s.push("/org/"+t.orgID+"/wrongOrganisation"):"true"==t.requestedPassword?s.push("/org/"+a+"/changePassword"):"true"==t.new?s.push("/org/"+a+"/createPassword"):"true"==t.SARequest?s.push("/org/"+a+"/changeOfSeniorRequest"):l.fromSignIn&&s.push("/org/"+a),b(!0)):s.push("/")})).catch((function(e){console.log(e)}));var n={orgID:a};i.a.post("/organisation/allDepartments",n).then((function(e){o(P(e.data.departments))})).catch((function(e){console.log(e)}))}()}),[l.forceSignIn]),r.a.createElement("div",null,E?r.a.createElement("div",null,r.a.createElement(k.a,{path:"/org/:id",exact:!0,component:de}),r.a.createElement(k.a,{path:"/org/:id/collisionBookings",component:ye}),r.a.createElement(k.a,{path:"/org/:id/organisationAdmin",component:Ke}),r.a.createElement(k.a,{path:"/org/:id/signIn",component:Ve}),r.a.createElement(k.a,{path:"/org/:id/forgotPassword",component:pe}),r.a.createElement(k.a,{path:"/org/:id/changePassword",component:ve}),r.a.createElement(k.a,{path:"/org/:id/changeOfSeniorRequest",component:Oe}),r.a.createElement(k.a,{path:"/org/:id/createPassword",component:Ae}),r.a.createElement(k.a,{path:"/org/:id/wrongOrganisation",component:je})):null)};t(470);var ze=function(e){var a=e.match.params.id,t=Object(k.f)(),l=Object(u.c)((function(e){return e.user})),o=Object(u.c)((function(e){return e.organisation})),s=Object(u.c)((function(e){return e.globalVars})),m=Object(n.useState)({userList:[],departmentList:[],user:"Users",userID:"",department:"Departments",departmentID:"",sessionLength:"Length",sessionLengthTitle:"",showSessionLength:!0,sessions:[],repeat:!1,daily:!1,weekly:!1,endOfYear:!1,untilDate:ie()(),showUserDropdown:!0,sessDes:"",sessDesTitle:"",comments:"",times:[]}),d=Object(c.a)(m,2),E=d[0],b=d[1],g=Object(n.useState)({open:!1,heading:"",message:""}),f=Object(c.a)(g,2),y=f[0],O=f[1];function h(){O((function(e){return Object(le.a)(Object(le.a)({},e),{},{open:!1})}))}function A(e){var a=e.target.innerText;b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessionLength:a})}))}function j(e){var a=e.target,t=a.name,n=a.value;b((function(e){return Object(le.a)(Object(le.a)({},e),{},Object(Ee.a)({},t,n))}))}function D(){var e="",n="",r="",c=[],u=s.sessionID.split("-");if("Timetable"==s.layoutData.layout)if(u[1].toString().includes("b"))c.push(u[1]);else for(var m=parseInt(u[1]),d=0;d<E.sessionLength;d++)c.push(m),m++;else if("Diary"==s.layoutData.layout)for(var b=ie()(s.sessionLabel,"HH:mm"),g=ie()(E.sessionLength,"HH:mm");b.isBefore(g);)c.push(b.format("HH:mm").replace(":","")),b.add(s.timeInterval,"m");E.repeat?(e="repeat",E.daily?(n="daily",r=E.untilDate.toLocaleDateString()):(E.weekly||E.endOfYear)&&(n="weekly",r=E.untilDate.toLocaleDateString())):(e="single",r="");var f,y="",h=Object(re.a)(o.holidays);try{for(h.s();!(f=h.n()).done;){var p=f.value;if(p.titleUUID==s.weekUUID){y=p.weeks;break}}}catch(k){h.e(k)}finally{h.f()}var v,A=ie()(s.date,"DD/MM/YYYY");"repeat"==e?v=ie()(r,"DD/MM/YYYY").format("DD/MM/YYYY"):v="";var j={orgID:a,roomID:s.roomID,user:E.userID,departmentID:E.departmentID,sessionDes:E.sessDes,sessionTotal:c.length,sessions:c.toString(),comments:E.comments,bookingType:e,repeatType:n,startDate:A.format("DD/MM/YYYY"),repeatUntil:v,createdBy:l.uuid,dayList:s.dayList,weekSystem:s.weekSystem,weekSysWeeks:y};i.a.post("/booking/createBooking",j).then((function(e){var n=e.data;"null"==n.error&&"null"==n.userError?t.push("/org/"+a):O((function(){return{heading:"Booking",message:n.message,open:!0}}))})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){""==s.date?t.push("/org/"+a):function(){"user"!=l.role?function(){var e={orgID:a,users:!0,departments:!0};i.a.post("/organisation/usersAndDepartments",e).then((function(e){var a=e.data;"none"!=a.userList&&b((function(e){return Object(le.a)(Object(le.a)({},e),{},{userList:a.userList})})),"none"!=a.departmentList&&b((function(e){return Object(le.a)(Object(le.a)({},e),{},{departmentList:a.departmentList})}))})).catch((function(e){console.log(e)}))}():(!function(){var e,a=l.userDepartments.split(","),t=[],n=Object(re.a)(a);try{for(n.s();!(e=n.n()).done;){var r,c=e.value,s=Object(re.a)(o.departments);try{for(s.s();!(r=s.n()).done;){var i=r.value;i.uuid==c&&t.push(i)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){n.e(u)}finally{n.f()}b((function(e){return Object(le.a)(Object(le.a)({},e),{},{departmentList:t})}))}(),b((function(e){return Object(le.a)(Object(le.a)({},e),{},{showUserDropdown:!1,user:l.name,userID:l.uuid})})));if("Timetable"==s.layoutData.layout){if(s.sessionID.includes("b"))b((function(e){return Object(le.a)(Object(le.a)({},e),{},{showSessionLength:!1,sessionLength:"1"})}));else{for(var e=s.sessionID.split("-"),t=parseInt(e[1]),n=[],r=1,c=t;c<=s.totalSessions;c++)n.push(r),r++;b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:n})}))}b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessDesTitle:"Class",sessionLengthTitle:"Session Length"})}))}else if("Diary"==s.layoutData.layout){!function(e,a,t){var n=[],r=ie()(e,"HH:mm"),l=ie()(a,"HH:mm");r.add(t,"m");for(;r.isSameOrBefore(l);)n.push(r.format("HH:mm")),r.add(t,"m");b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessions:n})})),console.log(n)}(ie()(s.sessionLabel,"HH:mm"),s.finishTime,s.timeInterval),b((function(e){return Object(le.a)(Object(le.a)({},e),{},{sessDesTitle:"Subject",sessionLengthTitle:"Until"})}))}var u=ie()(s.date,"DD/MM/YYYY");b((function(e){return Object(le.a)(Object(le.a)({},e),{},{untilDate:u})}))}()}),[]),r.a.createElement("div",{className:"body booking-content"},r.a.createElement(S.a,{fluid:!0,className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement(p.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,{xs:8},r.a.createElement(p.a,null,r.a.createElement(v.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Date: ",s.date)),r.a.createElement(v.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Room: ",s.roomName)),r.a.createElement(v.a,{className:"booking-topInfo"},r.a.createElement("strong",null,"Session: ",s.sessionLabel))),r.a.createElement("hr",null),r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(he.a.Group,null,"User:",E.showUserDropdown?r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-users"},E.user),r.a.createElement(w.a.Menu,{className:"dropdown-items"},E.userList.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:function(){return a=e.displayName,t=e.uuid,void b((function(e){return Object(le.a)(Object(le.a)({},e),{},{user:a,userID:t})}));var a,t}},e.displayName)}))))):r.a.createElement("div",null,E.user)),r.a.createElement(he.a.Group,null,"Department:",r.a.createElement(w.a,null,r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-departments"},E.department),r.a.createElement(w.a.Menu,{className:"dropdown-items"},E.departmentList.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:function(){return a=e.name,t=e.uuid,b((function(e){return Object(le.a)(Object(le.a)({},e),{},{department:a,departmentID:t})})),void console.log(s.roomID);var a,t}},e.name)}))))),r.a.createElement(he.a.Group,null,E.sessDesTitle,":",r.a.createElement(he.a.Control,{type:"text",name:"sessDes",onChange:j})),r.a.createElement(he.a.Group,null,"Comments:",r.a.createElement(he.a.Control,{as:"textarea",rows:"3",name:"comments",onChange:j}))),r.a.createElement(v.a,null,r.a.createElement(he.a.Group,null,E.sessionLengthTitle,":",E.showSessionLength?r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(w.a.Toggle,{variant:"primary",id:"dropdown-sessionLength"},E.sessionLength),r.a.createElement(w.a.Menu,{className:"dropdown-items"},E.sessions.map((function(e,a){return r.a.createElement(w.a.Item,{key:a,onClick:A},e)}))))):" "+E.sessionLength),r.a.createElement(p.a,null,"user"!=l.role?r.a.createElement("div",null,r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Check,{className:"check-side-by-side-b",type:"checkbox",label:"Repeat",onChange:function(e){var a=e.target.checked;b((function(e){return Object(le.a)(Object(le.a)({},e),{},{repeat:a})}))}}))):null),E.repeat?r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Check,{className:"check-side-by-side-b",type:"checkbox",label:"Daily",checked:E.daily,onChange:function(e){var a=e.target.checked;b(a?function(e){return Object(le.a)(Object(le.a)({},e),{},{daily:a,weekly:!a,endOfYear:!a})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{daily:a})})}}),r.a.createElement(he.a.Check,{className:"check-side-by-side",type:"checkbox",label:"Weekly",checked:E.weekly,onChange:function(e){var a=e.target.checked;b(a?function(e){return Object(le.a)(Object(le.a)({},e),{},{weekly:a,daily:!a,endOfYear:!a})}:function(e){return Object(le.a)(Object(le.a)({},e),{},{weekly:a})})}}),r.a.createElement(he.a.Check,{className:"check-side-by-side",type:"checkbox",label:"End of Year (Weekly)",checked:E.endOfYear,onChange:function(e){var a=e.target.checked;a?(b((function(e){return Object(le.a)(Object(le.a)({},e),{},{endOfYear:a,daily:!a,weekly:!a})})),function(){var e=ie()(),a=ie()();if(a.month()>6){var t=ie()("31/07/"+a.year(),"DD/MM/YYYY");t.add(1,"y"),e=ie()(t,"DD/MM/YYYY")}else{var n=ie()("31/07/"+a.year(),"DD/MM/YYYY");e=ie()(n,"DD/MM/YYYY")}b((function(a){return Object(le.a)(Object(le.a)({},a),{},{untilDate:new Date(e)})}))}()):b((function(e){return Object(le.a)(Object(le.a)({},e),{},{endOfYear:a})}))}}))),r.a.createElement(p.a,null,r.a.createElement(v.a,null),r.a.createElement(v.a,null,r.a.createElement(he.a.Group,null,"Until:",r.a.createElement("br",null),r.a.createElement(qe.a,{dateFormat:"dd/MM/yyyy",selected:new Date(E.untilDate),onChange:function(e){b((function(a){return Object(le.a)(Object(le.a)({},a),{},{untilDate:e})}))}}))))):null,r.a.createElement("div",{className:"add-button"},r.a.createElement(T.a,{variant:"primary",onClick:function(){if(ie()(),"Users"==E.user)O({heading:"Booking",message:"Please select an user",open:!0});else if("Departments"==E.department)O({heading:"Booking",message:"Please select a department",open:!0});else if("Length"==E.sessionLength)O({heading:"Booking",message:"Please select a session length",open:!0});else if(""==E.sessDes)O({heading:"Booking",message:"Please put a class",open:!0});else if(E.repeat)if(E.daily||E.weekly||E.endOfYear){var e=ie()(E.untilDate,"DD/MM/YYYY"),a=ie()(s.date,"DD/MM/YYYY");if(e.isSameOrBefore(a))O({heading:"Booking",message:"Please select a date after the selected booking date",open:!0});else{var t=ie()(s.date,"DD/MM/YYYY");t.add(2,"y"),e.isAfter(t)?O({heading:"Booking",message:"You cannot repeat a booking for more than two years.",open:!0}):D()}}else O({heading:"Booking",message:"Please select a repeat method",open:!0});else D()}},"Book"))))),r.a.createElement(v.a,null)))),r.a.createElement(ce.a,{show:y.open,onHide:h},r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,y.heading)),r.a.createElement(ce.a.Body,null,y.message),r.a.createElement(ce.a.Footer,null,r.a.createElement(T.a,{variant:"primary",onClick:h},"Close"))))};var Xe=function(e){return r.a.createElement("div",null,r.a.createElement(be.a,{body:!0,className:"Organisations-ListBox"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("label",null,e.name)),r.a.createElement(v.a,null,r.a.createElement("label",null,e.email)),r.a.createElement(v.a,null,r.a.createElement("label",null,e.poc)),r.a.createElement(v.a,null,r.a.createElement("label",null,e.id)))))};var Ze=function(){var e=Object(k.f)(),a=Object(n.useState)(!1),t=Object(c.a)(a,2),l=t[0],o=t[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){i.a.get("/organisation/all").then((function(e){d(e.data),o(!0)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"AH-AddOrganisationBtn"},r.a.createElement(T.a,{variant:"warning",onClick:function(){return e.push("/administrator/organisationRegister")}},"Add Organisation")),r.a.createElement("br",null),l?r.a.createElement("div",null,r.a.createElement(be.a,{body:!0,className:"Organisations-ListTitles"},r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement("label",null,"Name")),r.a.createElement(v.a,null,r.a.createElement("label",null,"Email")),r.a.createElement(v.a,null,r.a.createElement("label",null,"Point of Contact")),r.a.createElement(v.a,null,r.a.createElement("label",null,"Unquie URL")))),r.a.createElement("br",null),m.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(Xe,{name:e.name,email:e.POC_Email,poc:e.POC_Name,id:e.url}),r.a.createElement("br",null))}))):r.a.createElement("div",null))};var $e=function(){var e=Object(k.f)(),a=Object(u.c)((function(e){return e.user}));return a.auth&&"superAdmin"==a.role||e.push("/administrator/signIn"),Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{fluid:!0,className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement(Ze,null))))};var ea=function(){var e=Object(n.useState)(!0),a=Object(c.a)(e,2),t=a[0],l=a[1],o=Object(u.c)((function(e){return e.user})),s=Object(k.f)();return Object(n.useEffect)((function(){j(),o.auth&&("superAdmin"==o.role?s.push("/"):l(!1))}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Administrator Sign In"),t?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(T.a,{variant:"dark",href:A+"/auth/github"},r.a.createElement("i",{class:"fab fa-github"}),"  Log in with Github"),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("h1",null,"Access Denied"),r.a.createElement(T.a,{variant:"warning",href:"/"},"Back to Home "),r.a.createElement("br",null),r.a.createElement("br",null)))))};var aa=function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],l=a[1],o=Object(k.f)();return Object(n.useEffect)((function(){document.title="STAFF - Administrator"}),[]),r.a.createElement("div",{className:"body"},r.a.createElement(S.a,{className:"p-3"},r.a.createElement(N.a,{className:"back-color"},r.a.createElement("h1",null,"Organisation Register"),r.a.createElement(he.a,{className:"A-AddOrganisationText"},r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblOrgName"},"Organisation Name:"),r.a.createElement("br",null),r.a.createElement(he.a.Control,{id:"txtOrgName",type:"text",required:!0})),r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblAlRooms"},"Allocated Rooms:"),r.a.createElement("br",null),r.a.createElement(he.a.Control,{id:"txtAlRooms",type:"text",required:!0}))),r.a.createElement(he.a.Label,{id:"lblAuthTypes"},"Types of Authencation:"),r.a.createElement("br",null),r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Check,{id:"ckbLocal",type:"checkbox",label:"Local Login"})),r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Check,{id:"ckbGoggle",type:"checkbox",label:"Google Login"}))),r.a.createElement(he.a.Label,{className:"A-AddOrganisationTextColor",id:"lblPOC"},"Point of Contact (Senior Admin):"),r.a.createElement("br",null),r.a.createElement(he.a.Row,null,r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblName"},"Name:"),r.a.createElement("br",null),r.a.createElement(he.a.Control,{id:"txtName",type:"text",required:!0})),r.a.createElement(he.a.Group,{as:v.a},r.a.createElement(he.a.Label,{id:"lblEmail"},"Email:"),r.a.createElement("br",null),r.a.createElement(he.a.Control,{id:"txtEmail",type:"text",required:!0}))),r.a.createElement("p",null,t),r.a.createElement(T.a,{type:"submit",onClick:function(e){e.preventDefault();var a=document.getElementById("txtOrgName").value,t=document.getElementById("txtAlRooms").value,n=document.getElementById("ckbLocal").checked,r=document.getElementById("ckbGoggle").checked,c=document.getElementById("txtName").value,s=document.getElementById("txtEmail").value,u={orgName:a,orgRooms:t,authLocal:n.toString(),authGoogle:r.toString(),pName:c,pEmail:s};i.a.post("/administrator/addOrganisation",u).then((function(e){var a=e.data;"null"!=a.error?console.log(a.message):"Yes"==a.userError?l(a.message):"Successfully added"==a.message&&o.push("/administrator")})).catch((function(e){console.log(e)}))},variant:"warning"},"Register")))))},ta=t(23);var na=function(){var e=Object(u.b)(),a=Object(n.useState)(!1),t=Object(c.a)(a,2),l=t[0],o=t[1];return Object(n.useEffect)((function(){i.a.get("/auth",{withCredentials:!0}).then((function(a){console.log(a.data);var t=a.data.auth;e(m(t)),t&&("superAdmin"==a.data.role?(e(E("High-ViewStudios")),e(b("superAdmin"))):(e(d(a.data.user.uuid)),e(E(a.data.user.displayName)),e(b(a.data.user.role)),e(g(a.data.user.new)),e(f(a.data.user.requestedPassword)),e(y(a.data.user.orgID)),e({type:"USER_UPDATE_USERDEPARTMENTS",value:a.data.user.departments}),e(O(a.data.user.SARequest)))),o(!0)})).catch((function(e){console.log("Authe"+e)}))}),[]),r.a.createElement("div",null,l?r.a.createElement(ta.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(h,null),r.a.createElement(C,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/",exact:!0,component:U})," ",r.a.createElement(k.a,{path:"/org/:id",exact:!0,component:Je}),r.a.createElement(k.a,{path:"/org/:id/collisionBookings",component:Je}),r.a.createElement(k.a,{path:"/org/:id/organisationAdmin",component:Je}),r.a.createElement(k.a,{path:"/org/:id/signIn",component:Je}),r.a.createElement(k.a,{path:"/org/:id/forgotPassword",component:Je}),r.a.createElement(k.a,{path:"/org/:id/changePassword",component:Je}),r.a.createElement(k.a,{path:"/org/:id/changeOfSeniorRequest",component:Je}),r.a.createElement(k.a,{path:"/org/:id/createPassword",component:Je}),r.a.createElement(k.a,{path:"/org/:id/wrongOrganisation",component:Je}),r.a.createElement(k.a,{path:"/org/:id/book",component:ze}),r.a.createElement(k.a,{path:"/org/:id/wrongLogin/",component:x}),r.a.createElement(k.a,{path:"/notConnected",component:B}),r.a.createElement(k.a,{path:"/administrator",exact:!0,component:$e})," ",r.a.createElement(k.a,{path:"/administrator/signIn",component:ea})," ",r.a.createElement(k.a,{path:"/administrator/organisationRegister",component:aa})))):r.a.createElement("div",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ra=t(66),la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{auth:!1,uuid:"",name:"",email:"",role:"",new:"",requestedPassword:!1,orgID:"",userDepartments:"",SARequest:""},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE_AUTH":return Object(le.a)(Object(le.a)({},e),{},{auth:a.value});case"USER_UPDATE_UUID":return Object(le.a)(Object(le.a)({},e),{},{uuid:a.value});case"USER_UPDATE_NAME":return Object(le.a)(Object(le.a)({},e),{},{name:a.value});case"USER_UPDATE_EMAIL":return Object(le.a)(Object(le.a)({},e),{},{email:a.value});case"USER_UPDATE_ROLE":return Object(le.a)(Object(le.a)({},e),{},{role:a.value});case"USER_UPDATE_NEW":return Object(le.a)(Object(le.a)({},e),{},{new:a.value});case"USER_UPDATE_REQUESTEDPASSWORD":return Object(le.a)(Object(le.a)({},e),{},{requestedPassword:a.value});case"USER_UPDATE_ORGID":return Object(le.a)(Object(le.a)({},e),{},{orgID:a.value});case"USER_UPDATE_USERDEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{userDepartments:a.value});case"USER_UPDATE_SAREQUEST":return Object(le.a)(Object(le.a)({},e),{},{SARequest:a.value});default:return e}},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",signInLocal:!1,signInGoogle:!1,message:"",useDepartments:!1,noOfDepartments:"",departments:[],allocatedRooms:0,redeemedRooms:0,rooms:[],layouts:[],holidays:[],locked:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORG_UPDATE_NAME":return Object(le.a)(Object(le.a)({},e),{},{name:a.value});case"ORG_UPDATE_SIGNIN_LOCAL":return Object(le.a)(Object(le.a)({},e),{},{signInLocal:a.value});case"ORG_UPDATE_SIGNIN_GOOGLE":return Object(le.a)(Object(le.a)({},e),{},{signInGoogle:a.value});case"ORG_UPDATE_MESSAGE":return Object(le.a)(Object(le.a)({},e),{},{message:a.value});case"ORG_UPDATE_USEDEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{useDepartments:a.value});case"ORG_UPDATE_NOOFDEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{noOfDepartments:a.value});case"ORG_UPDATE_DEPARTMENTS":return Object(le.a)(Object(le.a)({},e),{},{departments:a.value});case"ORG_UPDATE_ALLOCATEDROOMS":return Object(le.a)(Object(le.a)({},e),{},{allocatedRooms:a.value});case"ORG_UPDATE_REDEEMEDROOMS":return Object(le.a)(Object(le.a)({},e),{},{redeemedRooms:a.value});case"ORG_UPDATE_ROOMS":return Object(le.a)(Object(le.a)({},e),{},{rooms:a.value});case"ORG_UPDATE_LAYOUTS":return Object(le.a)(Object(le.a)({},e),{},{layouts:a.value});case"ORG_UPDATE_HOLIDAYS":return Object(le.a)(Object(le.a)({},e),{},{holidays:a.value});case"ORG_UPDATE_LOCKED":return Object(le.a)(Object(le.a)({},e),{},{locked:a.value});default:return e}},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roomName:"",roomID:"",sessionID:"",sessionLabel:"",date:"",weekBeginDate:"",totalSessions:0,dayList:[],layoutData:{},weekSystem:!1,weekUUID:"",collideBookingsUpdate:!1,startTime:"",finishTime:"",timeInterval:"",forceSignIn:!1,fromSignIn:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_ROOM_NAME":return Object(le.a)(Object(le.a)({},e),{},{roomName:a.value});case"UPDATE_ROOM_ID":return Object(le.a)(Object(le.a)({},e),{},{roomID:a.value});case"UPDATE_ROOM_LAYOUT_DATA":return Object(le.a)(Object(le.a)({},e),{},{layoutData:a.value});case"UPDATE_ROOM_SESSION_ID":return Object(le.a)(Object(le.a)({},e),{},{sessionID:a.value});case"UPDATE_ROOM_SESSION_LABEL":return Object(le.a)(Object(le.a)({},e),{},{sessionLabel:a.value});case"UPDATE_ROOM_DATE":return Object(le.a)(Object(le.a)({},e),{},{date:a.value});case"UPDATE_ROOM_WEEK_BEGIN":return Object(le.a)(Object(le.a)({},e),{},{weekBeginDate:a.value});case"UPDATE_ROOM_TOTAL_SESSIONS":return Object(le.a)(Object(le.a)({},e),{},{totalSessions:a.value});case"UPDATE_ROOM_DAY_LIST":return Object(le.a)(Object(le.a)({},e),{},{dayList:a.value});case"UPDATE_ROOM_WEEK_SYSTEM":return Object(le.a)(Object(le.a)({},e),{},{weekSystem:a.value});case"UPDATE_ROOM_WEEK_UUID":return Object(le.a)(Object(le.a)({},e),{},{weekUUID:a.value});case"UPDATE_FORCE_COLLIDED_BOOKINGS":return Object(le.a)(Object(le.a)({},e),{},{collideBookingsUpdate:a.value});case"UPDATE_DIARY_START_TIME":return Object(le.a)(Object(le.a)({},e),{},{startTime:a.value});case"UPDATE_DIARY_FINISH_TIME":return Object(le.a)(Object(le.a)({},e),{},{finishTime:a.value});case"UPDATE_DIARY_TIME_INTERVAL":return Object(le.a)(Object(le.a)({},e),{},{timeInterval:a.value});case"UPDATE_FORCE_SIGNIN":return Object(le.a)(Object(le.a)({},e),{},{forceSignIn:a.value});case"UPDATE_FROM_SIGNIN":return Object(le.a)(Object(le.a)({},e),{},{fromSignIn:a.value});default:return e}},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{editBooking:!1},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_EDIT_BOOKING":return Object(le.a)(Object(le.a)({},e),{},{editBooking:a.value});default:return e}},ia=Object(ra.b)({user:la,organisation:oa,globalVars:ca,bookings:sa}),ua=Object(ra.c)(ia,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(u.a,{store:ua},r.a.createElement(na,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.0e066386.chunk.js.map